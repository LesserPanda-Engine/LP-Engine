<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"physics_index.js.html":{"id":"physics_index.js.html","title":"Source: physics/index.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: physics/index.js /** * Simple physics simulation and collision support. * * @module engine/physics * @requires engine/vector * @requires engine/scene * @requires engine/utils * @requires engine/physics/spatial-hash */ var Vector = require('engine/vector'); var Scene = require('engine/scene'); var utils = require('engine/utils'); var SpatialHash = require('./spatial-hash'); var config = require('game/config').default.physics; // Constants var ESP = 0.000001; var UP = 1; var DOWN = 2; var LEFT = 4; var RIGHT = 8; var OVERLAP = 16; function eq(a, b) { return (a &lt; b) ? (b - a &lt; ESP) : (a - b &lt; ESP); } function lte(a, b) { return (a &lt; b) || eq(a, b); } function gte(a, b) { return (a &gt; b) || eq(b, a); } // Shapes var BOX = 0; var CIRC = 1; var POLY = 2; // Array Remove - By John Resig (MIT Licensed) function remove(arr, from, to) { var rest = arr.slice((to || from) + 1 || arr.length); arr.length = from &lt; 0 ? arr.length + from : from; return arr.push.apply(arr, rest); }; function erase(arr, obj) { var idx = arr.indexOf(obj); if (idx !== -1) { remove(arr, idx); } }; // Update bounds of a Box body on last frame function updateBounds(body) { body._lastLeft = body.last.x - body.shape.width * body.anchor.x; body._lastRight = body._lastLeft + body.shape.width; body._lastTop = body.last.y - body.shape.height * body.anchor.y; body._lastBottom = body._lastTop + body.shape.height; body._left = body.position.x - body.shape.width * body.anchor.x; body._right = body._left + body.shape.width; body._top = body.position.y - body.shape.height * body.anchor.y; body._bottom = body._top + body.shape.height; body._center.set(body.position.x + body.shape.width * (0.5 - body.anchor.x), body.position.y + body.shape.height * (0.5 - body.anchor.y)); } /** * Physics world. Will automatically create one for each scene when * physics module is imported. * * @class World * @constructor * @param {number} [x] Gravity x * @param {number} [y] Gravity y */ function World(x, y) { /** * Gravity of physics world. * @property {Vector} gravity * @default 0, 980 */ this.gravity = Vector.create(x || 0, y || 980); /** * Spatial hash instance * @type {SpatialHash} */ this.tree = new SpatialHash(config.spatialFactor); /** * Collision solver instance. * @type {SATSolver|AABBSolver} */ this.solver = (config.solver === 'SAT') ? new SATSolver() : new AABBSolver(); /** * Response cache. * @type {Response} * @private */ this.response = new Response(); /** * List of bodies in world. * @type {array} */ this.bodies = []; /** * List of collision groups. * @type {object} * @private */ this.collisionGroups = {}; /** * Save whether collision of a pair of objects are checked * @type {object} * @private */ this.checks = {}; /** * How many pair of bodies have been checked in this frame * @type {number} * @protected */ this.collisionChecks = 0; } /** * Add body to world. * @memberof World# * @method addBody * @param {Body} body */ World.prototype.addBody = function addBody(body) { body.world = this; body._remove = false; if (this.bodies.indexOf(body) === -1) { this.bodies.push(body); } this.addBodyCollision(body); }; /** * Remove body from world. * @memberof World# * @method removeBody * @param {Body} body */ World.prototype.removeBody = function removeBody(body) { if (!body.world) return; body.world = null; body._remove = true; }; /** * Add body to collision group. * @memberof World# * @method addBodyCollision * @param {Body} body */ World.prototype.addBodyCollision = function addBodyCollision(body) { if (typeof body.collisionGroup !== 'number') return; this.collisionGroups[body.collisionGroup] = this.collisionGroups[body.collisionGroup] || []; if (this.collisionGroups[body.collisionGroup].indexOf(body) !== -1) return; this.collisionGroups[body.collisionGroup].push(body); }; /** * Remove body from collision group. * @memberof World# * @method removeBodyCollision * @param {Body} body */ World.prototype.removeBodyCollision = function removeBodyCollision(body) { if (typeof body.collisionGroup !== 'number') return; if (!this.collisionGroups[body.collisionGroup]) return; if (this.collisionGroups[body.collisionGroup].indexOf(body) === -1) return; erase(this.collisionGroups[body.collisionGroup], body); }; /** * Collide body against it's `collideAgainst` groups. * @memberof World# * @method collide * @private * @param {Body} body */ World.prototype.collide = function collide(body) { var g, i, b, group; var key; // Before each collision detection body.beforeCollide(); // Broad phase using spatial hash? if (config.broadPhase === 'SpatialHash') { group = this.tree.retrieve(body); for (i = 0; i &lt; group.length; i++) { b = group[i]; // Should not collide with each other if (b === body || ((body.collideAgainst &amp; b.collisionGroup) === 0)) continue; // Already checked? key = '' + body.id + ':' + b.id; if (this.checks[key]) continue; this.collisionChecks++; // Now this pair is checked this.checks[key] = true; // Clearn reponse instance this.response.clear(); // Test collision if (this.solver.hitTest(body, b, this.response)) { // Apply response if (this.solver.hitResponse(body, b, true, ((b.collideAgainst &amp; body.collisionGroup) === body.collisionGroup), this.response)) { body.afterCollide(b); } } } } // Or simple brute force else { for (g = 0; g &lt; body.collideAgainst.length; g++) { group = this.collisionGroups[body.collideAgainst[g]]; if (!group) continue; for (i = group.length - 1; i &gt;= 0; i--) { if (!group) break; b = group[i]; if (body !== b) { // Clearn reponse instance this.response.clear(); // Test collision if (this.solver.hitTest(body, b, this.response)) { // Apply response if (this.solver.hitResponse(body, b, true, (b.collideAgainst.indexOf(body.collisionGroup) !== -1), this.response)) { body.afterCollide(b); } } } } } } }; /** * Update physics world. * @memberof World# * @method update * @protected */ World.prototype.preUpdate = function preUpdate(delta) { var i; for (i = 0; i &lt; this.bodies.length; i++) { if (this.bodies[i]._remove) { this.removeBodyCollision(this.bodies[i]); utils.removeItems(this.bodies, i, 1); } else { this.bodies[i].last.copy(this.bodies[i].position); } } if (config.broadPhase === 'SpatialHash') { this.tree.clear(); this.checks = {}; } }; /** * Update physics world. * @memberof World# * @method update * @protected */ World.prototype.update = function update(delta) { var i, j, body; var useSpatialHash = config.broadPhase === 'SpatialHash'; for (i = 0; i &lt; this.bodies.length; i++) { body = this.bodies[i]; body.update(delta); if (useSpatialHash) { this.tree.insert(body); } } for (i in this.collisionGroups) { // Remove empty collision group if (this.collisionGroups[i].length === 0) { delete this.collisionGroups[i]; continue; } for (j = this.collisionGroups[i].length - 1; j &gt;= 0; j--) { if (useSpatialHash) { if (this.collisionGroups[i][j] &amp;&amp; this.collisionGroups[i][j].collideAgainst &gt; 0) { this.collide(this.collisionGroups[i][j]); } } else { if (this.collisionGroups[i][j] &amp;&amp; this.collisionGroups[i][j].collideAgainst.length &gt; 0) { this.collide(this.collisionGroups[i][j]); } } } } }; /** * Remove all bodies and collision groups. * @memberof World# * @method cleanup */ World.prototype.cleanup = function cleanup() { this.bodies.length = 0; this.collisionGroups = {}; }; /** * AABB collision solver. This collision solver only supports * Box vs Box, Box vs Circle collisions, and rotation is simply * ignored. * * If you want to rotate the body or use {@link Tilemap} collision * layer, use the more advanced {@link SATSolver} instead. * * Set `physics.solver` to `'AABB'` to enable. * * @class AABBSolver * @constructor */ function AABBSolver() {} /** * Hit test a versus b. * @memberof AABBSolver# * @method hitTest * @param {Body} a * @param {Body} b * @return {boolean} return true if bodies hit. */ AABBSolver.prototype.hitTest = function hitTest(a, b) { // Skip when shape is not available if (!a.shape || !b.shape) return false; if (a.shape.type === BOX &amp;&amp; b.shape.type === BOX) { return !( a._bottom &lt;= b._top || a._top &gt;= b._bottom || a._left &gt;= b._right || a._right &lt;= b._left ); } if (a.shape.type === CIRC &amp;&amp; b.shape.type === CIRC) { // AABB overlap if (!( a._bottom &lt;= b._top || a._top &gt;= b._bottom || a._left &gt;= b._right || a._right &lt;= b._left)) { return a.position.squaredDistance(b.position) &lt; (a.shape.radius + b.shape.radius) * (a.shape.radius + b.shape.radius); } return false; } if ((a.shape.type === BOX &amp;&amp; b.shape.type === CIRC) || (a.shape.type === CIRC &amp;&amp; b.shape.type === BOX)) { var box = (a.shape.type === BOX) ? a : b; var circle = (a.shape.type === CIRC) ? a : b; // AABB overlap if (!(a._bottom &lt;= b._top || a._top &gt;= b._bottom || a._left &gt;= b._right || a._right &lt;= b._left)) { var distX = circle._center.x - utils.clamp(circle._center.x, box._left, box._right); var distY = circle._center.y - utils.clamp(circle._center.y, box._top, box._bottom); return (distX * distX + distY * distY) &lt; (circle.shape.radius * circle.shape.radius); } } return false; }; /** * Hit response a versus b. * @memberof AABBSolver# * @method hitResponse * @param {Body} a * @param {Body} b * @return {boolean} */ AABBSolver.prototype.hitResponse = function hitResponse(a, b) { if (a.shape.type === BOX &amp;&amp; b.shape.type === BOX || a.shape.type === BOX &amp;&amp; b.shape.type === CIRC || a.shape.type === CIRC &amp;&amp; b.shape.type === BOX) { if (lte(a._lastBottom, b._lastTop)) { if (a.collide(b, DOWN)) { a.position.y = b.position.y - b.shape.height * b.anchor.y - a.shape.height * (1 - a.anchor.y); return true; } } else if (gte(a._lastTop, b._lastBottom)) { if (a.collide(b, UP)) { a.position.y = b.position.y + b.shape.height * (1 - b.anchor.y) + a.shape.height * a.anchor.y; return true; } } else if (lte(a._lastRight, b._lastLeft)) { if (a.collide(b, RIGHT)) { a.position.x = b.position.x - b.shape.width * b.anchor.x - a.shape.width * (1 - a.anchor.x); return true; } } else if (gte(a._lastLeft, b._lastRight)) { if (a.collide(b, LEFT)) { a.position.x = b.position.x + b.shape.width * (1 - b.anchor.x) + a.shape.width * a.anchor.x; return true; } } else { // Overlap if (a.collide(b, OVERLAP)) return true; } return false; } else if (a.shape.type === CIRC &amp;&amp; b.shape.type === CIRC) { var angle = b.position.angle(a.position); if (a.collide(b, angle)) { var dist = a.shape.radius + b.shape.radius; a.position.x = b.position.x + Math.cos(angle) * dist; a.position.y = b.position.y + Math.sin(angle) * dist; return true; } } }; /** * Body is the core element of physics module. * * @example &lt;caption&gt;Create a body&lt;/caption&gt; * import { Body, Box } from 'engine/physics'; * * // Create a shape first * let shape = new Box(20, 20); * * // Create body instance * let body = new Body({ * shape: shape, * dumping: 0.6, * }); * * @example &lt;caption&gt;Define collision groups&lt;/caption&gt; * import { getGroupMask } from 'engine/physics'; * * // It is recommend to define once in a module, and import it to use. * const GROUPS = { * SOLID: getGroupMask(0), * PLAYER: getGroupMask(1), * TRIGGER: getGroupMask(2), * }; * * @example &lt;caption&gt;Setup collision&lt;/caption&gt; * let bodyA = new Body({ * // A is a SOLID body * collisionGroup: GROUPS.SOLID, * }); * * let bodyB = new Body({ * // B is a player body * collisionGroup: GROUPS.PLAYER, * // This body will collide with SOLID bodies * collideAgainst: [GROUPS.SOLID], * // Collision response handler * collide: function(other) { * // Response to the collision when collide with something SOLID, * // which means this will be moved back and won't get through * // the SOLID body. * if (other.collisionGroup === GROUPS.SOLID) { * // When return false here, this body will keep as is. * // In this case, player will get through the SOLID body. * return true; * } * }, * }); * * For more complex samples, take a look at the [physics sample code](https://github.com/pixelpicosean/lesser-panda-samples/blob/master/src/game/samples/physics.js). * * @class Body * @constructor * @param {object} [properties] Settings to merge. */ function Body(properties) { /** * ID of this body. * @type {number} */ this.id = Body.uid++; /** * Body's physic world. * @type {World} */ this.world = null; /** * Body's shape. * @type {Box|Circle} */ this.shape = null; /** * Position of body. * @type {Vector} */ this.position = Vector.create(); /** * Anchor of the shape. * @type {Vector} * @default (0.5, 0.5) */ this.anchor = Vector.create(0.5); /** * Last position of body. * @type {Vector} */ this.last = Vector.create(); /** * Body's velocity. * @type {Vector} */ this.velocity = Vector.create(); /** * Body's maximum velocity. * @type {Vector} * @default 400, 400 */ this.velocityLimit = Vector.create(400, 400); /** * Body's mass. * @type {number} * @default 0 */ this.mass = 0; /** * Body's collision group. * @type {number} * @default null */ this.collisionGroup = null; /** * Collision groups that this body collides against. * Note: this will be a Number when broadPhase is &quot;SpatialHash&quot;, * but will be an Array while using &quot;Simple&quot;. * @type {array|number} */ this.collideAgainst = 0; /** * Body's force. * @type {Vector} * @default 0,0 */ this.force = Vector.create(); /** * Body's damping. Should be number between 0 and 1. * @type {number} * @default 0 */ this.damping = 0; // Internal caches this._center = Vector.create(); this._left = 0; this._right = 0; this._top = 0; this._bottom = 0; this._lastLeft = 0; this._lastRight = 0; this._lastTop = 0; this._lastBottom = 0; Object.assign(this, properties); if (config.solver === 'SAT' &amp;&amp; this.shape.type === BOX) { this.shape = this.shape.toPolygon(); } if (config.broadPhase === 'SpatialHash') { if (Array.isArray(this.collideAgainst)) { this.setCollideAgainst(this.collideAgainst); } } else { this.collideAgainst = this.collideAgainst || []; } } Body.uid = 0; /** * Rotation of this body, and equals the rotation of its shape(if exists). * @type {number} */ Object.defineProperty(Body.prototype, 'rotation', { get: function() { return this.shape ? this.shape.rotation : 0; }, set: function(rotation) { this.shape &amp;&amp; (this.shape.rotation = rotation); }, }); /** * Width of this body. * @type {number} */ Object.defineProperty(Body.prototype, 'width', { get: function() { return this.shape ? this.shape.width : 0; }, set: function(width) { this.shape &amp;&amp; (this.shape.width = width); }, }); /** * Height of this body. * @type {number} */ Object.defineProperty(Body.prototype, 'height', { get: function() { return this.shape ? this.shape.height : 0; }, set: function(height) { this.shape &amp;&amp; (this.shape.height = height); }, }); /** * This will be called before collision checking. * You can clean up collision related flags here. * @memberof Body# * @method beforeCollide */ Body.prototype.beforeCollide = function beforeCollide() {}; /** * This is called, when body collides with another body. * @memberof Body# * @method collide * @param {Body} body body that it collided with. * @return {boolean} Return true to apply hit response. */ Body.prototype.collide = function collide() { return true; }; /** * This is called after hit response. * @memberof Body# * @method afterCollide * @param {Body} bodyB body that it collided with. */ Body.prototype.afterCollide = function afterCollide() {}; /** * Set new collision group for body. * @memberof Body# * @method setCollisionGroup * @param {number} group */ Body.prototype.setCollisionGroup = function setCollisionGroup(group) { if (this.world &amp;&amp; typeof this.collisionGroup === 'number') this.world.removeBodyCollision(this); this.collisionGroup = group; if (this.world) this.world.addBodyCollision(this); }; /** * Set body's collideAgainst groups. * @memberof Body# * @method setCollideAgainst * @param {array} groups */ Body.prototype.setCollideAgainst = function setCollideAgainst(groups) { // TODO: warning when groups are not array if (config.broadPhase === 'SpatialHash') { this.collideAgainst = 0; for (var i = 0; i &lt; groups.length; i++) { this.collideAgainst |= groups[i]; } } else { this.collideAgainst = groups; } }; /** * Add body to world. * @memberof Body# * @method addTo * @param {World} world */ Body.prototype.addTo = function addTo(world) { if (this.world) return; world.addBody(this); return this; }; /** * Remove body from it's world. * @memberof Body# * @method remove */ Body.prototype.remove = function remove() { if (this.world) this.world.removeBody(this); }; /** * Remove collision from body. * @memberof Body# * @method removeCollision */ Body.prototype.removeCollision = function removeCollision() { if (this.world) this.world.removeBodyCollision(this); }; /** * @memberof Body# * @method update * @protected */ Body.prototype.update = function update(delta) { if (!this.world) return; if (this.mass !== 0) { this.velocity.add( this.world.gravity.x * this.mass * delta, this.world.gravity.y * this.mass * delta ); } this.velocity.add(this.force.x * delta, this.force.y * delta); if (this.damping &gt; 0 &amp;&amp; this.damping &lt; 1) this.velocity.multiply(Math.pow(1 - this.damping, delta)); if (this.velocityLimit.x &gt; 0) this.velocity.x = utils.clamp(this.velocity.x, -this.velocityLimit.x, this.velocityLimit.x); if (this.velocityLimit.y &gt; 0) this.velocity.y = utils.clamp(this.velocity.y, -this.velocityLimit.y, this.velocityLimit.y); this.position.add(this.velocity.x * delta, this.velocity.y * delta); if (this.shape) { updateBounds(this); } }; /** * Polygon collision shape. * @class Polygon * @constructor * @param {array&lt;Vector&gt;} points Vertices that define the polygon. */ function Polygon(points) { /** * Width of this polygon. * @type {number} */ this.width = 1; /** * Height of this polygon. * @type {number} */ this.height = 1; /** * Vertices. * @type {array&lt;Vector&gt;} */ this.points = []; /** * Vertices cache. * @private * @type {array&lt;Vector&gt;} */ this.calcPoints = []; /** * Edges of the polygon. * @private * @type {array&lt;Vector&gt;} */ this.edges = []; /** * Normals of edges. * @private * @type {array&lt;Vector&gt;} */ this.normals = []; /** * Offset of the vertices to the center. * @type {Vector} */ this.offset = new Vector(); this._rotation = 0; this.setPoints(points || []); } /** * Set the points of the polygon. * @memberof Polygon# * @param {Array&lt;Vector&gt;=} points An array of vectors representing the points in the polygon, * in clockwise order * @return {Polygon} This for chaining */ Polygon.prototype.setPoints = function setPoints(points) { // Only re-allocate if this is a new polygon or the number of points has changed. var lengthChanged = !this.points || this.points.length !== points.length; if (lengthChanged) { var calcPoints = this.calcPoints = []; var edges = this.edges = []; var normals = this.normals = []; // Allocate the vector arrays for the calculated properties for (var i = 0, len = points.length; i &lt; len; i++) { calcPoints.push(new Vector()); edges.push(new Vector()); normals.push(new Vector()); } } this.points = points; this._recalc(); return this; }; /** * Set the current offset to apply to the `points` before applying the `rotation` rotation. * @param {Vector} offset The new offset vector * @return {Polygon} This for chaining */ Polygon.prototype.setOffset = function setOffset(offset) { this.offset = offset; this._recalc(); return this; }; /**Rotates this polygon counter-clockwise around the origin of *its local coordinate system* (i.e. `pos`). * Note: This changes the **original** points (so any `rotation` will be applied on top of this rotation). * @memberof Polygon# * @param {number} rotation The rotation to rotate (in radians) * @return {Polygon} This for chaining */ Polygon.prototype.rotate = function rotate(rotation) { var points = this.points; for (var i = 0, len = points.length; i &lt; len; i++) { points[i].rotate(rotation); } this._recalc(); return this; }; /** * Translates the points of this polygon by a specified amount relative to the origin of *its own coordinate * system* (i.e. `body.position`) * This is most useful to change the &quot;center point&quot; of a polygon. If you just want to move the whole polygon, change * the coordinates of `body.position`. * Note: This changes the **original** points (so any `offset` will be applied on top of this translation) * @memberof Polygon# * @param {number} x The horizontal amount to translate * @param {number} y The vertical amount to translate * @return {Polygon} This for chaining */ Polygon.prototype.translate = function translate(x, y) { var points = this.points; for (var i = 0, len = points.length; i &lt; len; i++) { points[i].x += x; points[i].y += y; } this._recalc(); return this; }; /** * Computes the calculated collision polygon. Applies the `rotation` and `offset` to the original points then recalculates the * edges and normals of the collision polygon. * @memberof Polygon# * @return {Polygon} This for chaining */ Polygon.prototype._recalc = function _recalc() { // Calculated points - this is what is used for underlying collisions and takes into account // the rotation/offset set on the polygon. var calcPoints = this.calcPoints; // The edges here are the direction of the `n`th edge of the polygon, relative to // the `n`th point. If you want to draw a given edge from the edge value, you must // first translate to the position of the starting point. var edges = this.edges; // The normals here are the direction of the normal for the `n`th edge of the polygon, relative // to the position of the `n`th point. If you want to draw an edge normal, you must first // translate to the position of the starting point. var normals = this.normals; // Copy the original points array and apply the offset/rotation var points = this.points; var offset = this.offset; var rotation = this._rotation; var len = points.length; var i; var left = Infinity, top = Infinity, right = -Infinity, bottom = -Infinity; for (i = 0; i &lt; len; i++) { var calcPoint = calcPoints[i].copy(points[i]); calcPoint.x += offset.x; calcPoint.y += offset.y; if (rotation !== 0) { calcPoint.rotate(rotation); } // Update AABB info left = Math.min(left, calcPoint.x); top = Math.min(top, calcPoint.y); right = Math.max(right, calcPoint.x); bottom = Math.max(bottom, calcPoint.y); } // Calculate the edges/normals for (i = 0; i &lt; len; i++) { var p1 = calcPoints[i]; var p2 = i &lt; len - 1 ? calcPoints[i + 1] : calcPoints[0]; var e = edges[i].copy(p2).subtract(p1); normals[i].copy(e).perp().normalize(); } // Calculate size this.width = right - left; this.height = bottom - top; return this; }; /** * Rotation of this polygon. * @memberof Polygon# * @type {number} */ Object.defineProperty(Polygon.prototype, 'rotation', { get: function() { return this._rotation; }, set: function(rotation) { this._rotation = rotation; this._recalc(); }, }); /** * Box shape for physic body. * @class Box * @constructor * @param {number} [width] * @param {number} [height] */ function Box(width, height) { /** Width of rectangle. @property {Number} width @default 50 **/ this.width = width || 50; /** * Height of rectangle. * @property {Number} height * @default 50 */ this.height = height || 50; /** * Rotation * @type {number} */ this.rotation = 0; /** * Type of this shape, should always be `BOX`. * @type {number} * @const */ this.type = BOX; } /** * Convert to a polygon. * @memberof Box# * @return {Polygon} */ Box.prototype.toPolygon = function toPolygon() { var halfWidth = this.width * 0.5; var halfHeight = this.height * 0.5; return new Polygon([ new Vector(-halfWidth, -halfHeight), new Vector(halfWidth, -halfHeight), new Vector(halfWidth, halfHeight), new Vector(-halfWidth, halfHeight) ]); }; /** * Circle shape for physic body. * * @class Circle * @constructor * @param {number} [radius] */ function Circle(radius) { /** * Radius of circle. * @property {number} radius * @default 50 */ this.radius = radius || 50; /** * Rotation. * @type {number} */ this.rotation = 0; /** * Type of this shape, should always be `CIRC`. * @type {number} * @const */ this.type = CIRC; } /** * Width of the circle shape. * @memberof Circle# * @type {number} */ Object.defineProperty(Circle.prototype, 'width', { get: function() { return this.radius * 2; }, }); /** * Height of the circle shape. * @memberof Circle# * @type {number} */ Object.defineProperty(Circle.prototype, 'height', { get: function() { return this.radius * 2; }, }); /** * Response of a collision. * An object representing the result of an intersection. Contains: * - The two objects participating in the intersection * - The vector representing the minimum change necessary to extract the first object * from the second one (as well as a unit vector in that direction and the magnitude * of the overlap) * - Whether the first object is entirely inside the second, and vice versa. */ function Response () { /** * The first object in the collision. * It will be **self body** when passed to `collide` method. * @type {Body} */ this.a = null; /** * The second object in the collision. * @type {Body} */ this.b = null; /** * Whether the first object is completely inside the second. * Self inside another one? * @type {boolean} */ this.aInB = true; /** * Whether the second object is completely inside the first * @type {boolean} */ this.bInA = true; /** * Magnitude of the overlap on the shortest colliding axis * @type {number} */ this.overlap = Number.MAX_VALUE; /** * The shortest colliding axis (unit-vector). * This vector points from **self body** to the overlapped one. * @type {Vector} */ this.overlapN = new Vector(); /** * The overlap vector (i.e. overlapN.multiply(overlap, overlap)). * If this vector is subtracted from the position of a, * a and b will no longer be colliding. * @type {Vector} */ this.overlapV = new Vector(); } /** * Set some values of the response back to their defaults. Call this between tests if * you are going to reuse a single Response object for multiple intersection tests (recommented * as it will avoid allcating extra memory) * @memberof Response# * @return {Response} This for chaining */ Response.prototype.clear = function clear() { this.aInB = true; this.bInA = true; this.overlap = Number.MAX_VALUE; return this; }; /** * Advanced SAT based collision solver. * * This solver is the best choice when you want to rotate any body or * use {@link Tilemap} collision layer. * * Fore more realistic cases, you need a REAL rigid body physics engine * like [p2.js](https://github.com/schteppe/p2.js). Those will be supported in the future(maybe). * * NOTE: SAT solver currently not support custom `anchor`, it will ignore * {@link Body#anchor} and always treat it as (0.5, 0.5). * * Set `physics.solver` to `'SAT'` to enable. * * @class SATSolver * @constructor */ function SATSolver() {} /** * Hit test a versus b. * @memberof SATSolver# * @method hitTest * @param {Body} a * @param {Body} b * @return {Boolean} return true, if bodies hit. */ SATSolver.prototype.hitTest = function hitTest(a, b, response) { // Polygon vs polygon if (a.shape.points &amp;&amp; b.shape.points) { return testPolygonPolygon(a, b, response); } if (a.shape.radius &amp;&amp; b.shape.radius) { return testCircleCircle(a, b, response); } if (a.shape.points &amp;&amp; b.shape.radius) { return testPolygonCircle(a, b, response); } else if (a.shape.radius &amp;&amp; b.shape.points) { return testCirclePolygon(a, b, response); } throw 'Hit test should not go so far!'; return false; }; /** * Apply hit respose to group of overlaping bodies. * @memberof SATSolver# * @param {Body} a * @param {Body} b * @param {boolean} AvsB * @param {boolean} BvsA * @param {Response} response */ SATSolver.prototype.hitResponse = function hitResponse(a, b, AvsB, BvsA, response) { // Make sure a and b are not reversed var uniqueA = (a === response.a ? a : b), uniqueB = (b === response.b ? b : a); var responseToA = false, responseToB = false; // Check to see which one or two finally get the response if (AvsB &amp;&amp; !BvsA) { responseToA = uniqueA.collide(uniqueB, response); } else if (!AvsB &amp;&amp; BvsA) { responseToB = uniqueB.collide(uniqueA, response); } else if (AvsB &amp;&amp; BvsA) { responseToA = uniqueA.collide(uniqueB, response); responseToB = uniqueB.collide(uniqueA, response); } // Only apply response to A if it wants to if (responseToA &amp;&amp; !responseToB) { uniqueA.position.subtract(response.overlapV); uniqueA.afterCollide(uniqueB); } // Only apply response to B if it wants to else if (!responseToA &amp;&amp; responseToB) { uniqueB.position.add(response.overlapV); uniqueB.afterCollide(uniqueA); } // Apply response to both A and B else if (responseToA &amp;&amp; responseToB) { response.overlapV.multiply(0.5); uniqueA.position.subtract(response.overlapV); uniqueB.position.add(response.overlapV); uniqueA.afterCollide(uniqueB); uniqueB.afterCollide(uniqueA); } }; // Helper Functions ------------------------------------ /** * Flattens the specified array of points onto a unit vector axis, * resulting in a one dimensional range of the minimum and * maximum value on that axis. * @private * @param {array&lt;Vector&gt;} points The points to flatten * @param {Vector} normal The unit vector axis to flatten on * @param {array&lt;Number&gt;} result An array. After calling this function, * result[0] will be the minimum value, * result[1] will be the maximum value */ function flattenPointsOn(points, normal, result) { var min = Number.MAX_VALUE; var max = -Number.MAX_VALUE; var len = points.length; for (var i = 0; i &lt; len; i++) { // The magnitude of the projection of the point onto the normal var dot = points[i].dot(normal); if (dot &lt; min) { min = dot; } if (dot &gt; max) { max = dot; } } result[0] = min; result[1] = max; } /** * Check whether two convex polygons are separated by the specified * axis (must be a unit vector). * @private * @param {Vector} aPos The position of the first polygon * @param {Vector} bPos The position of the second polygon * @param {array&lt;Vector&gt;} aPoints The points in the first polygon * @param {array&lt;Vector&gt;} bPoints The points in the second polygon * @param {Vector} axis The axis (unit sized) to test against. The points of both polygons * will be projected onto this axis * @param {Response=} response A Response object (optional) which will be populated * if the axis is not a separating axis * @return {boolean} true if it is a separating axis, false otherwise. If false, * and a response is passed in, information about how much overlap and * the direction of the overlap will be populated */ function isSeparatingAxis(aPos, bPos, aPoints, bPoints, axis, response) { var rangeA = T_ARRAYS.pop(); var rangeB = T_ARRAYS.pop(); // The magnitude of the offset between the two polygons var offsetV = T_VECTORS.pop().copy(bPos).subtract(aPos); var projectedOffset = offsetV.dot(axis); // Project the polygons onto the axis. flattenPointsOn(aPoints, axis, rangeA); flattenPointsOn(bPoints, axis, rangeB); // Move B's range to its position relative to A. rangeB[0] += projectedOffset; rangeB[1] += projectedOffset; // Check if there is a gap. If there is, this is a separating axis and we can stop if (rangeA[0] &gt; rangeB[1] || rangeB[0] &gt; rangeA[1]) { T_VECTORS.push(offsetV); T_ARRAYS.push(rangeA); T_ARRAYS.push(rangeB); return true; } // This is not a separating axis. If we're calculating a response, calculate the overlap. if (response) { var overlap = 0; // A starts further left than B if (rangeA[0] &lt; rangeB[0]) { response.aInB = false; // A ends before B does. We have to pull A out of B if (rangeA[1] &lt; rangeB[1]) { overlap = rangeA[1] - rangeB[0]; response.bInA = false; // B is fully inside A. Pick the shortest way out. } else { var option1 = rangeA[1] - rangeB[0]; var option2 = rangeB[1] - rangeA[0]; overlap = option1 &lt; option2 ? option1 : -option2; } // B starts further left than A } else { response.bInA = false; // B ends before A ends. We have to push A out of B if (rangeA[1] &gt; rangeB[1]) { overlap = rangeA[0] - rangeB[1]; response.aInB = false; // A is fully inside B. Pick the shortest way out. } else { var option1 = rangeA[1] - rangeB[0]; var option2 = rangeB[1] - rangeA[0]; overlap = option1 &lt; option2 ? option1 : -option2; } } // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap. var absOverlap = Math.abs(overlap); if (absOverlap &lt; response.overlap) { response.overlap = absOverlap; response.overlapN.copy(axis); if (overlap &lt; 0) { response.overlapN.reverse(); } } } T_VECTORS.push(offsetV); T_ARRAYS.push(rangeA); T_ARRAYS.push(rangeB); return false; } /** * Calculates which Vornoi region a point is on a line segment. * It is assumed that both the line and the point are relative to `(0,0)` * | (0) | * (-1) [S]--------------[E] (1) * | (0) | * * @private * @param {Vector} line The line segment * @param {Vector} point The point * @return {number} LEFT_VORNOI_REGION (-1) if it is the left region, * MIDDLE_VORNOI_REGION (0) if it is the middle region, * RIGHT_VORNOI_REGION (1) if it is the right region */ function vornoiRegion(line, point) { var len2 = line.squaredLength(); var dp = point.dot(line); // If the point is beyond the start of the line, it is in the // left vornoi region. if (dp &lt; 0) { return LEFT_VORNOI_REGION; } // If the point is beyond the end of the line, it is in the // right vornoi region. else if (dp &gt; len2) { return RIGHT_VORNOI_REGION; } // Otherwise, it's in the middle one. else { return MIDDLE_VORNOI_REGION; } } // Constants for Vornoi regions var LEFT_VORNOI_REGION = -1; var MIDDLE_VORNOI_REGION = 0; var RIGHT_VORNOI_REGION = 1; // Collision Tests --------------------------------------- /** * Check if two circles collide. * @private * @param {Body} a The first circle body * @param {Body} b The second circle body * @param {Response=} response Response object (optional) that will be populated if * the circles intersect * @return {boolean} true if the circles intersect, false if they don't */ function testCircleCircle(a, b, response) { // Check if the distance between the centers of the two // circles is greater than their combined radius. var differenceV = T_VECTORS.pop().copy(b.position).subtract(a.position); var totalRadius = a.shape.radius + b.shape.radius; var totalRadiusSq = totalRadius * totalRadius; var distanceSq = differenceV.squaredLength(); // If the distance is bigger than the combined radius, they don't intersect. if (distanceSq &gt; totalRadiusSq) { T_VECTORS.push(differenceV); return false; } // They intersect. If we're calculating a response, calculate the overlap. if (response) { var dist = Math.sqrt(distanceSq); response.a = a; response.b = b; response.overlap = totalRadius - dist; response.overlapN.copy(differenceV.normalize()); response.overlapV.copy(differenceV).multiply(response.overlap); response.aInB = a.shape.radius &lt;= b.shape.radius &amp;&amp; dist &lt;= b.shape.radius - a.shape.radius; response.bInA = b.shape.radius &lt;= a.shape.radius &amp;&amp; dist &lt;= a.shape.radius - b.shape.radius; } T_VECTORS.push(differenceV); return true; } /** * Check if a polygon and a circle collide. * @private * @param {Polygon} polygon The polygon * @param {Circle} circle The circle * @param {Response=} response Response object (optional) that will be populated if * they interset * @return {boolean} true if they intersect, false if they don't */ function testPolygonCircle(polygon, circle, response) { // Get the position of the circle relative to the polygon. var circlePos = T_VECTORS.pop().copy(circle.position).subtract(polygon.position); var radius = circle.shape.radius; var radius2 = radius * radius; var points = polygon.shape.calcPoints; var len = points.length; var edge = T_VECTORS.pop(); var point = T_VECTORS.pop(); // For each edge in the polygon: for (var i = 0; i &lt; len; i++) { var next = i === len - 1 ? 0 : i + 1; var prev = i === 0 ? len - 1 : i - 1; var overlap = 0; var overlapN = null; // Get the edge. edge.copy(polygon.shape.edges[i]); // Calculate the center of the circle relative to the starting point of the edge. point.copy(circlePos).subtract(points[i]); // If the distance between the center of the circle and the point // is bigger than the radius, the polygon is definitely not fully in // the circle. if (response &amp;&amp; point.squaredLength() &gt; radius2) { response.aInB = false; } // Calculate which Vornoi region the center of the circle is in. var region = vornoiRegion(edge, point); // If it's the left region: if (region === LEFT_VORNOI_REGION) { // We need to make sure we're in the RIGHT_VORNOI_REGION of the previous edge. edge.copy(polygon.shape.edges[prev]); // Calculate the center of the circle relative the starting point of the previous edge var point2 = T_VECTORS.pop().copy(circlePos).subtract(points[prev]); region = vornoiRegion(edge, point2); if (region === RIGHT_VORNOI_REGION) { // It's in the region we want. Check if the circle intersects the point. var dist = point.length(); if (dist &gt; radius) { // No intersection T_VECTORS.push(circlePos); T_VECTORS.push(edge); T_VECTORS.push(point); T_VECTORS.push(point2); return false; } else if (response) { // It intersects, calculate the overlap. response.bInA = false; overlapN = point.normalize(); overlap = radius - dist; } } T_VECTORS.push(point2); } // If it's the right region: else if (region === RIGHT_VORNOI_REGION) { // We need to make sure we're in the left region on the next edge edge.copy(polygon.shape.edges[next]); // Calculate the center of the circle relative to the starting point of the next edge. point.copy(circlePos).subtract(points[next]); region = vornoiRegion(edge, point); if (region === LEFT_VORNOI_REGION) { // It's in the region we want. Check if the circle intersects the point. var dist = point.length(); if (dist &gt; radius) { // No intersection T_VECTORS.push(circlePos); T_VECTORS.push(edge); T_VECTORS.push(point); return false; } else if (response) { // It intersects, calculate the overlap. response.bInA = false; overlapN = point.normalize(); overlap = radius - dist; } } } // Otherwise, it's the middle region: else { // Need to check if the circle is intersecting the edge, // Change the edge into its &quot;edge normal&quot;. var normal = edge.perp().normalize(); // Find the perpendicular distance between the center of the // circle and the edge. var dist = point.dot(normal); var distAbs = Math.abs(dist); // If the circle is on the outside of the edge, there is no intersection. if (dist &gt; 0 &amp;&amp; distAbs &gt; radius) { // No intersection T_VECTORS.push(circlePos); T_VECTORS.push(normal); T_VECTORS.push(point); return false; } else if (response) { // It intersects, calculate the overlap. overlapN = normal; overlap = radius - dist; // If the center of the circle is on the outside of the edge, or part of the // circle is on the outside, the circle is not fully inside the polygon. if (dist &gt;= 0 || overlap &lt; 2 * radius) { response.bInA = false; } } } // If this is the smallest overlap we've seen, keep it. // (overlapN may be null if the circle was in the wrong Vornoi region). if (overlapN &amp;&amp; response &amp;&amp; Math.abs(overlap) &lt; Math.abs(response.overlap)) { response.overlap = overlap; response.overlapN.copy(overlapN); } } // Calculate the final overlap vector - based on the smallest overlap. if (response) { response.a = polygon; response.b = circle; response.overlapV.copy(response.overlapN).multiply(response.overlap); } T_VECTORS.push(circlePos); T_VECTORS.push(edge); T_VECTORS.push(point); return true; } /** * Check if a circle and a polygon collide. * * **NOTE:** This is slightly less efficient than polygonCircle as it just * runs polygonCircle and reverses everything at the end. * * @private * * @param {Circle} circle The circle * @param {Polygon} polygon The polygon * @param {Response=} response Response object (optional) that will be populated if * they interset * @return {boolean} true if they intersect, false if they don't */ function testCirclePolygon(circle, polygon, response) { // Test the polygon against the circle. var result = testPolygonCircle(polygon, circle, response); if (result &amp;&amp; response) { // Swap A and B in the response. var a = response.a; var aInB = response.aInB; response.overlapN.reverse(); response.overlapV.reverse(); response.a = response.b; response.b = a; response.aInB = response.bInA; response.bInA = aInB; } return result; } /** * Checks whether polygons collide. * @private * @param {Polygon} a The first polygon * @param {Polygon} b The second polygon * @param {Response=} response Response object (optional) that will be populated if * they interset * @return {boolean} true if they intersect, false if they don't */ function testPolygonPolygon(a, b, response) { var aPoints = a.shape.calcPoints; var aLen = aPoints.length; var bPoints = b.shape.calcPoints; var bLen = bPoints.length; // If any of the edge normals of A is a separating axis, no intersection. for (var i = 0; i &lt; aLen; i++) { if (isSeparatingAxis(a.position, b.position, aPoints, bPoints, a.shape.normals[i], response)) { return false; } } // If any of the edge normals of B is a separating axis, no intersection. for (var i = 0;i &lt; bLen; i++) { if (isSeparatingAxis(a.position, b.position, aPoints, bPoints, b.shape.normals[i], response)) { return false; } } // Since none of the edge normals of A or B are a separating axis, there is an intersection // and we've already calculated the smallest overlap (in isSeparatingAxis). Calculate the // final overlap vector. if (response) { response.a = a; response.b = b; response.overlapV.copy(response.overlapN).multiply(response.overlap); } return true; } // Object Pools ----------------------------------------- /** * A pool of `Vector` objects that are used in calculations to avoid * allocating memory. * @type {array&lt;Vector&gt;} * @private */ var T_VECTORS = []; for (var i = 0; i &lt; 10; i++) { T_VECTORS.push(new Vector()); } /** * A pool of arrays of numbers used in calculations to avoid allocating * memory. * @type {array&lt;array&lt;number&gt;&gt;} * @private */ var T_ARRAYS = []; for (var i = 0; i &lt; 5; i++) { T_ARRAYS.push([]); } /** * Temporary response used for polygon hit detection. * @type {Response} * @private */ var T_RESPONSE = new Response(); /** * Unit square polygon used for polygon hit detection. * @type {Polygon} * @private */ var UNIT_SQUARE = new Body({ position: new Vector(), shape: new Box(1, 1).toPolygon(), }); Scene.registerSystem('Physics', { init: function init(scene) { scene.world = new World(); }, preUpdate: function preUpdate(scene, _, delta) { scene.world.preUpdate(delta); }, update: function update(scene, _, delta) { scene.world.update(delta); }, postUpdate: function postUpdate(scene) { scene.world.collisionChecks = 0; }, }); // Collision group helpers function getGroupMask(idx) { if (idx &lt; 31) { return 1 &lt;&lt; idx; } else { console.log('Warning: only 0-30 indexed collisionGroups are supported!'); return 0; } } module.exports = { getGroupMask: getGroupMask, World: World, Body: Body, Box: Box, Polygon: Polygon, Circle: Circle, /** * UP direction(used as parameter of `collide` method, in Simple solver mode) * @type {number} * @const */ UP: UP, /** * DOWN direction(used as parameter of `collide` method, in Simple solver mode) * @type {number} * @const */ DOWN: DOWN, /** * LEFT direction(used as parameter of `collide` method, in Simple solver mode) * @type {number} * @const */ LEFT: LEFT, /** * RIGHT direction(used as parameter of `collide` method, in Simple solver mode) * @type {number} * @const */ RIGHT: RIGHT, /** * OVERLAP(used as parameter of `collide` method, in Simple solver mode) * @type {number} * @const */ OVERLAP: OVERLAP, }; × Search results Close Made with ♥ by Sean Bohan "},"animation_action.js.html":{"id":"animation_action.js.html","title":"Source: animation/action.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: animation/action.js /** * Action module provides functionalities to create Flash/Blender like * key based animation. * * @module engine/animation/action * * @requires engine/scene * @requires engine/eventemitter3 * @requires engine/animation/utils * @requires engine/animation/easing */ var Scene = require('engine/scene'); var EventEmitter = require('engine/eventemitter3'); var animUtils = require('./utils'); var getTargetAndKey = animUtils.getTargetAndKey; var easing = require('./easing'); var Easing = easing.Easing; var Interpolation = easing.Interpolation; /** * Type of channels * @enum {number} */ var CHANNEL_TYPE = { VALUE: 0, EVENT: 1, }; /** * A single key of an action. * @class Key * @constructor * @param {number} time At which time. * @param {*} value Value for this key. * @param {function} easing Easing function. */ function Key(time, value, easing) { /** * Time of this key * @type {number} */ this.time = time; /** * Value of this key. * @type {*} */ this.value = value; var easingFn = easing || Easing.Linear.None; if (typeof(easing) === 'string') { easing = easing.split('.'); easingFn = Easing[easing[0]][easing[1]]; } /** * Easing of this key. * @type {function} */ this.easing = easingFn; } /** * Channel represents a specific path of variable. Say we have an * action that modifies `position` and two channels will be created * for that as `position.x` and `position.y`. * @class Channel * @constructor * @param {string} path Path of the target variable. * @param {Action} owner Which action this channel is in. * @param {CHANNEL_TYPE} type Type of this channel. */ function Channel(path, owner, type) { /** * Which action is this channel belongs to * @type {module:engine/animation/action~Action} */ this.owner = owner; /** * Full path to the property * @type {string} */ this.path = path; var theType = type || CHANNEL_TYPE.VALUE; if (typeof(type) === 'string') { theType = CHANNEL_TYPE[type.toUpperCase()]; } /** * Type of this channel, valid types are: * - VALUE * - EVENT * @type {string|number} */ this.type = theType; /** * Key list. * @type {array&lt;module:engine/animation/action~Key&gt;} */ this.keys = []; /** * Time between the first and last key. * @type {number} */ this.duration = 0; } /** * Insert a new key. * @memberof Channel# * @method insert * @param {module:engine/animation/action~Key} key Key to insert. */ Channel.prototype.insert = function insert(key) { this.keys.push(key); // Sort keys based on their times var i, tmpKey; for (i = this.keys.length - 1; i &gt; 0; i--) { if (this.keys[i].time &lt; this.keys[i - 1].time) { tmpKey = this.keys[i - 1]; this.keys[i - 1] = this.keys[i]; this.keys[i] = tmpKey; } else { break; } } // Update duration this.duration = this.keys[this.keys.length - 1].time; // Update duration of owner Action this.owner.duration = Math.max(this.owner.duration, this.duration); }; /** * Find the key at a specific time. * @param {number} time Time to seek for. * @return {module:engine/animation/action~Key} Will return undefined if no one can be found. */ Channel.prototype.findKey = function(time) { // Empty channel if (this.keys.length === 0) { return undefined; } // Return the last key if time is // larger than channel duration if (time &gt; this.duration) { return this.keys[this.keys.length - 1]; } // Find the key and return var i, key = this.keys[0]; for (i = 0; i &lt; this.keys.length - 1; i++) { key = this.keys[i]; if (this.keys[i + 1].time &gt; time) { return key; } } // Return the last key return key; }; /** * Action is a data structure that represents an independent * animation clip. * * `Action.create()` is prefered to create a new Action. * * @class Action * @constructor * @param {number} id */ function Action(id) { /** * ID of this action * @type {number} */ this.id = id; /** * Duration of this action (time between first and last key). * @type {number} */ this.duration = 0; /** * Channel list. * @type {array&lt;module:engine/animation/action~Channel&gt;} */ this.channels = []; /** * &lt;Path, Channel&gt; map * @type {object} */ this.channelMap = {}; // Internal caches this._latestChannel = null; } /** * Insert a new channel. * @memberof Action# * @method channel * @see Channel * @param {string} path Path of the channel. * @param {CHANNEL_TYPE} type Type of this channel. * @return {module:engine/animation/action~Action} Self for chaining. */ Action.prototype.channel = function(path, type) { var channel = new Channel(path, this, type); this.channels.push(channel); this.channelMap[path] = channel; this._latestChannel = channel; return this; }; /** * Insert a new key to the last inserted channel. * @memberof Action# * @method key * @param {number} time Time of the key. * @param {*} value Value of the key. * @param {function} easing Easing function. * @return {module:engine/animation/action~Action} Self for chaining */ Action.prototype.key = function(time, value, easing) { if (!this._latestChannel) { console.log('[Warning]: can not insert key without a channel!'); return this; } this._latestChannel.insert(new Key(time, value, easing)); return this; }; /** * Find a channel by path. * @memberof Action# * @method findChannel * @param {string} path * @return {module:engine/animation/action~Channel} */ Action.prototype.findChannel = function(path) { return this.channelMap[path]; }; var ActionUID = 0; /** * Create a new action. * @return {module:engine/animation/action~Action} */ Action.create = function create() { return new Action(ActionUID++); }; /** * Action player controls and plays an action defination. * * Usually you only need to run an action using {@link Scene#runAction}. * * @class ActionPlayer * @constructor * @param {module:engine/animation/action~Action} action Action to play. * @param {object} target Target object this action is apply to. */ function ActionPlayer(action, target) { EventEmitter.call(this); this.action = action; this.context = target; this.channelCache = []; /** * Play speed (-1: reverse, 0: stop, 1: forward) * @type {number} * @default 1 */ this.speed = 1; /** * Current time * @type {number} * @default 0 */ this.time = 0; /** * Whether this action is finished * @type {boolean} * @default false */ this.finished = false; /** * Loop the action or not * @type {boolean} * @default false */ this.looped = true; var channel, props = [], channels = this.action.channels; for (var i = 0; i &lt; channels.length; i++) { // Channel: [propContext, propKey] channel = getTargetAndKey(this.context, channels[i].path); // Channel: [propContext, propKey, keys[], currKeyIdx] channel.push(channels[i].keys, 0); this.channelCache.push(channel); } } ActionPlayer.prototype = Object.create(EventEmitter.prototype); ActionPlayer.prototype.constructor = ActionPlayer; ActionPlayer.prototype._step = function _step(delta) { var c, channel; var keys, keyIdx, key, nextKey; var length, progress, mod, change; // Update time this.time += delta * this.speed; // Forward if (this.speed &gt; 0) { // Reached the last frame? if (this.time &gt;= this.action.duration) { if (this.looped) { this.time = this.time % this.action.duration; // Reset channels to their first keys for (c = 0; c &lt; this.channelCache.length; c++) { channel = this.channelCache[c]; channel[3] = 0; } this.emit('loop', this); } else { this.time = this.action.duration; this.finished = true; this.emit('finish', this); return; } } // Update animated channels for (c = 0; c &lt; this.channelCache.length; c++) { channel = this.channelCache[c]; // Already passed the last key? if (this.time &gt; channel.duration) continue; keys = channel[2]; keyIdx = channel[3]; // Reached next key? if (keyIdx &lt; channel[2].length - 2 &amp;&amp; this.time &gt;= channel[2][keyIdx + 1].time) { keyIdx += 1; channel[3] = keyIdx; } // Calculate progress of current key key = keys[keyIdx]; nextKey = keys[keyIdx + 1]; length = nextKey.time - key.time; change = nextKey.value - key.value; progress = (this.time - key.time) / length; mod = key.easing(progress); // Update action target channel[0][channel[1]] = key.value + change * mod; // TODO: event keys } } // Backward else if (this.speed &lt; 0) { // Reached the first frame? if (this.time &lt; 0) { if (this.looped) { this.time += this.action.duration; // Reset channels to their last keys for (c = 0; c &lt; this.channelCache.length; c++) { channel = this.channelCache[c]; channel[3] = Math.max(channel[2].length - 2, 0); } this.emit('loop', this); } else { this.time = 0; this.finished = true; this.emit('finish', this); return; } } // Update animated channels for (c = 0; c &lt; this.channelCache.length; c++) { channel = this.channelCache[c]; keys = channel[2]; keyIdx = channel[3]; // Reached previous key? if (keyIdx &gt; 0 &amp;&amp; this.time &lt; channel[2][keyIdx].time) { keyIdx -= 1; channel[3] = keyIdx; } // Calculate progress of current key key = keys[keyIdx]; nextKey = keys[keyIdx + 1]; length = nextKey.time - key.time; change = nextKey.value - key.value; progress = (this.time - key.time) / length; mod = key.easing(progress); // Update action target channel[0][channel[1]] = key.value + change * mod; // TODO: event keys } } }; /** * Go to a specific time * @memberof ActionPlayer# * @method goto * @param {number} time */ ActionPlayer.prototype.goto = function goto(time) {}; /** * Create a player for actor * @param {module:engine/animation/action~Action} action * @param {object} target * @return {module:engine/animation/action~ActionPlayer} */ ActionPlayer.create = function create(action, target) { return new ActionPlayer(action, target); }; // Inject action factory method Object.assign(Scene.prototype, { /** * Run an action on a target object * @memberof Scene# * @method runAction * @param {module:engine/animation/action~Action} action Action to run * @param {object} target Target object * @param {string} tag Tag of this action player (default is '0') * @return {module:engine/animation/action~ActionPlayer} An ActionPlayer instance that runs the specific Action */ runAction: function runAction(action, target, tag) { var t = tag || '0'; if (!this.animationSystem.anims[t]) { // Create a new tween list this.animationSystem.anims[t] = []; // Active new tag by default this.animationSystem.activeTags.push(t); } var player = ActionPlayer.create(action, target); this.animationSystem.anims[t].push(player); return player; }, }); module.exports = { CHANNEL_TYPE: CHANNEL_TYPE, Key: Key, Channel: Channel, Action: Action, ActionPlayer: ActionPlayer, }; × Search results Close Made with ♥ by Sean Bohan "},"actor.js.html":{"id":"actor.js.html","title":"Source: actor.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: actor.js var EventEmitter = require('engine/eventemitter3'); var Vector = require('engine/vector'); var PIXI = require('engine/pixi'); var physics = require('engine/physics'); var Behavior = require('engine/behavior'); var DEFAULT_POLYGON_VERTICES = [ Vector.create(-4, -4), Vector.create( 4, -4), Vector.create( 4, 4), Vector.create(-4, 4), ]; /** * Base object that may contain a PIXI.Container instance(as `sprite`) * and a physics.Body instance(as `body`). * * The `sprite` and `body` share the same postion and rotation, * designed to be easy to use. * * You can both inherit and use chained method calls to create * a custom {@link Actor}. * * @example &lt;caption&gt;Custom Actor by inherit&lt;/caption&gt; * class MyActor extends Actor { * construct() { * super(); * * // Initialize 'sprite' as a Graphics instance * this.initGraphics({ shape: 'Box', width: 10, height: 10, color: 0xffffff }) * // Initialize physics 'body', and it will automatically setup itself * // based on the 'sprite'. * .initBody(); * } * } * * @example &lt;caption&gt;Custom Actor by chaining&lt;/caption&gt; * // Spawn an Actor instance * scene.spawnActor(Actor, 0, 0, 'stage') * // Init the 'sprite' as a PIXI.Container instance * .initEmpty() * // Add a graphics to 'sprite', save ref to it as 'sprBody' * .addGraphics({ shape: 'Circle', width: 10, height: 10, color: 0xffffff }, 'sprite', 'sprBody') * // Add a sprite to 'sprite', save ref to it as 'sprArm' * .addSprite(my_texture, 'sprite', 'sprArm'); * * @class Actor * @extends {EventEmitter} * * @constructor * @param {string} name Name of this actor */ function Actor(name) { EventEmitter.call(this); /** * @type {number} */ this.id = Actor.uid++; /** * Name of this Actor, can be undefined * @type {string} */ this.name = name; /** * Tag for updating * @type {string} */ this.tag = null; /** * Whether this actor is removed from scene * @type {boolean} * @private */ this.removed = false; /** * Want this actor to be updated? * @type {boolean} * @default false */ this.canEverTick = false; /** * Component for visual display, can be any sub-classes of `PIXI.Cotnainer` or null * @type {PIXI.Container} * @default null */ this.sprite = null; /** * Component for physics simulation and collision detection or null. * @type {module:engine/physics.Body} * @default null */ this.body = null; /** * Position * @type {Vector} * @default (0, 0) */ this.position = Vector.create(); /** * Reference to the scene that actor is added to * @type {Scene} * @default null */ this.scene = null; /** * Reference to the container that `sprite` is added to * @type {PIXI.Container} * @default null */ this.layer = null; /** * Behavior list * @type {array} */ this.behaviorList = []; /** * Type-behavior map * @type {object} */ this.behaviors = {}; /** * Rotation cache * @type {number} * @private */ this._rotation = 0; } Actor.prototype = Object.create(EventEmitter.prototype); Actor.prototype.constructor = Actor; Actor.uid = 0; /** * Rotation * @member {number} * @memberof Actor# */ Object.defineProperty(Actor.prototype, 'rotation', { get: function() { return this._rotation; }, set: function(val) { this._rotation = val; if (this.sprite) { this.sprite.rotation = this._rotation; } if (this.body) { this.body.rotation = this._rotation; } }, }); /** * Add to the scene and a container * @method addTo * @memberof Actor# * @param {Scene} scene * @param {PIXI.Container} layer * @return {Actor} Actor itself for chaining */ Actor.prototype.addTo = function addTo(scene, layer) { this.scene = scene; this.layer = layer; if (this.sprite) { this.layer.addChild(this.sprite); } if (this.body) { this.scene.world.addBody(this.body); } this.prepare(); return this; }; /** * Will be called by `addTo` method after the Actor components are * properly added. * @method prepare * @memberof Actor# */ Actor.prototype.prepare = function prepare() {}; /** * Update method to be called each frame * Nothing inside, no need to call `super.update` * @method update * @memberof Actor# * @protected */ Actor.prototype.update = function update(dtMS, dtSec) {}; /** * Remove from current scene and layer container * @method remove * @memberof Actor# */ Actor.prototype.remove = function remove() { this.removed = true; if (this.sprite) { this.sprite.remove(); } if (this.body) { this.body.remove(); } this.scene = null; this.layer = null; }; // Component factory methods /** * Initialize `sprite` as an empty visual node(PIXI.Container). * @method initEmpty * @memberof Actor# * @return {Actor} self for chaining */ Actor.prototype.initEmpty = function initEmpty() { this.addEmpty(null, 'sprite'); this.sprite.position = this.position; if (this.layer) { this.layer.addChild(this.sprite); } return this; }; /** * Add an empty visual node instance(PIXI.Container). * @method addEmpty * @memberof Actor# * @param {string} [parentNode] Which visual node to add to, default is 'sprite'. * @param {string} [key] Which key to assign to. (make it a property of this Actor) * @return {Actor} Self for chaining */ Actor.prototype.addEmpty = function addEmpty(parentNode, key) { // Create instance var inst = new PIXI.Container(); // Add the instance to the parent if (parentNode &amp;&amp; this[parentNode] &amp;&amp; (parentNode !== key)) { this[parentNode].addChild(inst); } // Assign as a property if required if (key) { this[key] = inst; } return this; }; /** * Initialize `sprite` as Sprite. * @method initSprite * @memberof Actor# * @param {PIXI.Texture} texture * @return {Actor} self for chaining */ Actor.prototype.initSprite = function initSprite(texture) { this.addSprite(texture, null, 'sprite'); this.sprite.position = this.position; if (this.layer) { this.layer.addChild(this.sprite); } return this; }; /** * Add a sprite instance. * @method addSprite * @memberof Actor# * @param {PIXI.Texture} texture * @param {string} [parentNode] Which visual node to add to, default is 'sprite'. * @param {string} [key] Which key to assign to. (make it a property of this Actor) * @return {Actor} Self for chaining */ Actor.prototype.addSprite = function addSprite(texture, parentNode, key) { // Create instance var inst = new PIXI.Sprite(texture); inst.anchor.set(0.5); // Add the instance to the parent if (parentNode &amp;&amp; this[parentNode] &amp;&amp; (parentNode !== key)) { this[parentNode].addChild(inst); } // Assign as a property if required if (key) { this[key] = inst; } return this; }; /** * Initialize `sprite` as Graphics. * @method initGraphics * @memberof Actor# * @param {object} [settings] See {@link Actor#initGraphics} for details. * @param {string} [parentNode] Which visual node to add to, default is 'sprite'. * @param {string} [key] Which key to assign to. (make it a property of this Actor) * @return {Actor} Self for chaining * @return {Actor} self for chaining */ Actor.prototype.initGraphics = function initGraphics(settings, parentNode, key) { this.addGraphics(settings, null, 'sprite'); this.sprite.position = this.position; if (this.layer) { this.layer.addChild(this.sprite); } return this; }; /** * Add a graphics instance. * @method addGraphics * @memberof Actor# * @param {object} [settings] * @param [settings.shape] {string} default 'Box' * @param [settings.width] {number} default 8, for 'Box' shapes * @param [settings.height] {number} default 8, for 'Box' shapes * @param [settings.radius] {number} default 8, for 'Circle' shapes * @param [settings.points] {array&lt;engine/vector&gt;} vertices for 'Polygon' shapes * @param {string} [parentNode] Which visual node to add to, default is 'sprite'. * @param {string} [key] Which key to assign to. (make it a property of this Actor) * @return {Actor} Self for chaining */ Actor.prototype.addGraphics = function addGraphics(settings, parentNode, key) { // Create instance var settings_ = settings || {}; var inst = new PIXI.Graphics(); inst.beginFill(settings_.color || 0x000000); var shape = settings_.shape || 'Box'; if (shape === 'Circle') { inst.drawCircle(0, 0, settings_.radius || 8); } else if (shape === 'Box') { var w = settings_.width || 8; var h = settings_.height || 8; inst.drawRect(-w * 0.5, -h * 0.5, w, h); } else if (shape === 'Polygon') { var points = settings_.points || DEFAULT_POLYGON_VERTICES; inst.moveTo(points[0].x, points[0].y); for (var i = 1; i &lt; points.length; i++) { inst.lineTo(points[i].x, points[i].y); } } inst.endFill(); // Add the instance to the parent if (parentNode &amp;&amp; this[parentNode] &amp;&amp; (parentNode !== key)) { this[parentNode].addChild(inst); } // Assign as a property if required if (key) { this[key] = inst; } return this; }; /** * Initialize `sprite` as AnimatedSprite * @method initAnimatedSprite * @memberof Actor# * @param settings {object} * @param settings.textures {array&lt;PIXI.Texture&gt;} * @param settings.anims {array&lt;{ name, frames, settings }&gt;} * @return {Actor} self for chaining */ Actor.prototype.initAnimatedSprite = function initAnimatedSprite(settings_) { this.addAnimatedSprite(settings, null, 'sprite'); this.sprite.position = this.position; if (this.layer) { this.layer.addChild(this.sprite); } return this; }; /** * Add an animated sprite instance. * @method addAnimatedSprite * @memberof Actor# * @param settings {object} * @param {string} [parentNode] Which visual node to add to, default is 'sprite'. * @param {string} [key] Which key to assign to. (make it a property of this Actor) * @return {Actor} Self for chaining */ Actor.prototype.addAnimatedSprite = function addAnimatedSprite(settings, parentNode, key) { // Create instance var settings_ = settings || {}; var inst = new PIXI.extras.AnimatedSprite(settings_.textures); inst.anchor.set(0.5); var anims = settings_.anims; if (Array.isArray(anims)) { for (var i = 0; i &lt; anims.length; i++) { this.sprite.addAnim(anims[i].name, anims[i].frames, anims[i].settings); } } // Add the instance to the parent if (parentNode &amp;&amp; this[parentNode] &amp;&amp; (parentNode !== key)) { this[parentNode].addChild(inst); } // Assign as a property if required if (key) { this[key] = inst; } return this; }; /** * Initialize `body` * @method initBody * @memberof Actor# * @param {object} settings * @param [settings.shape] {string} default 'Box' * @param [settings.width] {number} default 8, for 'Box' shapes * @param [settings.height] {number} default 8, for 'Box' shapes * @param [settings.radius] {number} default 8, for 'Circle' shapes * @param [settings.points] {array&lt;engine/vector&gt;} vertices for 'Polygon' shapes * @return {Actor} self for chaining */ Actor.prototype.initBody = function initBody(settings_) { var settings = settings_ || {}; // Create shape var shapeInst, shape = settings.shape || 'Box'; if (shape === 'Circle') { var r = settings.radius; if (!Number.isFinite(r)) { if (this.sprite) { r = this.sprite.width / 2; } } shape = new physics.Circle(r); } else if (shape === 'Box') { var w = settings.width, h = settings.height; if (!Number.isFinite(w)) { if (this.sprite) { w = this.sprite.width; h = this.sprite.height; } else { w = h = 8; } } else { if (!Number.isFinite(h)) { h = w; } } shape = new physics.Box(w, h); } else if (shape === 'Polygon') { shape = new physics.Polygon(settings.points || DEFAULT_POLYGON_VERTICES); } // Cleanup settings var bodySettings = Object.assign({}, settings); delete bodySettings.shape; delete bodySettings.radius; delete bodySettings.width; delete bodySettings.height; delete bodySettings.points; bodySettings.shape = shape; // Create body this.body = new physics.Body(bodySettings); this.body.position = this.position; this.body.parent = this; if (this.scene) { this.scene.world.addBody(this.body); } return this; }; /** * Add a behavior to this Actor. * Note: the same behavior can only be added ONCE. * @method behave * @memberof Actor# * @param {string|Behavior|object} behavior Behavior type or constructor or instance * @param {object} settings Settings for this behavior * @return {Actor} Self for chaining */ Actor.prototype.behave = function behave(behv, settings) { var behavior = behv; if (typeof(behv) === 'string') { behavior = Behavior.behaviors[behv]; } // Create instance if the behavior is a function(constructor) if (typeof(behavior) === 'function') { behavior = new behavior(); } if (this.behaviors[behavior.type]) { console.log('An instance of behavior &quot;' + behavior.type + '&quot; is already added!'); return this; } this.behaviorList.push(behavior); this.behaviors[behavior.type] = behavior; // Setup behavior.addTo(this); behavior.setup(settings || {}); return this; }; /** * Get a behavior instance by its type * @method getBehaviorByType * @memberof Actor# * @param {string} type Type of the behavior to be activated * @return {Behavior} Behavior of the type, return undefined no one exists. */ Actor.prototype.getBehaviorByType = function getBehaviorByType(type) { return this.behaviors[type]; }; /** * Activate a behavior by its type * @method activateBehavior * @memberof Actor# * @param {string} type Type of the behavior to be activated * @return {Actor} Self for chaining */ Actor.prototype.activateBehavior = function activateBehavior(type) { var behv = this.behaviors[type]; if (behv) { behv.activate(); } return this; }; /** * De-activate a behavior by its type * @method deactivateBehavior * @memberof Actor# * @param {string} type Type of the behavior to be de-activated * @return {Actor} Self for chaining */ Actor.prototype.deactivateBehavior = function deactivateBehavior(type) { var behv = this.behaviors[type]; if (behv) { behv.deactivate(); } return this; }; /** * Update behaviorList, automatically called by Actor sub-system * @method updateBehaviors * @memberof Actor# * @private * @param {number} dtMS Delta time in milli-seconds * @param {number} dtSec Delta time in seconds */ Actor.prototype.updateBehaviors = function updateBehaviors(dtMS, dtSec) { var i, behv; for (i = 0; i &lt; this.behaviorList.length; i++) { behv = this.behaviorList[i]; behv.update &amp;&amp; behv.update(dtMS, dtSec); } }; /** * Actor is the core object of Lesser Panda, which provides lots of * benefits such as Behavior support, config based initialise. * * @exports engine/actor * @see Actor * * @requires module:engine/eventemitter3 * @requires module:engine/vector * @requires module:engine/pixi * @requires module:engine/physics * @requires module:engine/behavior */ module.exports = Actor; × Search results Close Made with ♥ by Sean Bohan "},"eventemitter3.js.html":{"id":"eventemitter3.js.html","title":"Source: eventemitter3.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: eventemitter3.js // // We store our EE objects in a plain object whose properties are event names. // If `Object.create(null)` is not supported we prefix the event names with a // `~` to make sure that the built-in object properties are not overridden or // used as an attack vector. // We also assume that `Object.create(null)` is available when the event name // is an ES6 Symbol. // var prefix = typeof Object.create !== 'function' ? '~' : false; /** * Representation of a single EventEmitter function. * * @param {function} fn Event handler to be called. * @param {Mixed} context Context for function execution. * @param {boolean} once Only emit once * @private */ function EE(fn, context, once) { this.fn = fn; this.context = context; this.once = once || false; } /** * Minimal EventEmitter interface that is molded against the Node.js * EventEmitter interface. * * @class EventEmitter * * @constructor */ function EventEmitter() { /* Nothing to set */ } /** * Holds the assigned EventEmitters by name. * * @type {object} * @private */ EventEmitter.prototype._events = undefined; /** * Return a list of assigned event listeners. * * @memberof EventEmitter# * @method listeners * @param {string} event The events that should be listed. * @param {boolean} exists We only need to know if there are listeners. * @returns {array|boolean} */ EventEmitter.prototype.listeners = function listeners(event, exists) { var evt = prefix ? prefix + event : event , available = this._events &amp;&amp; this._events[evt]; if (exists) return !!available; if (!available) return []; if (available.fn) return [available.fn]; for (var i = 0, l = available.length, ee = new Array(l); i &lt; l; i++) { ee[i] = available[i].fn; } return ee; }; /** * Emit an event to all registered event listeners. * * @memberof EventEmitter# * @method emit * @param {string} event The name of the event. * @returns {boolean} Indication if we've emitted an event. */ EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) { var evt = prefix ? prefix + event : event; if (!this._events || !this._events[evt]) return false; var listeners = this._events[evt] , len = arguments.length , args , i; if ('function' === typeof listeners.fn) { if (listeners.once) this.removeListener(event, listeners.fn, undefined, true); switch (len) { case 1: return listeners.fn.call(listeners.context), true; case 2: return listeners.fn.call(listeners.context, a1), true; case 3: return listeners.fn.call(listeners.context, a1, a2), true; case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true; case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true; case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true; } for (i = 1, args = new Array(len -1); i &lt; len; i++) { args[i - 1] = arguments[i]; } listeners.fn.apply(listeners.context, args); } else { var length = listeners.length , j; for (i = 0; i &lt; length; i++) { if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true); switch (len) { case 1: listeners[i].fn.call(listeners[i].context); break; case 2: listeners[i].fn.call(listeners[i].context, a1); break; case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break; default: if (!args) for (j = 1, args = new Array(len -1); j &lt; len; j++) { args[j - 1] = arguments[j]; } listeners[i].fn.apply(listeners[i].context, args); } } } return true; }; /** * Register a new EventListener for the given event. * * @memberof EventEmitter# * @method on * @param {string} event Name of the event. * @param {functon} fn Callback function. * @param {Mixed} context The context of the function. */ EventEmitter.prototype.on = function on(event, fn, context) { var listener = new EE(fn, context || this) , evt = prefix ? prefix + event : event; if (!this._events) this._events = prefix ? {} : Object.create(null); if (!this._events[evt]) this._events[evt] = listener; else { if (!this._events[evt].fn) this._events[evt].push(listener); else this._events[evt] = [ this._events[evt], listener ]; } return this; }; /** * Add an EventListener that's only called once. * * @memberof EventEmitter# * @method once * @param {string} event Name of the event. * @param {function} fn Callback function. * @param {Mixed} context The context of the function. */ EventEmitter.prototype.once = function once(event, fn, context) { var listener = new EE(fn, context || this, true) , evt = prefix ? prefix + event : event; if (!this._events) this._events = prefix ? {} : Object.create(null); if (!this._events[evt]) this._events[evt] = listener; else { if (!this._events[evt].fn) this._events[evt].push(listener); else this._events[evt] = [ this._events[evt], listener ]; } return this; }; /** * Remove event listeners. * * @memberof EventEmitter# * @method removeListener * @param {string} event The event we want to remove. * @param {function} fn The listener that we need to find. * @param {Mixed} context Only remove listeners matching this context. * @param {boolean} once Only remove once listeners. */ EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) { var evt = prefix ? prefix + event : event; if (!this._events || !this._events[evt]) return this; var listeners = this._events[evt] , events = []; if (fn) { if (listeners.fn) { if ( listeners.fn !== fn || (once &amp;&amp; !listeners.once) || (context &amp;&amp; listeners.context !== context) ) { events.push(listeners); } } else { for (var i = 0, length = listeners.length; i &lt; length; i++) { if ( listeners[i].fn !== fn || (once &amp;&amp; !listeners[i].once) || (context &amp;&amp; listeners[i].context !== context) ) { events.push(listeners[i]); } } } } // // Reset the array, or remove it completely if we have no more listeners. // if (events.length) { this._events[evt] = events.length === 1 ? events[0] : events; } else { delete this._events[evt]; } return this; }; /** * Remove all listeners or only the listeners for the specified event. * * @memberof EventEmitter# * @method removeAllListeners * @param {string} event The event want to remove all listeners for. */ EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) { if (!this._events) return this; if (event) delete this._events[prefix ? prefix + event : event]; else this._events = prefix ? {} : Object.create(null); return this; }; /** * @method off * @memberof EventEmitter# * @alias EventEmitter#removeListener */ EventEmitter.prototype.off = EventEmitter.prototype.removeListener; /** * @method addListener * @memberof EventEmitter# * @alias EventEmitter#on */ EventEmitter.prototype.addListener = EventEmitter.prototype.on; // // This function doesn't apply anymore. // EventEmitter.prototype.setMaxListeners = function setMaxListeners() { return this; }; // // Expose the prefix. // EventEmitter.prefixed = prefix; /** * Minimal EventEmitter interface that is molded against the Node.js * EventEmitter interface. * * @exports engine/eventemitter3 * @see EventEmitter */ module.exports = EventEmitter; × Search results Close Made with ♥ by Sean Bohan "},"analytics.js.html":{"id":"analytics.js.html","title":"Source: analytics.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: analytics.js var device = require('engine/device'); var config = require('game/config').default; /** * Google Analytics tracking. * Note: This class is protected, use the default instance instead. * * @example * // Add your GA code into `game/config` * analytics: { * id: 'my-ga-code' * } * * // Import the {@link module:engine/analytics} module * import analytics from 'engine/analytics'; * * // Send to the server * analytics.send('category', 'action', 'label', 'value'); * * @class Analytics * @constructor */ function Analytics(settings) { /** * @private */ this.trackId = settings.id; if (!navigator.onLine) return; if (device.cocoonJS) { this.clientId = Date.now(); var request = new XMLHttpRequest(); var params = 'v=1&amp;tid=' + this.trackId + '&amp;cid=' + this.clientId + '&amp;t=pageview&amp;dp=%2F'; request.open('POST', 'http://www.google-analytics.com/collect', true); request.send(params); } else { (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments) }; i[r].l = 1 * new Date(); a = s.createElement(o); m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga'); ga('create', this.trackId, 'auto'); ga('send', 'pageview'); } } /** * Send event to analytics. * @method send * @memberof Analytics# * @param {string} category * @param {string} action * @param {string} [label] * @param {string} [value] */ Analytics.prototype.send = function send(category, action, label, value) { if (!navigator.onLine) return; if (device.cocoonJS) { var request = new XMLHttpRequest(); var params = 'v=1&amp;tid=' + this.trackId + '&amp;cid=' + this.clientId + '&amp;t=event&amp;ec=' + category + '&amp;ea=' + action; if (typeof label !== 'undefined') params += '&amp;el=' + label; if (typeof value !== 'undefined') params += '&amp;ev=' + value; request.open('POST', 'http://www.google-analytics.com/collect', true); request.send(params); } else { ga('send', 'event', category, action, label, value); } }; /** * Analytics module makes it easier to work with Google Analytics. * * An instance of {@link Analytics} is already created as the module * exports. * * See {@link Analytics} for more information. * * @exports engine/analytics * * @requires module:engine/device */ module.exports = new Analytics(Object.assign({ id: '', }, config.analytics)); × Search results Close Made with ♥ by Sean Bohan "},"behavior.js.html":{"id":"behavior.js.html","title":"Source: behavior.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: behavior.js var EventEmitter = require('engine/eventemitter3'); /** * Behavior base class. * * @class Behavior * @extends {EventEmitter} * * @constructor */ function Behavior() { EventEmitter.call(this); /** * Type of this behavior * @type {string} */ this.type = ''; /** * Whether this behavior is currently activated * @type {boolean} */ this.isActive = false; /** * Target Actor instance * @type {Actor} */ this.target = null; }; Behavior.prototype = Object.create(EventEmitter.prototype); Behavior.prototype.constructor = Behavior; /** * Add to target * @memberof Behavior# * @method addTo * @param {object} target Any objects meet this behavior's requirement * @return {Behavior} Behavior itself for chaining */ Behavior.prototype.addTo = function addTo(target) { this.target = target; return this; }; /** * Setup the behavior * @memberof Behavior# * @method setup * @param {object} settings * @return {Behavior} Self for chaining */ Behavior.prototype.setup = function setup(settings) { // Merge settings Object.assign(this, this.defaultSettings || {}, settings); }; /** * Activate this behavior * @memberof Behavior# * @method activate * @return {Behavior} Behavior itself for chaining */ Behavior.prototype.activate = function activate() { this.isActive = true; return this; }; /** * De-activate this behavior * @memberof Behavior# * @method deactivate * @return {Behavior} Behavior itself for chaining */ Behavior.prototype.deactivate = function deactivate() { this.isActive = false; return this; }; /** * Behaviors map * @memberof Behavior * @type {object} */ Behavior.behaviors = {}; /** * Register a new type of behavior. * @memberof Behavior * @param {string} type Type of this behavior. * @param {Behavior|object} behv Behavior sub-class or pure object */ Behavior.register = function(type, behv) { if (Behavior.behaviors[type]) { console.log('Behavior &quot;' + type + '&quot; is already defined!'); return; } Behavior.behaviors[type] = behv; }; /** * Behavior is just an &quot;interface&quot;, you can inherit from it or * simply create an object with the methods as light-weight * behavior. * * @exports engine/behavior * * @requires module:engine/eventemitter3 */ module.exports = Behavior; × Search results Close Made with ♥ by Sean Bohan "},"camera.js.html":{"id":"camera.js.html","title":"Source: camera.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: camera.js var engine = require('engine/core'); var Vector = require('engine/vector'); var Timer = require('engine/timer'); var utils = require('engine/utils'); /** * Camera with ability to follow, scale and shake. * * @class Camera * * @constructor */ function Camera() { /** * Camera acceleration speed. * @type {Vector} * @default (3, 3) */ this.acceleration = Vector.create(3, 3); /** * Anchor of the camera, the same as `PIXI.Sprite`` * @type {Vector} * @default (0.5, 0.5) */ this.anchor = Vector.create(0.5, 0.5); /** * Container that the camera is added to. * @type {PIXI.Container} */ this.container = null; /** * Whether the camera is currently shaking * @type {boolean} * @default false */ this.isShaking = false; /** * Camera maximum move speed. * @type {number} * @default 200 */ this.maxSpeed = 200; /** * Camera position limit (right) * @type {null|number} * @default null */ this.maxX = null; /** * Camera position limit (down) * @type {null|number} * @default null */ this.maxY = null; /** * Camera position limit (left) * @type {null|number} * @default null */ this.minX = null; /** * Camera position limit (up) * @type {null|number} * @default null */ this.minY = null; /** * Camera position. * @type {Vector} * @default (0, 0) */ this.position = Vector.create(); /** * Use rounding on container position. * @type {boolean} * @default false */ this.rounding = false; /** * Rotation of the camera. * @type {number} * @default 0 */ this.rotation = 0; /** * Reference of the scene added to. * @type {Scene} */ this.scene = null; /** * Current speed of camera. * @type {Vector} */ this.speed = Vector.create(); /** * @private */ this.delta = 0; /** * Sprite, that camera follows. * @type {PIXI.Sprite} */ this.target = null; /** * @type {number} */ this.threshold = 1; /** * Sensor box * @type {object} */ this.sensor = { x: 0, y: 0, width: 200, height: 200, }; /** * Camera zoom. * (2, 2) =&gt; 2x * (0.5, 0.5) =&gt; 0.5x * @type {Vector} * @default (1, 1) */ this.zoom = Vector.create(1, 1); // internal caches this._targetLeft = 0; this._targetRight = 0; this._targetTop = 0; this._targetBottom = 0; this._sensorLeft = 0; this._sensorRight = 0; this._sensorTop = 0; this._sensorBottom = 0; this._shakeOffset = Vector.create(); this._shakeForce = Vector.create(); this._shakeForward = false; this._shakeDelay = 0; this._shakeCount = 0; this._startShake = this._startShake.bind(this); this._numCache = 0; } /** * Add camera to container. * @memberof Camera# * @method addTo * @param {Scene} scene * @param {PIXI.Container} container */ Camera.prototype.addTo = function addTo(scene, container) { this.scene = scene; this.container = container; scene.on('update', this.update, this); this.position.set(engine.width, engine.height) .multiply(this.anchor); this.sensor.x = (engine.width - this.sensor.width) * 0.5; this.sensor.y = (engine.height - this.sensor.height) * 0.5; return this; }; /** * Set target of camera. * @memberof Camera# * @method setTarget * @param {DisplayObject} target The object to follow * @param {Boolean} lerp Whether lerp to target instead of reseting camera position */ Camera.prototype.setTarget = function setTarget(target, lerp) { this.target = target; if (!this.target) return; var bounds = target.getBounds(); this.sensor.x = bounds.x + bounds.width * 0.5 - this.sensor.width * 0.5; this.sensor.y = bounds.y + bounds.height * 0.5 - this.sensor.height * 0.5; if (!lerp) { this._setPosition(target.position.x, target.position.y); } }; /** * Set position of the camera * @memberof Camera# * @method setPosition */ Camera.prototype.setPosition = function setPosition(x, y) { this._setPosition(x, y); this.sensor.x = x - this.sensor.width * 0.5; this.sensor.y = y - this.sensor.height * 0.5; }; Camera.prototype._setPosition = function _setPosition(x, y) { this.position.set(x, y); // Make sure position constrains are correct if (Number.isFinite(this.minX) &amp;&amp; Number.isFinite(this.maxX) &amp;&amp; this.minX &gt; this.maxX) { this._numCache = this.maxX; this.maxX = this.minX; this.minX = this._numCache; } if (Number.isFinite(this.minY) &amp;&amp; Number.isFinite(this.maxY) &amp;&amp; this.minY &gt; this.maxY) { this._numCache = this.maxY; this.maxY = this.minY; this.minY = this._numCache; } // Apply constrains if (Number.isFinite(this.minX) &amp;&amp; this.position.x &lt; this.minX) { this.position.x = this.minX; this.speed.x = 0; } else if (Number.isFinite(this.maxX) &amp;&amp; this.position.x &gt; this.maxX) { this.position.x = this.maxX; this.speed.x = 0; } if (Number.isFinite(this.minY) &amp;&amp; this.position.y &lt; this.minY) { this.position.y = this.minY; this.speed.y = 0; } else if (Number.isFinite(this.maxY) &amp;&amp; this.position.y &gt; this.maxY) { this.position.y = this.maxY; this.speed.y = 0; } if (this.container) { this.container.position.set(engine.width, engine.height) .multiply(this.anchor); this.container.pivot.copy(this.position); } }; /** * Shake camera * @memberof Camera# * @method shake * @param {Vector|Number} force Max shake distance in pixel * @param {Number} duration How long will the camera shake * @param {Number} count How many times will the camera shake * @param {Boolean} forward ONLY shake forward or not */ Camera.prototype.shake = function shake(force, duration, count, forward) { if (Number.isFinite(force)) { this._shakeForce = this._shakeForce.set(force, force); } else { this._shakeForce = this._shakeForce.set(force.x, force.y); } this._shakeDelay = Math.floor(duration / count) || 20; this._shakeCount = count || 3; this._shakeForward = !!forward; this._startShake(); }; /** @private */ Camera.prototype._startShake = function _startShake() { this.isShaking = true; if (this._shakeCount &gt; 0) { if (this._shakeForward) { this._shakeOffset.x = Math.random() * this._shakeForce.x; this._shakeOffset.y = Math.random() * this._shakeForce.y; } else { this._shakeOffset.x = (Math.random() * 2 - 1) * this._shakeForce.x; this._shakeOffset.y = (Math.random() * 2 - 1) * this._shakeForce.y; } // Next shake this._shakeCount -= 1; Timer.later(this._shakeDelay, this._startShake); } else { // Reset offset this._shakeOffset.set(0, 0); this._setPosition(this.position.x, this.position.y); this.isShaking = false; } }; /** * @memberof Camera# * @method moveSensor * @private */ Camera.prototype.moveSensor = function moveSensor() { if (!this.target) return; var targetBounds = this.target.getLocalBounds(); // Resize sensor to fit the target if (this.sensor.width &lt; targetBounds.width) { this.sensor.width = targetBounds.width; } if (this.sensor.height &lt; targetBounds.height) { this.sensor.height = targetBounds.height; } this._targetLeft = this.target.position.x + targetBounds.x; this._targetRight = this._targetLeft + targetBounds.width; this._targetTop = this.target.position.y + targetBounds.y; this._targetBottom = this._targetTop + targetBounds.height; this._sensorLeft = this.sensor.x; this._sensorRight = this.sensor.x + this.sensor.width; this._sensorTop = this.sensor.y; this._sensorBottom = this.sensor.y + this.sensor.height; if (this._targetLeft &lt; this._sensorLeft) { this.sensor.x = this._targetLeft; } else if (this._targetRight &gt; this._sensorRight) { this.sensor.x = this._targetRight - this.sensor.width; } if (this._targetTop &lt; this._sensorTop) { this.sensor.y = this._targetTop; } else if (this._targetBottom &gt; this._sensorBottom) { this.sensor.y = this._targetBottom - this.sensor.height; } }; /** * @memberof Camera# * @method moveCamera * @private */ Camera.prototype.moveCamera = function moveCamera(dt) { this.speed.x = utils.clamp(this.position.x - (this.sensor.x + this.sensor.width * 0.5), -this.maxSpeed, this.maxSpeed); this.speed.y = utils.clamp(this.position.y - (this.sensor.y + this.sensor.height * 0.5), -this.maxSpeed, this.maxSpeed); if (this.speed.x &gt; this.threshold || this.speed.x &lt; -this.threshold || this.speed.y &gt; this.threshold || this.speed.y &lt; -this.threshold ) { this._setPosition( this.position.x - this.speed.x * this.acceleration.x * dt, this.position.y - this.speed.y * this.acceleration.y * dt ); } else { this.speed.set(0, 0); } if (this.isShaking &amp;&amp; this.container) { this._setPosition(this.position.x, this.position.y); this.container.pivot.subtract(this._shakeOffset); } }; /** * Remove camera from parent container. * @memberof Camera# * @method remove */ Camera.prototype.remove = function remove() { scene.off('update', this.update, this); this.container = null; }; /** * Update method * @memberof Camera# * @method update * @protected */ Camera.prototype.update = function update(_, delta) { this.delta = delta; this.moveSensor(this.delta); this.moveCamera(this.delta); if (this.container) { this.container.scale.set(1 / this.zoom.x, 1 / this.zoom.y); this.container.rotation = -this.rotation; } }; /** * Camera bounds left * @memberof Camera# * @type {number} * @readonly */ Object.defineProperty(Camera.prototype, 'left', { get: function() { return this.position.x - engine.width * this.anchor.x; }, }); /** * Camera bounds right * @memberof Camera# * @type {number} * @readonly */ Object.defineProperty(Camera.prototype, 'right', { get: function() { return this.position.x + engine.width * (1 - this.anchor.x); }, }); /** * Camera bounds top * @memberof Camera# * @type {number} * @readonly */ Object.defineProperty(Camera.prototype, 'top', { get: function() { return this.position.y - engine.height * this.anchor.y; }, }); /** * Camera bounds bottom * @memberof Camera# * @type {number} * @readonly */ Object.defineProperty(Camera.prototype, 'bottom', { get: function() { return this.position.y + engine.height * (1 - this.anchor.y); }, }); /** * @exports engine/camera * * @see Camera * * @requires module:engine/core * @requires module:engine/vector * @requires module:engine/timer * @requires module:engine/utils */ module.exports = Camera; × Search results Close Made with ♥ by Sean Bohan "},"tilemap_collision-layer.js.html":{"id":"tilemap_collision-layer.js.html","title":"Source: tilemap/collision-layer.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: tilemap/collision-layer.js var utils = require('./utils'); var utilsG = require('engine/utils'); var physics = require('engine/physics'); var Vector = require('engine/vector'); var decomp = require('./decomp'); var core = require('engine/core'); var PIXI = require('engine/pixi'); function unique(arr) { var seen = {}; var out = []; var len = arr.length; var j = 0; for (var i = 0; i &lt; len; i++) { var item = arr[i]; if (seen[item] !== 1) { seen[item] = 1; out[j++] = item; } } return out; } function distance(x1, y1, x2, y2) { return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2)); } function pointInPolygon(point, vs) { // ray-casting algorithm based on // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html var x = point[0], y = point[1]; var inside = false; for (var i = 0, j = vs.length - 1; i &lt; vs.length; j = i++) { var xi = vs[i][0], yi = vs[i][1]; var xj = vs[j][0], yj = vs[j][1]; var intersect = ((yi &gt; y) != (yj &gt; y)) &amp;&amp; (x &lt; (xj - xi) * (y - yi) / (yj - yi) + xi); if (intersect) inside = !inside; } return inside; }; /* p1 in p2 */ function polygonInPolygon(p1, p2) { var inside = true; var point = [0, 0]; for (var i = 0; i &lt; p1.length - 1; i += 2) { point[0] = p1[i]; point[1] = p1[i + 1]; if (!pointInPolygon(point, p2)) { inside = false; break; } } return inside; } /** * CollisionLayer is a specific tile layer, which is used to support * collision of a tilemap. * * @class CollisionLayer * @constructor * * @param {object} def Map data. * @param {number} group Collision group for this layer. */ function CollisionLayer(def, group) { this.tilesize = def.tilesize; this.width = def.width; this.height = def.height; if (typeof(def.data[0]) === 'number') { this.data = utils.lift(def.data, this.width, this.height); } else { this.data = def.data; } this.group = group; this.bodies = []; this.generateShapes(); } /** * Generate bodies. * @memberof CollisionLayer# * @method generateShapes */ CollisionLayer.prototype.generateShapes = function generateShapes() { var i, j; // Create edges var edges = []; var taggedGroups = {}; var mx = this.tilesize, my = this.tilesize; var tag, x, y, v0, v1, v2, v3, e0, e1, e2, e3, grid = this.data, count = 0; for (i = 0; i &lt; this.height; i++) { for (j = 0; j &lt; this.width; j++) { if (grid[i][j] !== 0) { tag = count++; x = mx * j; // left y = my * i; // top v0 = { x: x, y: y + my }; // left-bottom v1 = { x: x, y: y }; // left-top v2 = { x: x + mx, y: y }; // right-top v3 = { x: x + mx, y: y + my }; // right-bottom e0 = [v0, v1, tag, false]; e1 = [v1, v2, tag, false]; e2 = [v2, v3, tag, false]; e3 = [v3, v0, tag, false]; edges.push(e0, e1, e2, e3); taggedGroups[tag] = [e0, e1, e2, e3]; } } } function isEdgeEqual(e1, e2) { var d1 = (e1[0].x - e2[1].x)*(e1[0].x - e2[1].x) + (e1[0].y - e2[1].y)*(e1[0].y - e2[1].y); var d2 = (e2[0].x - e1[1].x)*(e2[0].x - e1[1].x) + (e2[0].y - e1[1].y)*(e2[0].y - e1[1].y); if (d1 &lt; 0.25 &amp;&amp; d2 &lt; 0.25) return true; } // Go through all edges and delete all instances of the ones that appear more than once var e1, e2, t1, t2, g1, g2, k; for (i = edges.length - 1; i &gt;= 0; i--) { e1 = edges[i]; for (j = i - 1; j &gt;= 0; j--) { e2 = edges[j]; if (isEdgeEqual(e1, e2)) { // Remove edges utilsG.removeItems(edges, i, 1); utilsG.removeItems(edges, j, 1); // Merge tags t1 = e1[2]; t2 = e2[2]; g1 = taggedGroups[t1]; g2 = taggedGroups[t2]; // The edges share the same tag if (t1 === t2) continue; // e2 is not checked yet if (!e2[3]) { // Make sure g1 is also checked, at least from now for (k = 0; k &lt; g1.length; k++) { g1[k][3] = true; } // Tag all edges of g2 as t1, and mark as checked for (k = 0; k &lt; g2.length; k++) { g2[k][2] = t1; g2[k][3] = true; g1.push(g2[k]); } delete taggedGroups[t2]; } else { // Make sure g2 is also checked, at least from now for (k = 0; k &lt; g2.length; k++) { g2[k][3] = true; } // Tag all edges of g1 as t2, and mark as checked for (k = 0; k &lt; g1.length; k++) { g1[k][2] = t2; g1[k][3] = true; g2.push(g1[k]); } delete taggedGroups[t1]; } } } } function findEdge(edge_list, point) { for (var i = 0; i &lt; edge_list.length; i++) { var edge = edge_list[i]; var d = (edge[0].x - point.x)*(edge[0].x - point.x) + (edge[0].y - point.y)*(edge[0].y - point.y); if (d &lt; 0.25) return i; } return -1; } // Remove extra edges var edge_list_size = edges.length, last_edge_list_size = 0, edge; var p1, p2, p3, p3Idx; while (edge_list_size !== last_edge_list_size) { edge_list_size = edges.length; for (i = 0; i &lt; edges.length; i++) { edge = edges[i]; p1 = edge[0]; p2 = edge[1]; p3Idx = findEdge(edges, p2); p3 = null; if (p3Idx &gt;= 0) { p3 = edges[p3Idx][1]; if (Math.abs((p1.y - p2.y)*(p1.x - p3.x) - (p1.y - p3.y)*(p1.x - p2.x)) &lt; 0.025) { edge[1].x = p3.x; edge[1].y = p3.y; utilsG.removeItems(edges, p3Idx, 1); i -= 1; break; } } } last_edge_list_size = edges.length; } var shapes = {}; for (i = 0; i &lt; edges.length; i++) { if (!shapes[edges[i]]) { shapes[edges[i]] = [edges[i]]; } else { shapes[edges[i]].push(edges[i]); } } function getShapeVertices(shape) { var temp_edges = shape.slice(); var vertices = []; var edge = temp_edges[0]; utilsG.removeItems(temp_edges, 0, 1); vertices.push([edge[0].x, edge[0].y]); var next_edge = findEdge(temp_edges, edge[1]); while (next_edge &gt;= 0) { edge = temp_edges[next_edge]; utilsG.removeItems(temp_edges, next_edge, 1); vertices.push([edge[0].x, edge[0].y]); next_edge = findEdge(temp_edges, edge[1]); } if (temp_edges.length === 0) return vertices; } // Decomp polygons var polygons = [], polys; for (k in shapes) { var decompPoly = new decomp.Polygon(); decompPoly.vertices = getShapeVertices(shapes[k]); polys = decompPoly.quickDecomp(); for (i = 0; i &lt; polys.length; i++) { polygons.push(polys[i].vertices); } } // Convert to vector lists var polygonPoints = [], polygon, points; for (i = 0; i &lt; polygons.length; i++) { polygon = polygons[i]; points = []; for (j = 0; j &lt; polygon.length; j++) { points.push(new Vector(polygon[j][0], polygon[j][1])); } polygonPoints.push(points); } // console.log(polygonPoints); // Create bodies for each convex polygon var body for (i = 0; i &lt; polygonPoints.length; i++) { body = new physics.Body({ shape: new physics.Polygon(polygonPoints[i]), }); body.collisionGroup = this.group; this.bodies.push(body); } }; /** * Destroy this layer. * @memberof CollisionLayer# * @method destroy */ CollisionLayer.prototype.destroy = function() { for (var i = 0; i &lt; this.bodies.length; i++) { this.bodies[i].remove(); } this.bodies.length = 0; }; /** * Add this layer to a scene. * @memberof CollisionLayer# * @method addTo */ CollisionLayer.prototype.addTo = function(scene) { this.scene = scene; for (var i = 0; i &lt; this.bodies.length; i++) { scene.world.addBody(this.bodies[i]); } }; /** * @requires engine/core * @requires engine/vector * @requires engine/physics * @requires engine/pixi * @requires engine/utils * @requires engine/tilemap/utils * @requires engine/tilemap/decomp * * @see CollisionLayer */ module.exports = CollisionLayer; × Search results Close Made with ♥ by Sean Bohan "},"storage_data.js.html":{"id":"storage_data.js.html","title":"Source: storage/data.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: storage/data.js var Eventemitter = require('engine/eventemitter3'); /** * Data storage base class. Provides data define, set and get support. * * @class Data * @constructor * @extends {EventEmitter} */ function Data() { Eventemitter.call(this); /** * Data map * @type {object} * @private */ this.data = {}; /** * List of added keys * @type {array} * @private */ this.keys = []; /** * Default values * @type {object} * @private */ this.defaultVal = {}; } Data.prototype = Object.create(Eventemitter.prototype); Data.prototype.constructor = Data; /** * Check whether a key is valid. * @memberof Data# * @method validKey * @param {string} key * @return {boolean} */ Data.prototype.validKey = function(key) { if (this.keys.indexOf(key) &gt;= 0) { console.log('Data field &quot;' + key + '&quot; is already defined!'); return false; } return true; }; /** * Add a boolean property. * @memberof Data# * @method addBool * @param {string} key * @param {boolean} defaultVal * @return {Data} Self for chaining */ Data.prototype.addBool = function(key, defaultVal) { if (this.validKey(key)) { this.keys.push(key); this.data[key] = Boolean(defaultVal); this.defaultVal[key] = this.data[key]; } return this; }; /** * Add a integer number property. * @memberof Data# * @method addInt * @param {string} key * @param {number} defaultVal * @return {Data} Self for chaining */ Data.prototype.addInt = function(key, defaultVal) { if (this.validKey(key)) { this.keys.push(key); this.data[key] = parseInt(defaultVal); this.defaultVal[key] = this.data[key]; } return this; }; /** * Add a float number property. * @memberof Data# * @method addFloat * @param {string} key * @param {number} defaultVal * @return {Data} Self for chaining */ Data.prototype.addFloat = function(key, defaultVal) { if (this.validKey(key)) { this.keys.push(key); this.data[key] = parseFloat(defaultVal); this.defaultVal[key] = this.data[key]; } return this; }; /** * Add a string property. * @memberof Data# * @method addString * @param {string} key * @param {string} defaultVal * @return {Data} Self for chaining */ Data.prototype.addString = function(key, defaultVal) { if (this.validKey(key)) { this.keys.push(key); this.data[key] = JSON.stringify(defaultVal); this.defaultVal[key] = this.data[key]; } return this; }; /** * Add an array property. * @memberof Data# * @method addArray * @param {string} key * @param {array} defaultVal * @return {Data} Self for chaining */ Data.prototype.addArray = function(key, defaultVal) { if (this.validKey(key)) { this.keys.push(key); this.data[key] = defaultVal || []; this.defaultVal[key] = this.data[key]; } return this; }; /** * Check whether this data has a property with a key. * @memberof Data# * @method has * @param {string} key * @return {boolean} */ Data.prototype.has = function(key) { return this.keys.indexOf(key) &gt;= 0; }; /** * Set a property by key. * @memberof Data# * @method set * @param {string} key * @param {*} value * @return {Data} Self for chaining */ Data.prototype.set = function(key, value) { if (this.has(key)) { this.data[key] = value; this.emit(key, value); } return this; }; /** * Set a boolean property * @memberof Data# * @method setBool * @param {string} key * @param {boolean} value * @return {Data} Self for chaining */ Data.prototype.setBool = function(key, value) { return this.set(key, Boolean(value)); }; /** * Set a integer number property * @memberof Data# * @method setInt * @param {string} key * @param {number} value * @return {Data} Self for chaining */ Data.prototype.setInt = function(key, value) { return this.set(key, parseInt(value)); }; /** * Set a float number property * @memberof Data# * @method setFloat * @param {string} key * @param {number} value * @return {Data} Self for chaining */ Data.prototype.setFloat = function(key, value) { return this.set(key, parseFloat(value)); }; /** * Set a string property * @memberof Data# * @method setString * @param {string} key * @param {string} value * @return {Data} Self for chaining */ Data.prototype.setString = function(key, value) { return this.set(key, JSON.stringify(value)); }; /** * Set value of an element of array property * @memberof Data# * @method setArrayItem * @param {string} key * @param {number} idx * @param {bool} value * @return {Data} Self for chaining */ Data.prototype.setArrayItem = function(key, idx, value) { var arr = this.get(key); if (arr &amp;&amp; arr.length &gt; idx) { arr[idx] = value; this.emit(key, arr); } return this; }; /** * Get value of a property * @memberof Data# * @method get * @param {string} key */ Data.prototype.get = function(key) { if (this.has(key)) { return this.data[key]; } return undefined; }; /** * Get value of an element of an array property * @memberof Data# * @method getArrayItem * @param {string} key * @param {number} idx */ Data.prototype.getArrayItem = function(key, idx) { var arr = this.get(key); if (arr &amp;&amp; arr.length &gt; idx) { return arr[idx]; } return undefined; }; /** * @exports engine/storage/data * @see Data * * @requires module:engine/eventemitter3 */ module.exports = Data; × Search results Close Made with ♥ by Sean Bohan "},"keyboard.js.html":{"id":"keyboard.js.html","title":"Source: keyboard.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: keyboard.js var EventEmitter = require('engine/eventemitter3'); /** * @class Keyboard * @constructor * @extends {EventEmitter} * * @emits keydown * @emits keyup */ function Keyboard() { EventEmitter.call(this); /** * @type {array} * @private */ this._keysDown = []; window.addEventListener('keydown', this._keydown.bind(this)); window.addEventListener('keyup', this._keyup.bind(this)); window.addEventListener('blur', this._resetKeys.bind(this)); } Keyboard.prototype = Object.create(EventEmitter.prototype); Keyboard.prototype.constructor = Keyboard; /** * Check if key is pressed down. * @method down * @memberof Keyboard# * @param {string} key * @return {boolean} */ Keyboard.prototype.down = function down(key) { return !!this._keysDown[key]; }, /** * @method _keydown * @memberof Keyboard# * @param {KeyboardEvent} event * @private */ Keyboard.prototype._keydown = function _keydown(event) { if (!Keyboard.keys[event.keyCode]) { // Unknown key Keyboard.keys[event.keyCode] = event.keyCode; } if (this._keysDown[Keyboard.keys[event.keyCode]]) return; this._keysDown[Keyboard.keys[event.keyCode]] = true; this.emit('keydown', Keyboard.keys[event.keyCode], this.down('SHIFT'), this.down('CTRL'), this.down('ALT')); }; /** * @method _keyup * @memberof Keyboard# * @param {KeyboardEvent} event * @private */ Keyboard.prototype._keyup = function _keyup(event) { this._keysDown[Keyboard.keys[event.keyCode]] = false; this.emit('keyup', Keyboard.keys[event.keyCode]); }; /** * @method _resetKeys * @memberof Keyboard# * @private */ Keyboard.prototype._resetKeys = function _resetKeys() { for (var key in this._keysDown) { this._keysDown[key] = false; } }; Object.assign(Keyboard, { /** * List of available keys. * @memberof Keyboard# * @type {object} */ keys: { 8: 'BACKSPACE', 9: 'TAB', 13: 'ENTER', 16: 'SHIFT', 17: 'CTRL', 18: 'ALT', 19: 'PAUSE', 20: 'CAPS_LOCK', 27: 'ESC', 32: 'SPACE', 33: 'PAGE_UP', 34: 'PAGE_DOWN', 35: 'END', 36: 'HOME', 37: 'LEFT', 38: 'UP', 39: 'RIGHT', 40: 'DOWN', 44: 'PRINT_SCREEN', 45: 'INSERT', 46: 'DELETE', 48: '0', 49: '1', 50: '2', 51: '3', 52: '4', 53: '5', 54: '6', 55: '7', 56: '8', 57: '9', 65: 'A', 66: 'B', 67: 'C', 68: 'D', 69: 'E', 70: 'F', 71: 'G', 72: 'H', 73: 'I', 74: 'J', 75: 'K', 76: 'L', 77: 'M', 78: 'N', 79: 'O', 80: 'P', 81: 'Q', 82: 'R', 83: 'S', 84: 'T', 85: 'U', 86: 'V', 87: 'W', 88: 'X', 89: 'Y', 90: 'Z', 96: 'NUM_ZERO', 97: 'NUM_ONE', 98: 'NUM_TWO', 99: 'NUM_THREE', 100: 'NUM_FOUR', 101: 'NUM_FIVE', 102: 'NUM_SIX', 103: 'NUM_SEVEN', 104: 'NUM_EIGHT', 105: 'NUM_NINE', 106: 'NUM_MULTIPLY', 107: 'NUM_PLUS', 109: 'NUM_MINUS', 110: 'NUM_PERIOD', 111: 'NUM_DIVISION', 112: 'F1', 113: 'F2', 114: 'F3', 115: 'F4', 116: 'F5', 117: 'F6', 118: 'F7', 119: 'F8', 120: 'F9', 121: 'F10', 122: 'F11', 123: 'F12', 186: 'SEMICOLON', 187: 'PLUS', 189: 'MINUS', 192: 'GRAVE_ACCENT', 222: 'SINGLE_QUOTE', }, }); /** * Keyboard events and states support. * An instance of `Keyboard` is exported as the default value of * `engine/keyboard` module. * * @see Keyboard * * @exports engine/keyboard * @requires module:engine/eventemitter3 * * @example * import keyboard from 'engine/keyboard'; * keyboard.on('keydown', (key) =&gt; { * console.log(`key &quot;${key}&quot; is pressed`); * }); */ module.exports = new Keyboard(); × Search results Close Made with ♥ by Sean Bohan "},"animation_index.js.html":{"id":"animation_index.js.html","title":"Source: animation/index.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: animation/index.js /** * Animation system is consist of two powerful sub-systems: * * 1. Tween : a classic but better tween engine. * 2. Action: a Blender/Flash like, keyframe based timeline animation system. * * @module engine/animation * * @requires engine/scene * @requires engine/utils * @requires engine/animation/tween * @requires engine/animation/action */ var Scene = require('engine/scene'); var utils = require('engine/utils'); var Tween = require('./tween'); var Action = require('./action').Action; Object.assign(Scene.prototype, { /** * Pause animations with specific tag. * @memberof Scene# * @method pauseAnimationsTagged * @param {string} tag * @return {Scene} Self for chaining. */ pauseAnimationsTagged: function pauseAnimationsTagged(tag) { if (this.animationSystem.anims[tag]) { utils.removeItems(this.animationSystem.activeTags, this.animationSystem.activeTags.indexOf(tag), 1); this.animationSystem.deactiveTags.push(tag); } return this; }, /** * Resume animations with specific tag. * @memberof Scene# * @method resumeAnimationsTagged * @param {string} tag * @return {Scene} Self for chaining. */ resumeAnimationsTagged: function resumeAnimationsTagged(tag) { if (this.animationSystem.anims[tag]) { utils.removeItems(this.animationSystem.deactiveTags, this.animationSystem.deactiveTags.indexOf(tag), 1); this.animationSystem.activeTags.push(tag); } return this; }, }); Scene.registerSystem('Animation', { init: function init(scene) { /** * Map of animation lists. * @property {Object} anims */ scene.animationSystem = { activeTags: ['0'], deactiveTags: [], anims: { '0': [], }, }; }, preUpdate: function preUpdate(scene) { var i, key, anims, t; for (key in scene.animationSystem.anims) { if (scene.animationSystem.activeTags.indexOf(key) &lt; 0) continue; anims = scene.animationSystem.anims[key]; for (i = 0; i &lt; anims.length; i++) { t = anims[i]; if (t.removed) { t.recycle(); utils.removeItems(anims, i--, 1); } } } }, update: function update(scene, delta) { var i, key, anims, t; for (key in scene.animationSystem.anims) { if (scene.animationSystem.activeTags.indexOf(key) &lt; 0) continue; anims = scene.animationSystem.anims[key]; for (i = 0; i &lt; anims.length; i++) { t = anims[i]; if (!t.removed) { t._step(delta); } } } }, }); module.exports = { Tween: Tween, Action: Action, }; × Search results Close Made with ♥ by Sean Bohan "},"animation_easing.js.html":{"id":"animation_easing.js.html","title":"Source: animation/easing.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: animation/easing.js /** * Easing and interpolation functions for variable lerping. * * @module engine/animation/easing */ /** * Easing functions. */ module.exports.Easing = { Linear: { None: function(k) { return k; }, }, Quadratic: { In: function(k) { return k * k; }, Out: function(k) { return k * (2 - k); }, InOut: function(k) { if ((k *= 2) &lt; 1) return 0.5 * k * k; return -0.5 * (--k * (k - 2) - 1); }, }, Cubic: { In: function(k) { return k * k * k; }, Out: function(k) { return --k * k * k + 1; }, InOut: function(k) { if ((k *= 2) &lt; 1) return 0.5 * k * k * k; return 0.5 * ((k -= 2) * k * k + 2); }, }, Quartic: { In: function(k) { return k * k * k * k; }, Out: function(k) { return 1 - (--k * k * k * k); }, InOut: function(k) { if ((k *= 2) &lt; 1) return 0.5 * k * k * k * k; return -0.5 * ((k -= 2) * k * k * k - 2); }, }, Quintic: { In: function(k) { return k * k * k * k * k; }, Out: function(k) { return --k * k * k * k * k + 1; }, InOut: function(k) { if ((k *= 2) &lt; 1) return 0.5 * k * k * k * k * k; return 0.5 * ((k -= 2) * k * k * k * k + 2); }, }, Sinusoidal: { In: function(k) { return 1 - Math.cos(k * Math.PI / 2); }, Out: function(k) { return Math.sin(k * Math.PI / 2); }, InOut: function(k) { return 0.5 * (1 - Math.cos(Math.PI * k)); }, }, Exponential: { In: function(k) { return k === 0 ? 0 : Math.pow(1024, k - 1); }, Out: function(k) { return k === 1 ? 1 : 1 - Math.pow(2, -10 * k); }, InOut: function(k) { if (k === 0) return 0; if (k === 1) return 1; if ((k *= 2) &lt; 1) return 0.5 * Math.pow(1024, k - 1); return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2); }, }, Circular: { In: function(k) { return 1 - Math.sqrt(1 - k * k); }, Out: function(k) { return Math.sqrt(1 - (--k * k)); }, InOut: function(k) { if ((k *= 2) &lt; 1) return -0.5 * (Math.sqrt(1 - k * k) - 1); return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1); }, }, Elastic: { In: function(k) { var s, a = 0.1, p = 0.4; if (k === 0) return 0; if (k === 1) return 1; if (!a || a &lt; 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI); return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p)); }, Out: function(k) { var s, a = 0.1, p = 0.4; if (k === 0) return 0; if (k === 1) return 1; if (!a || a &lt; 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI); return (a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1); }, InOut: function(k) { var s, a = 0.1, p = 0.4; if (k === 0) return 0; if (k === 1) return 1; if (!a || a &lt; 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI); if ((k *= 2) &lt; 1) return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p)); return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1; }, }, Back: { In: function(k) { var s = 1.70158; return k * k * ((s + 1) * k - s); }, Out: function(k) { var s = 1.70158; return --k * k * ((s + 1) * k + s) + 1; }, InOut: function(k) { var s = 1.70158 * 1.525; if ((k *= 2) &lt; 1) return 0.5 * (k * k * ((s + 1) * k - s)); return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2); }, }, Bounce: { In: function(k) { return 1 - Tween.Easing.Bounce.Out(1 - k); }, Out: function(k) { if (k &lt; (1 / 2.75)) { return 7.5625 * k * k; } else if (k &lt; (2 / 2.75)) { return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75; } else if (k &lt; (2.5 / 2.75)) { return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375; } else { return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375; } }, InOut: function(k) { if (k &lt; 0.5) return Tween.Easing.Bounce.In(k * 2) * 0.5; return Tween.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5; }, }, }; /** * Interpolation functions. */ module.exports.Interpolation = { Linear: function(v, k) { var m = v.length - 1, f = m * k, i = Math.floor(f), fn = Tween.Interpolation.Utils.Linear; if (k &lt; 0) return fn(v[0], v[1], f); if (k &gt; 1) return fn(v[m], v[m - 1], m - f); return fn(v[i], v[i + 1 &gt; m ? m : i + 1], f - i); }, Bezier: function(v, k) { var b = 0, n = v.length - 1, pw = Math.pow, bn = Tween.Interpolation.Utils.Bernstein, i; for (i = 0; i &lt;= n; i++) { b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i); } return b; }, CatmullRom: function(v, k) { var m = v.length - 1, f = m * k, i = Math.floor(f), fn = Tween.Interpolation.Utils.CatmullRom; if (v[0] === v[m]) { if (k &lt; 0) i = Math.floor(f = m * (1 + k)); return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i); } else { if (k &lt; 0) return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]); if (k &gt; 1) return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]); return fn(v[i ? i - 1 : 0], v[i], v[m &lt; i + 1 ? m : i + 1], v[m &lt; i + 2 ? m : i + 2], f - i); } }, Utils: { Linear: function(p0, p1, t) { return (p1 - p0) * t + p0; }, Bernstein: function(n, i) { var fc = Tween.Interpolation.Utils.Factorial; return fc(n) / fc(i) / fc(n - i); }, Factorial: (function() { var a = [1]; return function(n) { var s = 1, i; if (a[n]) return a[n]; for (i = n; i &gt; 1; i--) s *= i; return a[n] = s; }; })(), CatmullRom: function(p0, p1, p2, p3, t) { var v0 = (p2 - p0) * 0.5, v1 = (p3 - p1) * 0.5, t2 = t * t, t3 = t * t2; return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1; }, }, }; × Search results Close Made with ♥ by Sean Bohan "},"animation_tween.js.html":{"id":"animation_tween.js.html","title":"Source: animation/tween.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: animation/tween.js var EventEmitter = require('engine/eventemitter3'); var Scene = require('engine/scene'); var utils = require('engine/utils'); var animUtils = require('./utils'); var getTargetAndKey = animUtils.getTargetAndKey; var easing = require('./easing'); var Easing = easing.Easing; var Interpolation = easing.Interpolation; /** * Action type enums * @enum {number} * @memberof Tween */ var ACTION_TYPES = { REPEAT: 0, WAIT: 1, ANIMATE: 2, }; // TODO: better easing support (https://github.com/rezoner/ease) /** * @class Tween * @extends {EventEmitter} * @constructor * @param {object} context */ function Tween(context) { EventEmitter.call(this); this.context = context; /** * List of actions. * @type {array} */ this.actions = []; this.index = -1; this.current = null; this.currentAction = null; /** * Delta cache for updating * @type {number} */ this.delta = 0; /** * Tween duration. * @type {number} * @default 500 */ this.duration = 500; /** * Progress of current performing action * @type {number} */ this.progress = 0; /** * Tween's easing function. * @property {function} easing */ this.easing = Easing.Linear.None; /** * Tween's interpolation function. * @property {function} interpolationFn */ this.interpolation = Interpolation.Linear; /** * Whether this tween is finished * @type {boolean} */ this.finished = false; /** * Whether this tween is removed * @type {boolean} */ this.removed = false; /** * Whether this tween is paused * @type {boolean} */ this.paused = false; // Interal variables this.repeatCount = 0; this.propCtx = []; // Property context list this.propKey = []; // Property key list this.before = []; // Target property list this.change = []; // Property change list this.types = []; // Property type list } Tween.prototype = Object.create(EventEmitter.prototype); Tween.prototype.constructor = Tween; /** * Add a new action to the tween * @memberof Tween# * @method to * @param {Object} properties Target properties * @param {Number} duration Duration of the action in ms * @param {String|Function} easing Easing function * @param {String|Function} interpolation Interpolation function */ Tween.prototype.to = function to(properties, duration, easing, interpolation) { var easingFn = easing || Easing.Linear.None; var interpolationFn = interpolation || Interpolation.Linear; if (typeof easing === 'string') { easing = easing.split('.'); easingFn = Easing[easing[0]][easing[1]]; } if (typeof interpolation === 'string') { interpolationFn = Interpolation[interpolation]; } /** * props [ * propertyContext1, propertyKey1, targetValue1, * propertyContext2, propertyKey2, targetValue2, * ... * ] */ var props = [], keys = Object.keys(properties), pair; for (var i = 0; i &lt; keys.length; i++) { pair = getTargetAndKey(this.context, keys[i]); props.push(pair[0], pair[1], properties[keys[i]]); } this.actions.push([props, duration, easingFn, interpolationFn]); return this; }; /** * Repeat the tween for times * @memberof Tween# * @param {number} times How many times to repeat */ Tween.prototype.repeat = function repeat(times) { this.actions.push([ACTION_TYPES.REPEAT, times]); return this; }; /** * Wait a short time before next action * @memberof Tween# * @method wait * @param {number} time Time to wait in ms */ Tween.prototype.wait = function wait(time) { this.actions.push([ACTION_TYPES.WAIT, time]); return this; }; /** * Stop this tween * @memberof Tween# * @method stop */ Tween.prototype.stop = function stop() { this.removed = true; return this; }; /** * Pause this tween * @memberof Tween# * @method pause */ Tween.prototype.pause = function pause() { this.paused = true; return this; }; /** * Resume this tween from pausing * @memberof Tween# * @method resume */ Tween.prototype.resume = function resume() { this.paused = false; return this; }; Tween.prototype._next = function _next() { this.delta = 0; this.index++; if (this.index &gt;= this.actions.length) { this.finished = true; this.removed = true; this.emit('finish', this); return; } this.current = this.actions[this.index]; if (this.current[0] === ACTION_TYPES.WAIT) { this.duration = this.current[1]; this.currentAction = ACTION_TYPES.WAIT; } else if (this.current[0] === ACTION_TYPES.REPEAT) { if (!this.current.counter) { this.current.counter = this.current[1]; } this.current.counter--; if (this.current.counter &gt; 0) { this.emit('repeat', this); // Restart from beginning this.index = -1; this.current = null; this._step(0); } else { // Reset counter for next repeat if exists this.current.counter = this.current[1]; // Clear for next action this.current = null; this.currentAction = null; this._step(0); } } else { this.properties = this.current[0]; this.propCtx.length = 0; this.propKey.length = 0; this.change.length = 0; this.before.length = 0; this.types.length = 0; for (var i = 0; i &lt; this.properties.length; i += 3) { // Property context var context = this.properties[i]; // Property key var key = this.properties[i + 1]; // Current value var currValue = context[key]; // Target value var targetValue = this.properties[i + 2]; // Construct action lists this.propKey.push(key); this.propCtx.push(context); // Number if (typeof(currValue) === 'number') { this.before.push(currValue); this.change.push(targetValue - currValue); this.types.push(0); } // String else if (typeof(currValue) === 'string') { this.before.push(currValue); this.change.push(targetValue); this.types.push(1); } // Boolean or object else { this.before.push(currValue); this.change.push(targetValue); this.types.push(2); } } this.currentAction = ACTION_TYPES.ANIMATE; this.duration = this.current[1]; this.easing = this.current[2]; this.interpolation = this.current[3]; } }; Tween.prototype._step = function _step(delta) { if (this.removed || this.paused) return; this.delta += delta; if (!this.current) { this._next(); } switch (this.currentAction) { case ACTION_TYPES.ANIMATE: this._doAnimate(); break; case ACTION_TYPES.WAIT: this._doWait(); break; } }; Tween.prototype._doAnimate = function _doAnimate() { this.progress = Math.min(1, this.delta / this.duration); var mod = this.easing(this.progress); var i, key; for (i = 0; i &lt; this.change.length; i++) { key = this.propKey[i]; switch (this.types[i]) { // Number tweening case 0: this.propCtx[i][key] = this.before[i] + this.change[i] * mod; break; // Tweening text content case 1: this.propCtx[i][key] = this.change[i].slice(0, Math.floor(this.change[i].length * mod)); break; // Instantly value changing for boolean and objects case 2: if (this.progress &gt;= 1) this.propCtx[i][key] = this.change[i]; break; } } if (this.progress &gt;= 1) { this._next(); } }; Tween.prototype._doWait = function _doWait() { if (this.delta &gt;= this.duration) { this._next(); } }; Tween.prototype.recycle = function recycle() { pool.push(this); }; // Object recycle var pool = []; /** * Tween factory method. * @param {object} context * @return {module:engine/animation/tween~Tween} */ Tween.create = function create(context) { var t = pool.shift(); if (!t) { t = new Tween(context); } else { Tween.call(t, context); } return t; }; Tween.ACTION_TYPES = ACTION_TYPES; // Inject tween factory method Object.assign(Scene.prototype, { /** * Create and add a new tween to the scene. * @method tween * @memberOf Scene# * @param {Oblject} context Context of this tween * @param {string} tag Tag of this tween (default is '0') * @return {module:engine/animation/tween~Tween} */ tween: function tween(context, tag) { var t = tag || '0'; if (!this.animationSystem.anims[t]) { // Create a new tween list this.animationSystem.anims[t] = []; // Active new tag by default this.animationSystem.activeTags.push(t); } var tween = Tween.create(context); this.animationSystem.anims[t].push(tween); return tween; }, }); /** * Classic tween animation. * Use {@link Scene#tween} to create a new tween and start it immediately. * * @example * // Remember to import `animation` module. * import 'engine/animation'; * * class MyScene extends Scene { * awake() { * let coin = new PIXI.Sprite(...); * this.tween(coin) * .wait(1000) * .to({ * 'position.x': 20, * 'position.y': 20, * 'scale.x': 1.2, * 'scale.y': 1.2, * }); * } * } * * @exports engine/animation/tween * * @requires engine/eventemitter3 * @requires engine/scene * @requires engine/utils * @requires engine/animation/utils * @requires engine/animation/easing */ module.exports = Tween; × Search results Close Made with ♥ by Sean Bohan "},"animation_utils.js.html":{"id":"animation_utils.js.html","title":"Source: animation/utils.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: animation/utils.js /** * Utilty functions for animation module. * @module engine/animation/utils */ /** * Get the real target and its property key from * a root context and full path of the target property. * @param {object} context Root context that contains the target * @param {string} fullPath Full path of the target property * @return {array} [target, key] or undefined if no property matches */ module.exports.getTargetAndKey = function getTargetAndKey(context, fullPath) { var path = fullPath.split('.'); // Path is just the property key if (path.length === 1) { return [context, fullPath]; } else { var target = context; for (var i = 0; i &lt; path.length - 1; i++) { if (target.hasOwnProperty(path[i])) { target = target[path[i]]; } else { console.log('[Warning]: anim target &quot;' + path[i] + '&quot; not found'); return undefined; } } if (!target.hasOwnProperty(path[path.length - 1])) { console.log('[Warning]: anim target &quot;' + path[path.length - 1] + '&quot; not found'); return undefined; } return [target, path[path.length - 1]]; } }; × Search results Close Made with ♥ by Sean Bohan "},"audio_index.js.html":{"id":"audio_index.js.html","title":"Source: audio/index.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: audio/index.js var core = require('engine/core'); var howler = require('./howler.core'); var loader = require('engine/loader'); var Howl = howler.Howl; var Howler = howler.Howler; var EventEmitter = require('engine/eventemitter3'); var sounds = {}; var soundsToLoadCount = 0; var soundsLoadedCount = 0; // Callbacks var progressCB; var completeCB; function prefix(path) { return loader.baseURL + '/' + path; } /** * Add a sound to load * @memberof module:engine/audio * @param {array&lt;string&gt;} src List of audio files(with different extensions) * @param {stirng} id */ function addSound(src, id) { if (sounds[id]) { return; } var snd = new Howl({ src: src.map(prefix), preload: false, onload: onload.bind(undefined, snd), onloaderror: onload.bind(undefined, snd, 'Failed to load sound[' + src + ']'), }); sounds[id] = snd; soundsToLoadCount += 1; } function onload(snd, err) { soundsLoadedCount += 1; progressCB &amp;&amp; progressCB(snd, err); if (soundsLoadedCount === soundsToLoadCount &amp;&amp; completeCB) { setTimeout(completeCB, 0); // Remove ref to callbacks completeCB = null; progressCB = null; } } loader.registerLoader({ start: function(onComplete, onProgress) { progressCB = onProgress; completeCB = onComplete; for (var s in sounds) sounds[s].load(); if (Object.keys(sounds).length === 0) { onComplete(); } }, getAssetsLength: function() { return soundsToLoadCount; }, }); loader.addSound = addSound; var _snd_cache = null; var audio = Object.assign(new EventEmitter(), { /** * Sound map * @memberof module:engine/audio * @type {object} */ sounds: sounds, addSound: addSound, /** * Whether audio is muted. * @memberof module:engine/audio * @type {boolean} */ muted: false, /** * Mute. * @memberof module:engine/audio */ mute: function() { Howler.mute(true); audio.muted = true; audio.emit('mute', true); }, /** * Unmute. * @memberof module:engine/audio */ unmute: function() { Howler.mute(false); audio.muted = false; audio.emit('mute', false); }, /** * Get/set global audio volume. * @memberof module:engine/audio */ volume: function(v) { Howler.volume(v) }, /** * Play a specific sound by id. * @memberof module:engine/audio * @param {string} id ID of the sound to play. * @return {Howler} Howler instance for the sound. */ play: function(id) { _snd_cache = sounds[id]; _snd_cache &amp;&amp; _snd_cache.play(); return _snd_cache; }, }); core.on('pause', function() { // TODO: pause audio instead of mute audio.mute(); }); core.on('resume', function() { // TODO: resume audio instead of unmute audio.unmute(); }); /** * Audio module is a simple wrapper of Howler.js. * For more details, see the [Howler.js official site](http://goldfirestudios.com/blog/104/howler.js-Modern-Web-Audio-Javascript-Library). * * @example &lt;caption&gt;Load audio files&lt;/caption&gt; * import audio from 'engine/audio'; * * // Add audio file with extensions, and give it an `id` for later use. * audio.addSound(['bgm.mp3', 'bgm.ogg'], 'bgm'); * * @example &lt;caption&gt;Play loaded sound file&lt;/caption&gt; * import audio from 'engine/audio'; * * audio.play('bgm'); * // or use the Howler instance directly * audio.sounds['bgm'].loop(true).play(); * * @emits mute * @emits unmute * * @exports engine/audio * * @requires engine/eventemitter3 * @requires engine/core * @requires engine/loader * @requires engine/audio/howler.core */ module.exports = audio; × Search results Close Made with ♥ by Sean Bohan "},"core.js.html":{"id":"core.js.html","title":"Source: core.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: core.js require('engine/polyfill'); var EventEmitter = require('engine/eventemitter3'); var Renderer = require('engine/renderer'); var Timer = require('engine/timer'); var Vector = require('engine/vector'); var resize = require('engine/resize'); var device = require('engine/device'); var config = require('game/config').default; /** * @type {EventEmitter} * @private */ var core = new EventEmitter(); // - Private properties and methods var nextScene = null; var loopId = 0; var resizeFunc = _letterBoxResize; function startLoop() { loopId = requestAnimationFrame(loop); } function loop(timestamp) { loopId = requestAnimationFrame(loop); // Do not update anything when paused if (!core.paused) { tickAndRender(core.scene, timestamp); } } function endLoop() { cancelAnimationFrame(loopId); } function boot() { window.removeEventListener('load', boot); document.removeEventListener('DOMContentLoaded', boot); // Disable scroll _noPageScroll(); var rendererConfig = Object.assign({ canvasId: 'game', }, config.renderer); core.view = document.getElementById(rendererConfig.canvasId); // Keep focus when mouse/touch event occurs on the canvas function focus() { window.focus() } core.view.addEventListener('mousedown', focus); core.view.addEventListener('touchstart', focus); // Config and create renderer core.resolution = Renderer.resolution = rendererConfig.resolution = chooseProperResolution(rendererConfig.resolution); Renderer.init(core.width, core.height, rendererConfig); startLoop(); // Pick a resize function switch (config.resizeMode) { case 'letter-box': resizeFunc = _letterBoxResize; break; case 'crop': resizeFunc = _cropResize; break; case 'scale-inner': resizeFunc = _scaleInnerResize; break; case 'scale-outer': resizeFunc = _scaleOuterResize; break; case 'never': resizeFunc = _neverResize; break; default: resizeFunc = _letterBoxResize; } core.resizeFunc = resizeFunc; // Listen to the resize and orientation events window.addEventListener('resize', resizeFunc, false); window.addEventListener('orientationchange', resizeFunc, false); // Manually resize for the first time resizeFunc(true); // Setup visibility change API var visibleResume = function() { config.pauseOnHide &amp;&amp; core.resume('visibility'); }; var visiblePause = function() { config.pauseOnHide &amp;&amp; core.pause('visibility'); }; // Main visibility API function var vis = (function() { var stateKey, eventKey; var keys = { hidden: &quot;visibilitychange&quot;, webkitHidden: &quot;webkitvisibilitychange&quot;, mozHidden: &quot;mozvisibilitychange&quot;, msHidden: &quot;msvisibilitychange&quot; }; for (stateKey in keys) { if (stateKey in document) { eventKey = keys[stateKey]; break; } } return function(c) { if (c) document.addEventListener(eventKey, c); return !document[stateKey]; } })(); // Check if current tab is active or not vis(function() { if (vis()) { // The setTimeout() is used due to a delay // before the tab gains focus again, very important! setTimeout(visibleResume, 300); } else { visiblePause(); } }); // Check if browser window has focus if (window.addEventListener) { window.addEventListener('focus', function() { setTimeout(visibleResume, 300); }, false); window.addEventListener('blur', visiblePause, false); } else { window.attachEvent(&quot;focus&quot;, function() { setTimeout(visibleResume, 300); }); window.attachEvent('blur', visiblePause); } // Create rotate prompt if required if (device.mobile &amp;&amp; config.showRotatePrompt) { var div = document.createElement('div'); div.innerHTML = config.rotatePromptImg ? '' : config.rotatePromptMsg; div.style.position = 'absolute'; div.style.height = '12px'; div.style.textAlign = 'center'; div.style.left = 0; div.style.right = 0; div.style.top = 0; div.style.bottom = 0; div.style.margin = 'auto'; div.style.display = 'none'; div.style.color = config.rotatePromptFontColor || 'black'; div.id = 'lp-rotate'; core.rotatePromptElm = div; document.body.appendChild(div); if (config.rotatePromptImg) { var img = new Image(); var me = this; img.onload = function() { div.image = img; div.style.height = img.height + 'px'; div.appendChild(img); resizeRotatePrompt(); }; img.src = config.rotatePromptImg; img.style.position = 'relative'; img.style.maxWidth = '100%'; } // Check orientation and display the rotate prompt if required var isLandscape = (core.width / core.height &gt;= 1); core.on('resize', function() { if (window.innerWidth &lt; window.innerHeight &amp;&amp; isLandscape) { core.rotatePromptVisible = true; } else if (window.innerWidth &gt; window.innerHeight &amp;&amp; !isLandscape) { core.rotatePromptVisible = true; } else { core.rotatePromptVisible = false; } // Hide game view core.view.style.display = core.rotatePromptVisible ? 'none' : 'block'; // Show rotate view core.rotatePromptElm.style.backgroundColor = config.rotatePromptBGColor || 'black'; core.rotatePromptElm.style.display = core.rotatePromptVisible ? '-webkit-box' : 'none'; core.rotatePromptElm.style.display = core.rotatePromptVisible ? '-webkit-flex' : 'none'; core.rotatePromptElm.style.display = core.rotatePromptVisible ? '-ms-flexbox' : 'none'; core.rotatePromptElm.style.display = core.rotatePromptVisible ? 'flex' : 'none'; resizeRotatePrompt(); // Pause the game if orientation is not correct if (core.rotatePromptVisible) { core.pause('rotate'); } else { core.resume('rotate'); } }); } core.emit('boot'); core.emit('booted'); } function getVendorAttribute(el, attr) { var uc = attr.ucfirst(); return el[attr] || el['ms' + uc] || el['moz' + uc] || el['webkit' + uc] || el['o' + uc]; } function chooseProperResolution(res) { // Default value if (!res) { return 1; } // Numerical value else if (typeof(res) === 'number') { return res; } // Calculate based on window size and device pixel ratio else { res.values.sort(function(a, b) { return a - b }); var gameRatio = core.width / core.height; var windowRatio = window.innerWidth / window.innerHeight; var scale = res.retina ? window.devicePixelRatio : 1; var result = res.values[0]; for (var i = 0; i &lt; res.values.length; i++) { result = res.values[i]; if ((gameRatio &gt;= windowRatio &amp;&amp; window.innerWidth * scale &lt;= core.width * result) || (gameRatio &lt; windowRatio &amp;&amp; window.innerHeight * scale &lt;= core.height * result)) { break; } } return result; } } function resizeRotatePrompt() { _fullWindowStyle(core.rotatePromptElm); _alignToWindowCenter(core.rotatePromptElm, window.innerWidth, window.innerHeight); // if (core.rotatePromptElm.image) { // if (window.innerHeight &lt; core.rotatePromptElm.image.height) { // core.rotatePromptElm.image.style.height = window.innerHeight + 'px'; // core.rotatePromptElm.image.style.width = 'auto'; // core.rotatePromptElm.style.height = window.innerHeight + 'px'; // core.rotatePromptElm.style.bottom = 'auto'; // } // } } // Update (fixed update implementation from Phaser by @photonstorm) var spiraling = 0; var last = -1; var realDelta = 0; var deltaTime = 0; var desiredFPS = 30; var currentUpdateID = 0; var lastCount = 0; var step = 0; var slowStep = 0; var count = 0; /** * Update and render a scene * @private * @param {Scene} scene Scene to be updated * @param {Number} timestamp Current time stamp */ function tickAndRender(scene, timestamp) { if (last &gt; 0) { realDelta = timestamp - last; } last = timestamp; // If the logic time is spiraling upwards, skip a frame entirely if (spiraling &gt; 1) { // Reset the deltaTime accumulator which will cause all pending dropped frames to be permanently skipped deltaTime = 0; spiraling = 0; renderScene(scene); } else { desiredFPS = scene ? scene.desiredFPS : 30; // Step size step = 1000.0 / desiredFPS; slowStep = step * core.speed; // Accumulate time until the step threshold is met or exceeded... up to a limit of 3 catch-up frames at step intervals deltaTime += Math.max(Math.min(step * 3, realDelta), 0); // Call the game update logic multiple times if necessary to &quot;catch up&quot; with dropped frames // unless forceSingleUpdate is true count = 0; while (deltaTime &gt;= step) { deltaTime -= step; currentUpdateID = count; // Fixed update with the timestep core.delta = step; Timer.update(slowStep); updateScene(scene); count += 1; } // Detect spiraling (if the catch-up loop isn't fast enough, the number of iterations will increase constantly) if (count &gt; lastCount) { spiraling += 1; } else if (count &lt; lastCount) { // Looks like it caught up successfully, reset the spiral alert counter spiraling = 0; } lastCount = count; renderScene(scene); } } function updateScene(scene) { // Switch to new scene if (nextScene) { var pair = nextScene; nextScene = null; // Freeze current scene before switching core.scene &amp;&amp; core.scene._freeze(); core.scene = null; // Create instance of scene if not exist if (!pair.inst) { pair.inst = new pair.ctor(); } // Awake the scene core.scene = pair.inst; core.scene._awake(); // Resize container of the scene resizeFunc(); } // Update current scene if (scene) { scene._update(slowStep, slowStep * 0.001); } } var skipFrameCounter = 0; function renderScene(scene) { skipFrameCounter -= 1; if (skipFrameCounter &lt; 0) { skipFrameCounter = (config.skipFrame || 0); if (scene) { Renderer.render(scene); } } } // Public properties and methods Object.assign(core, { /** * Version text. * @memberof module:engine/core * @type {string} */ version: 'v0.4.1-dev', /** * Main Canvas element. * @memberof module:engine/core * @type {HTMLCanvasElement} */ view: null, /** * Size of game content. * @memberof module:engine/core * @type {Vector} * @default (640, 400) */ size: Vector.create(config.width || 640, config.height || 400), /** * Size of view (devicePixelRatio independent). * @memberof module:engine/core * @type {Vector} */ viewSize: Vector.create(config.width || 640, config.height || 400), /** * Current resize function. * @memberof module:engine/core * @type {function} */ resizeFunc: null, /** * Map of registered scenes. * @memberof module:engine/core * @type {object} */ scenes: {}, /** * Current activated scene. * Note: this may be undefined during switching. * Will be deprecated in future versions. * @memberof module:engine/core * @type {Scene} */ scene: null, /** * Map that contains pause state of all kinds of reasons. * See {@link core.pause} for more information. * @memberof module:engine/core * @type {object} */ pauses: {}, /** * Global time speed, whose value is between 0 and 1. * @memberof module:engine/core * @type {number} * @default 1 */ speed: 1, /** * Delta time since last **update** (in milliseconds). * This can be useful for time based updating. * @memberof module:engine/core * @type {number} */ delta: 0, /** * Rotate prompt element for mobile devices. * @memberof module:engine/core * @type {HTMLElement} */ rotatePromptElm: null, /** * Whether the rotate prompt is visible. * @memberof module:engine/core * @type {boolean} */ rotatePromptVisible: false, /** * Register a new scene class. * @memberof module:engine/core * * @example * import core from 'engine/core'; * class MyScene extends Scene {} * core.addScene('MyScene', MyScene); * * @param {string} name Name of this scene. * @param {function} ctor Constructor of the scene. */ addScene: function addScene(name, ctor) { if (core.scenes[name]) { console.log('Scene [' + name + '] is already defined!'); return; } var pair = { ctor: ctor, inst: null }; core.scenes[name] = pair; }, /** * Switch to a scene. * @memberof module:engine/core * @param {string} name Name of the target scene. */ setScene: function setScene(name) { var pair = core.scenes[name]; if (!pair) { console.log('Scene [' + name + '] is not defined!'); return; } nextScene = pair; }, /** * Entrance of the game, set the first scene to boot with. * Note: it's recommend to set the first scene to `Loading` or * your customized loading scene, otherwise the assets won't get load. * * Simply use `core.start` instead if you don't want to start * from a custom loading scene. * * @example * // In the `game/main` module * import core from 'engine/core'; * core.startWithScene('MyCustomLoading'); * // or simply use the default loading scene * core.start(); * * @memberof module:engine/core * @param {string} sceneName Name of the start scene */ startWithScene: function startWithScene(sceneName) { core.setScene(sceneName); window.addEventListener('load', boot, false); document.addEventListener('DOMContentLoaded', boot, false); }, /** * Start with `Loading` scene. * @memberof module:engine/core */ start: function start() { core.startWithScene('Loading'); }, /** * Pause the engine with a reason. * @memberof module:engine/core * * @example * import core from 'engine/core'; * // Pause when ad is playing * core.pause('ad'); * // And resume after the ad finished * core.resume('ad'); * * @param {string} reason The reason to pause, you have to pass * the same reason when resume from this * pause. */ pause: function pause(reasonP) { var i, reason = reasonP || 'untitled', alreadyPaused = false; for (i in core.pauses) { if (!core.pauses.hasOwnProperty(i)) continue; // Do not pause again if game is paused by other reasons if (core.pauses[i]) { alreadyPaused = true; break; } } core.pauses[reason] = true; if (!alreadyPaused) { core.emit('pause', reason); } }, /** * Unpause the engine. * @memberof module:engine/core * @param {string} reasonP Resume from pause tagged with this reason * @param {boolean} force Whether force to resume */ resume: function resume(reasonP, force) { var i, reason = reasonP || 'untitled'; if (force) { // Resume everything for (i in core.pauses) { if (!core.pauses.hasOwnProperty(i)) continue; core.pauses[i] = false; } core.emit('resume'); } else if (typeof(core.pauses[reason]) === 'boolean') { core.pauses[reason] = false; for (i in core.pauses) { if (!core.pauses.hasOwnProperty(i)) continue; // Do not resume if game is still paused by other reasons if (core.pauses[i]) { return; } } core.emit('resume', reason); } }, }); /** * Width of the game. * Should keep the same to `config` settings. * @memberof module:engine/core * @type {number} * @readonly */ Object.defineProperty(core, 'width', { get: function() { return this.size.x; }, }); /** * Height of the game. * Should keep the same to `config` settings. * @memberof module:engine/core * @type {number} * @readonly */ Object.defineProperty(core, 'height', { get: function() { return this.size.y; }, }); /** * Width of the game view, `devicePixelRatio` is not take into account. * @memberof module:engine/core * @type {number} * @readonly */ Object.defineProperty(core, 'viewWidth', { get: function() { return this.viewSize.x; }, }); /** * Height of the game view, `devicePixelRatio` is not take into account. * @memberof module:engine/core * @type {number} * @readonly */ Object.defineProperty(core, 'viewHeight', { get: function() { return this.viewSize.y; }, }); /** * Whether the game is currently paused by any reason. * @memberof module:engine/core * @type {boolean} * @readonly */ Object.defineProperty(core, 'paused', { get: function() { // Paused by any reason? for (var i in core.pauses) { if (core.pauses[i]) { return true; } } // Totally unpaused return false; }, }); // Resize functions var windowSize = { x: 1, y: 1 }; var result, container; function _letterBoxResize(first) { // Update sizes windowSize.x = window.innerWidth; windowSize.y = window.innerHeight; // Use inner box scaling function to calculate correct size result = resize.innerBoxResize(windowSize, core.viewSize); // Resize the renderer once first &amp;&amp; Renderer.resize(core.viewSize.x, core.viewSize.y); // Resize the view core.view.style.width = (core.viewSize.x * result.scale) + 'px'; core.view.style.height = (core.viewSize.y * result.scale) + 'px'; _alignToWindowCenter(core.view, core.viewSize.x * result.scale, core.viewSize.y * result.scale); // Broadcast resize events core.emit('resize', core.viewSize.x, core.viewSize.y); } function _cropResize() { // Update sizes core.viewSize.set(window.innerWidth, window.innerHeight); // Resize the renderer Renderer.resize(core.viewSize.x, core.viewSize.y); _fullWindowStyle(core.view); // Broadcast resize events core.emit('resize', core.viewSize.x, core.viewSize.y); } function _scaleInnerResize() { // Update sizes core.viewSize.set(window.innerWidth, window.innerHeight); // Resize the renderer Renderer.resize(core.viewSize.x, core.viewSize.y); // Resize container of current scene if (core.scene) { container = core.scene.stage; result = resize.innerBoxResize(core.viewSize, core.size); container.scale.set(result.scale); container.position.set(result.left, result.top); } _fullWindowStyle(core.view); // Broadcast resize events core.emit('resize', core.viewSize.x, core.viewSize.y); } function _scaleOuterResize() { // Update sizes core.viewSize.set(window.innerWidth, window.innerHeight); // Resize the renderer Renderer.resize(core.viewSize.x, core.viewSize.y); // Resize container of current scene if (core.scene) { container = core.scene.stage; result = resize.outerBoxResize(core.viewSize, core.size); container.scale.set(result.scale); container.position.set(result.left, result.top); } _fullWindowStyle(core.view); // Broadcast resize events core.emit('resize', core.viewSize.x, core.viewSize.y); } function _neverResize() {} // CSS helpers function _alignToWindowCenter(el, w, h) { el.style.position = 'absolute'; el.style.left = '50%'; el.style.top = '50%'; el.style.margin = '-' + Math.floor(h / 2) + 'px 0 0 -' + Math.floor(w / 2) + 'px'; } function _fullWindowStyle(el) { el.style.position = 'absolute'; el.style.left = '0'; el.style.top = '0'; el.style.right = '0'; el.style.bottom = '0'; el.style.width = '100%'; el.style.height = '100%'; } function _noPageScroll() { document.ontouchmove = function(event) { event.preventDefault(); } } /** * Engine core that manages game loop and resize functionality. * @exports engine/core * * @requires module:engine/polyfill * @requires module:engine/eventemitter3 * @requires module:engine/renderer * @requires module:engine/timer * @requires module:engine/vector * @requires module:engine/resize * @requires module:engine/device */ module.exports = core; × Search results Close Made with ♥ by Sean Bohan "},"device.js.html":{"id":"device.js.html","title":"Source: device.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: device.js function fetchDeviceInfo() { var device = {}; var ua = navigator.userAgent; // Facebook mobile app's integrated browser adds a bunch of strings that // match everything. Strip it out if it exists. var tmp = ua.split('[FBAN'); if (typeof tmp[1] !== 'undefined') { ua = tmp[0]; /** * Is running inside of Facebook? * @memberof module:engine/device * @type {boolean} */ device.facebook = true; } // Twitter mobile app's integrated browser on iPad adds a &quot;Twitter for // iPhone&quot; string. Same probable happens on other tablet platforms. // This will confuse detection so strip it out if it exists. tmp = ua.split('Twitter'); if (typeof tmp[1] !== 'undefined') { ua = tmp[0]; /** * Is running inside of Twitter? * @memberof module:engine/device * @type {boolean} */ device.twitter = true; } // Desktop /** * Is running on Linux? * @memberof module:engine/device * @type {boolean} */ device.linux = /Linux/.test(ua); /** * Is running on MacOSX? * @memberof module:engine/device * @type {boolean} */ device.macOS = /Mac OS/.test(ua); /** * Is running on Windows? * @memberof module:engine/device * @type {boolean} */ device.windows = /Windows/.test(ua); // - Internet Explorer /** * Is running on IE9 browser? * @memberof module:engine/device * @type {boolean} */ device.ie9 = /MSIE 9/i.test(ua); /** * Is running on IE10 browser? * @memberof module:engine/device * @type {boolean} */ device.ie10 = /MSIE 10/i.test(ua); /** * Is running on IE11 browser? * @memberof module:engine/device * @type {boolean} */ device.ie11 = /rv:11.0/i.test(ua); /** * Is running on IE browser? * @memberof module:engine/device * @type {boolean} */ device.ie = device.ie10 || device.ie11 || device.ie9; // Mobile // - iPod /** * Is running on an iPod? * @memberof module:engine/device * @type {boolean} */ device.iPod = /iPod/i.test(ua); // - iPhone /** * Is running on an iPhone? * @memberof module:engine/device * @type {boolean} */ device.iPhone = /iPhone/i.test(ua); /** * Is running on an iPhone4? * @memberof module:engine/device * @type {boolean} */ device.iPhone4 = (device.iPhone &amp;&amp; device.pixelRatio === 2 &amp;&amp; device.screen.height === 920); /** * Is running on an iPhone5? * @memberof module:engine/device * @type {boolean} */ device.iPhone5 = (device.iPhone &amp;&amp; device.pixelRatio === 2 &amp;&amp; device.screen.height === 1096); // - iPad /** * Is running on an iPad? * @memberof module:engine/device * @type {boolean} */ device.iPad = /iPad/i.test(ua); /** * Is running on a retina iPad? * @memberof module:engine/device * @type {boolean} */ device.iPadRetina = (device.iPad &amp;&amp; device.pixelRatio === 2); // - iOS /** * Is running on iOS system? * @memberof module:engine/device * @type {boolean} */ device.iOS = device.iPod || device.iPhone || device.iPad; /** * Is running on iOS 5? * @memberof module:engine/device * @type {boolean} */ device.iOS5 = (device.iOS &amp;&amp; /OS 5/i.test(ua)); /** * Is running on iOS 6? * @memberof module:engine/device * @type {boolean} */ device.iOS6 = (device.iOS &amp;&amp; /OS 6/i.test(ua)); /** * Is running on iOS 7? * @memberof module:engine/device * @type {boolean} */ device.iOS7 = (device.iOS &amp;&amp; /OS 7/i.test(ua)); /** * Is running on iOS 7.1? * @memberof module:engine/device * @type {boolean} */ device.iOS71 = (device.iOS &amp;&amp; /OS 7_1/i.test(ua)); /** * Is running on iOS 8? * @memberof module:engine/device * @type {boolean} */ device.iOS8 = (device.iOS &amp;&amp; /OS 8/i.test(ua)); /** * Is running on iOS 9? * @memberof module:engine/device * @type {boolean} */ device.iOS9 = (device.iOS &amp;&amp; /OS 9/i.test(ua)); // - Android /** * Is running on Android devices? * @memberof module:engine/device * @type {boolean} */ device.android = /Android/.test(ua); /** * Is running on Android tablets? * @memberof module:engine/device * @type {boolean} */ device.androidTablet = /Android/i.test(ua); /** * Is running on Android phones? * @memberof module:engine/device * @type {boolean} */ device.androidPhone = /(?=.*\\bAndroid\\b)(?=.*\\bMobile\\b)/i.test(ua); var androidVer = ua.match(/Android.*AppleWebKit\\/([\\d.]+)/); /** * Is running on old Android stock browser? * @memberof module:engine/device * @type {boolean} */ device.androidStock = !!(androidVer &amp;&amp; androidVer[1] &lt; 537); // - Amazon /** * Is running on Amazon phone? * @memberof module:engine/device * @type {boolean} */ device.amazonPhone = /(?=.*\\bAndroid\\b)(?=.*\\bSD4930UR\\b)/i.test(ua); /** * Is running on Amazon tablet? * @memberof module:engine/device * @type {boolean} */ device.amazonTablet = /(?=.*\\bAndroid\\b)(?=.*\\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\\b)/i.test(ua); // - Windows mobile /** * Is running on Windows phone? * @memberof module:engine/device * @type {boolean} */ device.windowsPhone = /IEMobile/i.test(ua); /** * Is running on Windows tablet? * @memberof module:engine/device * @type {boolean} */ device.windowsTablet = /(?=.*\\bWindows\\b)(?=.*\\bARM\\b)/i.test(ua), // Match 'Windows' AND 'ARM' // - Other /** * Is running on Blackberry? * @memberof module:engine/device * @type {boolean} */ device.blackberry = /BlackBerry/i.test(ua); /** * Is running on Blackberry 10? * @memberof module:engine/device * @type {boolean} */ device.blackberry10 = /BB10/i.test(ua); /** * Is running on mobile Opera browser? * @memberof module:engine/device * @type {boolean} */ device.mobileOpera = /Opera Mini/i.test(ua); /** * Is running on mobile Chrome browser? * @memberof module:engine/device * @type {boolean} */ device.mobileChrome = /(CriOS|Chrome)(?=.*\\bMobile\\b)/i.test(ua); /** * Is running on mobile Firefox browser? * @memberof module:engine/device * @type {boolean} */ device.mobileFirefox = /(?=.*\\bFirefox\\b)(?=.*\\bMobile\\b)/i.test(ua); device.sevenInch = new RegExp( '(?:' + // Non-capturing group 'Nexus 7' + // Nexus 7 '|' + // OR 'BNTV250' + // B&amp;N Nook Tablet 7 inch '|' + // OR 'Kindle Fire' + // Kindle Fire '|' + // OR 'Silk' + // Kindle Fire, Silk Accelerated '|' + // OR 'GT-P1000' + // Galaxy Tab 7 inch ')', // End non-capturing group 'i').test(ua); // Case-insensitive matching // Special devices /** * Is running on crosswalk? * @memberof module:engine/device * @type {boolean} */ device.crosswalk = /Crosswalk/i.test(ua); /** * Is running on CocoonJS? * @memberof module:engine/device * @type {boolean} */ device.cocoonJS = !!navigator.isCocoonJS; /** * Is running on CocoonJS Canvas+ mode? * @memberof module:engine/device * @type {boolean} */ device.cocoonCanvasPlus = /CocoonJS/i.test(navigator.browser); /** * Is running on Ejecta? * @memberof module:engine/device * @type {boolean} */ device.ejecta = /Ejecta/i.test(ua); /** * Is running on WiiU? * @memberof module:engine/device * @type {boolean} */ device.wiiu = /Nintendo WiiU/i.test(ua); // General /** * Is running on tablets? * @memberof module:engine/device * @type {boolean} */ device.tablet = device.iPad || device.androidTablet || device.windowsTablet; /** * Is running on phones? * @memberof module:engine/device * @type {boolean} */ device.phone = device.iPhone || device.androidPhone || device.windowsPhone; /** * Is running on mobile devices? * @memberof module:engine/device * @type {boolean} */ device.mobile = device.iOS || device.androidPhone || device.androidTablet || device.amazonPhone || device.amazonTablet || device.windowsPhone || device.windowsTablet || device.blackberry || device.blackberry10 || device.mobileOpera || device.mobileFirefox || device.mobileChrome || device.sevenInch || device.crosswalk || device.cocoonJS || device.cocoonCanvasPlus || device.ejecta; /** * Is running on desktop devices? * @memberof module:engine/device * @type {boolean} */ device.desktop = (!device.mobile) || device.wiiu; return device; } /** * @exports engine/device */ module.exports = fetchDeviceInfo(); × Search results Close Made with ♥ by Sean Bohan "},"loader.js.html":{"id":"loader.js.html","title":"Source: loader.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: loader.js var EventEmitter = require('engine/eventemitter3'); var ResourceLoader = require('engine/resource-loader'); var config = require('game/config').default; // TODO: add dymanic loading support /** * Assets loader powered by `resource-loader` that can load any kind * of resources. * * Config: * - baseURL: Base url for the assets related to project root, the default is `media`. * * @emits progress * @emits error * @emits complete * * @exports engine/loader * @requires engine/eventemitter3 * @requires engine/resource-loader */ var loader = new EventEmitter(); /** * ResourceLoader constructor * @type {ResourceLoader} */ loader.ResourceLoader = ResourceLoader; Object.assign(loader, { baseURL: 'media', }, config.loader); var assetsQueue = []; var loaders = []; var middlewares = []; var loaderIdx = 0; var loadedCount = 0; /* Whether the first loading is already started */ var started = false; var resourceLoader = null; function next() { loaderIdx += 1; if (loaderIdx &lt; loaders.length) { loaders[loaderIdx].start(next, progress); } else { loader.emit('complete'); } } function progress(res, err) { loadedCount += 1; var assetsLength = 0; for (var i in loaders) { assetsLength += loaders[i].getAssetsLength(); } err &amp;&amp; loader.emit('error', err); loader.emit('progress', loadedCount / assetsLength); } /** * Register a custom loader. * Usually you don't need anything else than `resource-loader`. The main * purpose it to support the {@link module:engine/audio} which uses * `hower` to support audio playback. * * See {@link module:engine/audio} to learn to create a custom loader. * * @param {object} loader */ loader.registerLoader = function registerLoader(loader) { loaders.push(loader); }; /** * Start the loading process * @private */ loader.start = function start() { started = true; if (assetsQueue.length === 0) { loader.emit('complete'); return; } if (!resourceLoader) { resourceLoader = new loader.ResourceLoader(); // Use middlewares for (var m in middlewares) { resourceLoader.use(middlewares[m]()); } // Load assets resourceLoader.add(assetsQueue); // Keep a reference to the resources loader.resources = resourceLoader.resources; // Register it as a loader loader.registerLoader({ start: function(onComplete, onProgress) { var mapper = function mapper(resLoader, res) { onProgress(res, res.error); }; resourceLoader.on('progress', mapper); resourceLoader.load(function() { setTimeout(onComplete, 0); resourceLoader.off('progress', mapper); }); }, getAssetsLength: function() { return Object.keys(resourceLoader.resources).length; }, }); } loaders[loaderIdx].start(next, progress); }; /** * Add assets to be loaded by ResourceLoader instance. * @param {string} url Path of the asset to load(`baseURL` is not included) * @param {string} [key] Key to assign to the asset(it will be the same as `url` if not provided) * @param {string} [settings] Extra settings to pass to `resource-loader` instance. */ loader.addAsset = function addAsset(url, key, settings) { var realURL = loader.baseURL + '/' + url; var resInfo = Object.assign({ url: realURL, key: key || url, }, settings); // Add res info to assets queue before first loading // started. Most assets are going to be loaded from here. if (!started) { assetsQueue.push(resInfo); } // Add res info directly to resource loader // when first loading is already started. else { resourceLoader.add(resInfo); } return loader; }; /** * Add a new `resource-loader` middleware for loading process. * @param {function} fn Middleware creator */ loader.addMiddleware = function addMiddleware(fn) { middlewares.push(fn); }; module.exports = loader; × Search results Close Made with ♥ by Sean Bohan "},"physics_spatial-hash.js.html":{"id":"physics_spatial-hash.js.html","title":"Source: physics/spatial-hash.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: physics/spatial-hash.js /** * Classic Spatial hash implementation * * Originally created by Christer Bystrom * Port and modified by Sean Bohan * * The MIT License (MIT) * * Permission is hereby granted, free of charge, to any person obtaining a copy * of this software and associated documentation files (the &quot;Software&quot;), to deal * in the Software without restriction, including without limitation the rights * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell * copies of the Software, and to permit persons to whom the Software is * furnished to do so, subject to the following conditions: * * The above copyright notice and this permission notice shall be included in * all copies or substantial portions of the Software. * * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN * THE SOFTWARE. * * A spatial hash. For an explanation, see * * http://www.gamedev.net/page/resources/_/technical/game-programming/spatial-hashing-r2697 * * For computational efficiency, the positions are bit-shifted n times. This means * that they are divided by a factor of power of two. This factor is the * only argument to the constructor. */ /** * Default POT setting. * @type {number} * @private */ var DEFAULT_POWER_OF_TWO = 5; function makeKeysFn(shift) { /* obj {physics.Body} */ return function(obj) { var sx = obj._left &gt;&gt; shift, sy = obj._top &gt;&gt; shift, ex = (obj._right) &gt;&gt; shift, ey = (obj._bottom) &gt;&gt; shift, x, y, keys = []; for (y = sy; y &lt;= ey; y++) { for (x = sx; x &lt;= ex; x++) { keys.push('' + x + ':' + y); } } return keys; }; } /** * @class SpatialHash * @constructor * @param {number} power_of_two - how many times the rects should be shifted when hashing. */ function SpatialHash(power_of_two) { if (!power_of_two) { power_of_two = DEFAULT_POWER_OF_TWO; } this.getKeys = makeKeysFn(power_of_two); this.hash = {}; this.list = []; this._lastTotalCleared = 0; } /** * Clear and reset. * @memberof SpatialHash# * @method clear */ SpatialHash.prototype.clear = function() { var key; for (key in this.hash) { if (this.hash[key].length === 0) { delete this.hash[key]; } else { this.hash[key].length = 0; } } this.list.length = 0; }; /** * Get buckets amount. * @memberof SpatialHash# * @method getNumBuckets * @return {number} */ SpatialHash.prototype.getNumBuckets = function() { var key, count = 0; for (key in this.hash) { if (this.hash.hasOwnProperty(key)) { if (this.hash[key].length &gt; 0) { count++; } } } return count; }; /** * Insert an object into the hash * @memberof SpatialHash# * @method insert * @param {object} obj * @param {object} [rect] */ SpatialHash.prototype.insert = function(obj, rect) { var keys = this.getKeys(rect || obj), key, i; this.list.push(obj); for (i = 0; i &lt; keys.length; i++) { key = keys[i]; if (this.hash[key]) { this.hash[key].push(obj); } else { this.hash[key] = [obj]; } } }; /** * Get objects in the same grid of an object * @memberof SpatialHash# * @method retrieve * @param {object} obj * @param {object} [rect] * @return {array} */ SpatialHash.prototype.retrieve = function(obj, rect) { var ret = [], keys, i, key; if (!obj &amp;&amp; !rect) { return this.list; } keys = this.getKeys(rect || obj); for (i = 0; i &lt; keys.length; i++) { key = keys[i]; if (this.hash[key]) { ret = ret.concat(this.hash[key]); } } return ret; }; /** * SpetialHash implementation. * * @see SpatialHash * * @exports engine/physics/spatial-hash */ module.exports = SpatialHash; × Search results Close Made with ♥ by Sean Bohan "},"renderer.js.html":{"id":"renderer.js.html","title":"Source: renderer.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: renderer.js /** * Renderer interface. * * Config: * - webGL: use WebGL or not * - resolution: see `game/config` for more details. * * @interface * @exports engine/renderer */ var Renderer = { /** * Real renderer instance. * @type {*} */ instance: undefined, /** * Resolution of the renderer. * @type {number} * @default 1 */ resolution: 1, /** * Init function should create a renderer instance with settings. * @abstract * @param {number} width Width of the game view * @param {number} height Height of the game view * @param {object} settings Renderer config from `game/config`. */ init: function init(width, height, settings) { console.log('[Warning]: No working renderer!'); }, /** * Resize the renderer. * @abstract * @param {number} w New width * @param {number} h New height */ resize: function resize(w, h) { console.log('[Warning]: Renderer can not be resized!'); }, /** * Render a scene instance. * @abstract * @param {Scene} scene Scene to render. */ render: function render(scene) { console.log('[Warning]: Renderer does not render!'); }, }; module.exports = Renderer; × Search results Close Made with ♥ by Sean Bohan "},"resize.js.html":{"id":"resize.js.html","title":"Source: resize.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: resize.js /** * @module engine/resize */ var pRatio = 1.0, cRatio = 1.0; /** * Calculate how to scale a content to fill its container in `inner-box` mode. * @param {Vector} containerSize Size of container. * @param {Vector} contentSize [description] * @return {object} { left , top , scale } */ module.exports.innerBoxResize = function innerBoxResize(containerSize, contentSize) { pRatio = containerSize.x / containerSize.y; cRatio = contentSize.x / contentSize.y; var result = { left: 0, top: 0, scale: 1, }; if (pRatio &gt; cRatio) { result.scale = containerSize.y / contentSize.y; result.left = (containerSize.x - contentSize.x * result.scale) * 0.5; } else { result.scale = containerSize.x / contentSize.x; result.top = (containerSize.y - contentSize.y * result.scale) * 0.5; } return result; }; /** * Calculate how to scale a content to fill its container in `outer-box` mode. * @param {Vector} containerSize Size of container. * @param {Vector} contentSize [description] * @return {object} { left , top , scale } */ module.exports.outerBoxResize = function outerBoxResize(containerSize, contentSize) { pRatio = containerSize.x / containerSize.y; cRatio = contentSize.x / contentSize.y; var result = { left: 0, top: 0, scale: 1, }; if (pRatio &lt; cRatio) { result.scale = containerSize.y / contentSize.y; result.x = (containerSize.x - contentSize.x * result.scale) * 0.5; } else { result.scale = containerSize.x / contentSize.x; result.y = (containerSize.y - contentSize.y * result.scale) * 0.5; } return result; }; × Search results Close Made with ♥ by Sean Bohan "},"rnd.js.html":{"id":"rnd.js.html","title":"Source: rnd.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: rnd.js /** * An instance of `RandomDataGenerator` is exported as `engine/rnd`. * * @class RandomDataGenerator * @constructor * @param {any[]|string} [seeds] - An array of values to use as the seed, or a generator state (from {#state}). */ function RandomDataGenerator(seeds) { if (seeds === undefined) { seeds = []; } /** * @type {number} * @private */ this.c = 1; /** * @type {number} * @private */ this.s0 = 0; /** * @type {number} * @private */ this.s1 = 0; /** * @type {number} * @private */ this.s2 = 0; if (typeof(seeds) === 'string') { this.state(seeds); } else { this.sow(seeds); } }; Object.assign(RandomDataGenerator.prototype, { /** * Private random helper. * * @method RandomDataGenerator#rnd * @private * @return {number} */ rnd: function rnd() { var t = 2091639 * this.s0 + this.c * 2.3283064365386963e-10; // 2^-32 this.c = t | 0; this.s0 = this.s1; this.s1 = this.s2; this.s2 = t - this.c; return this.s2; }, /** * Reset the seed of the random data generator. * * _Note_: the seed array is only processed up to the first `undefined` (or `null`) value, should such be present. * * @method RandomDataGenerator#sow * @param {any[]} seeds - The array of seeds: the `toString()` of each value is used. */ sow: function sow(seeds) { // Always reset to default seed this.s0 = this.hash(' '); this.s1 = this.hash(this.s0); this.s2 = this.hash(this.s1); this.c = 1; if (!seeds) { return; } // Apply any seeds for (var i = 0; i &lt; seeds.length &amp;&amp; (seeds[i] != null); i++) { var seed = seeds[i]; this.s0 -= this.hash(seed); this.s0 += ~~(this.s0 &lt; 0); this.s1 -= this.hash(seed); this.s1 += ~~(this.s1 &lt; 0); this.s2 -= this.hash(seed); this.s2 += ~~(this.s2 &lt; 0); } }, /** * Internal method that creates a seed hash. * * @method RandomDataGenerator#hash * @private * @param {any} data * @return {number} hashed value. */ hash: function hash(data) { var h, i, n; n = 0xefc8249d; data = data.toString(); for (i = 0; i &lt; data.length; i++) { n += data.charCodeAt(i); h = 0.02519603282416938 * n; n = h &gt;&gt;&gt; 0; h -= n; h *= n; n = h &gt;&gt;&gt; 0; h -= n; n += h * 0x100000000;// 2^32 } return (n &gt;&gt;&gt; 0) * 2.3283064365386963e-10;// 2^-32 }, /** * Returns a random integer between 0 and 2^32. * * @method RandomDataGenerator#integer * @return {number} A random integer between 0 and 2^32. */ integer: function integer() { return this.rnd.apply(this) * 0x100000000;// 2^32 }, /** * Returns a random real number between 0 and 1. * * @method RandomDataGenerator#frac * @return {number} A random real number between 0 and 1. */ frac: function frac() { return this.rnd.apply(this) + (this.rnd.apply(this) * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53 }, /** * Returns a random real number between 0 and 2^32. * * @method RandomDataGenerator#real * @return {number} A random real number between 0 and 2^32. */ real: function real() { return this.integer() + this.frac(); }, /** * Returns a random integer between and including min and max. * * @method RandomDataGenerator#integerInRange * @param {number} min - The minimum value in the range. * @param {number} max - The maximum value in the range. * @return {number} A random number between min and max. */ integerInRange: function integerInRange(min, max) { return Math.floor(this.realInRange(0, max - min + 1) + min); }, /** * Returns a random integer between and including min and max. * This method is an alias for RandomDataGenerator.integerInRange. * * @method RandomDataGenerator#between * @param {number} min - The minimum value in the range. * @param {number} max - The maximum value in the range. * @return {number} A random number between min and max. */ between: function between(min, max) { return this.integerInRange(min, max); }, /** * Returns a random real number between min and max. * * @method RandomDataGenerator#realInRange * @param {number} min - The minimum value in the range. * @param {number} max - The maximum value in the range. * @return {number} A random number between min and max. */ realInRange: function realInRange(min, max) { return this.frac() * (max - min) + min; }, /** * Returns a random real number between -1 and 1. * * @method RandomDataGenerator#normal * @return {number} A random real number between -1 and 1. */ normal: function normal() { return 1 - 2 * this.frac(); }, /** * Returns a valid RFC4122 version4 ID hex string from https://gist.github.com/1308368 * * @method RandomDataGenerator#uuid * @return {string} A valid RFC4122 version4 ID hex string */ uuid: function uuid() { var a = ''; var b = ''; for (b = a = ''; a++ &lt; 36; b +=~a % 5 | a * 3&amp;4 ? (a^15 ? 8^this.frac() * (a^20 ? 16 : 4) : 4).toString(16) : '-') {} return b; }, /** * Returns a random member of `array`. * * @method RandomDataGenerator#pick * @param {Array} ary - An Array to pick a random member of. * @return {any} A random member of the array. */ pick: function pick(ary) { return ary[this.integerInRange(0, ary.length - 1)]; }, /** * Returns a random member of `array`, favoring the earlier entries. * * @method RandomDataGenerator#weightedPick * @param {Array} ary - An Array to pick a random member of. * @return {any} A random member of the array. */ weightedPick: function weightedPick(ary) { return ary[~~(Math.pow(this.frac(), 2) * (ary.length - 1) + 0.5)]; }, /** * Gets or Sets the state of the generator. This allows you to retain the values * that the generator is using between games, i.e. in a game save file. * * To seed this generator with a previously saved state you can pass it as the * `seed` value in your game config, or call this method directly after Phaser has booted. * * Call this method with no parameters to return the current state. * * If providing a state it should match the same format that this method * returns, which is a string with a header `!rnd` followed by the `c`, * `s0`, `s1` and `s2` values respectively, each comma-delimited. * * @method RandomDataGenerator#state * @param {string} [state] - Generator state to be set. * @return {string} The current state of the generator. */ state: function state(state) { if (typeof state === 'string' &amp;&amp; state.match(/^!rnd/)) { state = state.split(','); this.c = parseFloat(state[1]); this.s0 = parseFloat(state[2]); this.s1 = parseFloat(state[3]); this.s2 = parseFloat(state[4]); } return ['!rnd', this.c, this.s0, this.s1, this.s2].join(','); }, }); /** * An extremely useful repeatable random data generator. * * Based on RandomDataGenerator of Phaser engine, by Richard Davey &lt;rich@photonstorm.com&gt; * * The random number genererator is based on the Alea PRNG, but is modified. * - https://github.com/coverslide/node-alea * - https://github.com/nquinlan/better-random-numbers-for-javascript-mirror * - http://baagoe.org/en/wiki/Better_random_numbers_for_javascript (original, perm. 404) * * @see RandomDataGenerator * * @exports engine/rnd */ module.exports = new RandomDataGenerator([(Date.now() * Math.random()).toString()]); × Search results Close Made with ♥ by Sean Bohan "},"scene.js.html":{"id":"scene.js.html","title":"Source: scene.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: scene.js var EventEmitter = require('engine/eventemitter3'); var engine = require('engine/core'); var utils = require('engine/utils'); var config = require('game/config').default; /** * Scene is the main hub for a game. A game made with LesserPanda * is a combination of different scenes(menu, shop, game, game-over .etc). * * @class Scene * @constructor * @extends {EvenetEmitter} */ function Scene() { EventEmitter.call(this); /** * Desired FPS this scene should run * @property {Number} desiredFPS * @default 30 */ this.desiredFPS = config.desiredFPS || 30; /** * @property {Array} updateOrder * @private */ this.updateOrder = []; var i, name, sys; for (i in Scene.updateOrder) { name = Scene.updateOrder[i]; sys = Scene.systems[name]; if (sys) { this.updateOrder.push(name); sys.init &amp;&amp; sys.init(this); } } } Scene.prototype = Object.create(EventEmitter.prototype); Scene.prototype.constructor = Scene; /** * Called before activating this scene. * @protected */ Scene.prototype._awake = function _awake() { for (var i in this.updateOrder) { sys = Scene.systems[this.updateOrder[i]]; sys.awake &amp;&amp; sys.awake(this); } this.emit('awake'); this.awake(); }; /** * Called each single frame once or more. * @protected */ Scene.prototype._update = function _update(deltaMS, deltaSec) { var i, sys; // Pre-update for (i in this.updateOrder) { sys = Scene.systems[this.updateOrder[i]]; sys &amp;&amp; sys.preUpdate &amp;&amp; sys.preUpdate(this, deltaMS, deltaSec); } this.emit('preUpdate', deltaMS, deltaSec); this.preUpdate(deltaMS, deltaSec); // Update for (i in this.updateOrder) { sys = Scene.systems[this.updateOrder[i]]; sys &amp;&amp; sys.update &amp;&amp; sys.update(this, deltaMS, deltaSec); } this.emit('update', deltaMS, deltaSec); this.update(deltaMS, deltaSec); // Post-update for (i in this.updateOrder) { sys = Scene.systems[this.updateOrder[i]]; sys &amp;&amp; sys.postUpdate &amp;&amp; sys.postUpdate(this, deltaMS, deltaSec); } this.emit('postUpdate', deltaMS, deltaSec); this.postUpdate(deltaMS, deltaSec); }; /** * Called before deactivating this scene. * @protected */ Scene.prototype._freeze = function _freeze() { this.emit('freeze'); this.freeze(); var i, sys; for (i in this.updateOrder) { sys = Scene.systems[this.updateOrder[i]]; sys &amp;&amp; sys.freeze &amp;&amp; sys.freeze(this); } }; /** * Awake is called when this scene is activated. * @method awake * @memberof Scene# */ Scene.prototype.awake = function awake() {}; /** * PreUpdate is called at the beginning of each frame * @method preUpdate * @memberof Scene# */ Scene.prototype.preUpdate = function preUpdate() {}; /** * Update is called each frame, right after `preUpdate`. * @method update * @memberof Scene# */ Scene.prototype.update = function update() {}; /** * PostUpdate is called at the end of each frame, right after `update`. * @method postUpdate * @memberof Scene# */ Scene.prototype.postUpdate = function postUpdate() {}; /** * Freeze is called when this scene is deactivated(switched to another one) * @method freeze * @memberof Scene# */ Scene.prototype.freeze = function freeze() {}; /** * System pause callback. * @method pause * @memberof Scene# */ Scene.prototype.pause = function pause() {}; /** * System resume callback. * @method resume * @memberof Scene# */ Scene.prototype.resume = function resume() {}; Object.assign(Scene, { /** * Sub-systems. * @memberof Scene * @type {object} */ systems: {}, /** * Sub-system updating order * @memberof Scene * @type {array} */ updateOrder: [ 'Actor', 'Animation', 'Physics', 'Renderer', ], /** * Register a new sub-system. * @memberOf Scene * @method registerSystem * @param {string} name * @param {object} system */ registerSystem: function registerSystem(name, system) { if (Scene.systems[name]) console.log('Warning: override [' + name + '] system!'); Scene.systems[name] = system; }, }); // Actor system -------------------------------------------- Object.assign(Scene.prototype, { /** * Spawn an Actor to this scene * @method spawnActor * @memberOf Scene# * @param {Actor} actor Actor class * @param {number} x * @param {number} y * @param {string} layerName Name of the layer to add to(key of a PIXI.Container instance in this scene) * @param {object} settings Custom settings * @param {string} [settings.name] Name of this actor * @param {string} [settings.tag] Tag of this actor * @return {Actor} Actor instance */ spawnActor: function spawnActor(actor, x, y, layerName, settings) { var settings_ = settings || {}; if (!this[layerName]) { console.log('Layer ' + layerName + ' does not exist!'); return null; } var a = new actor(settings_).addTo(this, this[layerName]); a.position.set(x, y); this.addActor(a, settings_.tag); if (settings_.name) { a.name = settings_.name; this.namedActors[settings_.name] = a; } return a; }, /** * Add actor to this scene, so its `update()` function gets called every frame. * @method addActor * @memberOf Scene# * @param {Actor} actor Actor you want to add * @param {string} tag Tag of this actor, default is '0' */ addActor: function addActor(actor, tag) { var t = tag || '0'; actor.tag = t; if (!this.actorSystem.actors[t]) { // Create a new actor list this.actorSystem.actors[t] = []; // Active new tag by default this.actorSystem.activeTags.push(t); } if (this.actorSystem.actors[t].indexOf(actor) &lt; 0) { actor.removed = false; this.actorSystem.actors[t].push(actor); } }, /** * Remove actor from scene. * @method removeActor * @memberOf Scene# * @param {Actor} actor */ removeActor: function removeActor(actor) { // Will remove in next frame if (actor) actor.removed = true; // Remove name based reference if (actor.name) { if (this.actorSystem.namedActors[actor.name] === actor) { this.actorSystem.namedActors[actor.name] = null; } } }, /** * Pause actors with a specific tag. * @method pauseActorsTagged * @memberof Scene# * @param {string} tag */ pauseActorsTagged: function pauseActorsTagged(tag) { if (this.actorSystem.actors[tag]) { utils.removeItems(this.actorSystem.activeTags, this.actorSystem.activeTags.indexOf(tag), 1); this.actorSystem.deactiveTags.push(tag); } return this; }, /** * Resume actors with a specific tag. * @method resumeActorsTagged * @memberof Scene# * @param {string} tag */ resumeActorsTagged: function resumeActorsTagged(tag) { if (this.actorSystem.actors[tag]) { utils.removeItems(this.actorSystem.deactiveTags, this.actorSystem.deactiveTags.indexOf(tag), 1); this.actorSystem.activeTags.push(tag); } return this; }, }); Scene.registerSystem('Actor', { init: function init(scene) { /** * Actor system runtime data storage */ scene.actorSystem = { activeTags: ['0'], deactiveTags: [], actors: { '0': [], }, namedActors: {}, }; }, update: function update(scene, deltaMS, deltaSec) { var i, key, actors, actor; for (key in scene.actorSystem.actors) { if (scene.actorSystem.activeTags.indexOf(key) &lt; 0) continue; actors = scene.actorSystem.actors[key]; for (i = 0; i &lt; actors.length; i++) { actor = actors[i]; if (!actor.removed) { if (actor.behaviorList.length &gt; 0) { actor.updateBehaviors(deltaMS, deltaSec); } if (actor.canEverTick) { actor.update(deltaMS, deltaSec); } } if (actor.removed) { utils.removeItems(actors, i--, 1); } } } }, }); /** * @example &lt;captain&gt;Create a new scene class&lt;/captain&gt; * import Scene from 'engine/scene'; * class MyScene extends Scene {} * * @example &lt;captain&gt;Register a new scene&lt;/captain&gt; * import core from 'engine/core'; * core.addScene('MyScene', MyScene); * * @example &lt;captain&gt;Switch to another scene&lt;/captain&gt; * import core from 'engine/core'; * core.setScene('MyScene'); * * @exports engine/scene * @requires engine/eventemitter3 * @requires engine/core * @requires engine/utils */ module.exports = Scene; × Search results Close Made with ♥ by Sean Bohan "},"storage_index.js.html":{"id":"storage_index.js.html","title":"Source: storage/index.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: storage/index.js var storage = require('./storage'); var Data = require('./data'); var PersistentData = require('./persistent-data'); /** * Data class. * @type {Data} */ storage.Data = Data; /** * PersistentData class. * @type {PersistentData} */ storage.PersistentData = PersistentData; /** * Session storage. * @type {Data} */ storage.session = new Data(); /** * Persistent storage. * @type {Data} */ storage.persistent = new PersistentData(); /** * Storage module provides functionalities to manage saving data. There * is a `session` storage for session data store and change event dispatching, * and a `persistent` storage for persistent data store and change event dispatching. * * Config: * - `storage.id`: namespace to save persistent data to * * @module engine/storage * * @requires engine/storage/storage * @requires engine/storage/data * @requires engine/storage/persistent-data */ module.exports = storage; × Search results Close Made with ♥ by Sean Bohan "},"storage_persistent-data.js.html":{"id":"storage_persistent-data.js.html","title":"Source: storage/persistent-data.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: storage/persistent-data.js var Data = require('./data'); var storage = require('./storage'); /** * Persistent data storage, save/load data from `localStorage`. * * @class PersistentData * @constructor * @extends {Data} */ function PersistentData() { Data.call(this); } PersistentData.prototype = Object.create(Data.prototype); PersistentData.prototype.constructor = PersistentData; /** * Save data to localStorage. * @memberof PersistentData * @method save */ PersistentData.prototype.save = function() { storage.set('savedata', this.data); }; /** * Load data from localStorage. * @memberof PersistentData * @method load */ PersistentData.prototype.load = function() { var i, valid, key, value; var data = storage.get('savedata', this.defaultVal); for (i = 0; i &lt; this.keys.length; i++) { key = this.keys[i]; value = data[key]; // Check whether the valus is valid valid = false; if ( (this.defaultVal[key] instanceof Array) &amp;&amp; (value instanceof Array) &amp;&amp; (value.length &gt;= this.defaultVal[key].length) ) { valid = true; } else if ( ((typeof(this.defaultVal[key]) === 'boolean') &amp;&amp; (typeof(value) === 'boolean')) || ((typeof(this.defaultVal[key]) === 'number') &amp;&amp; (typeof(value) === 'number')) || ((typeof(this.defaultVal[key]) === 'string') &amp;&amp; (typeof(value) === 'string')) ) { valid = true; } this.set(key, valid ? data[key] : this.defaultVal[key]); } }; /** * @exports engine/storage/persistent-data * @see PersistentData * * @requires module:engine/storage/storage * @requires module:engine/storage/data */ module.exports = PersistentData; × Search results Close Made with ♥ by Sean Bohan "},"tilemap_index.js.html":{"id":"tilemap_index.js.html","title":"Source: tilemap/index.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: tilemap/index.js var PIXI = require('engine/pixi'); var tilemap = require('./pixi-tilemap'); var filmstrip = require('./filmstrip'); var CollisionLayer = require('./collision-layer'); var tiledConverter = require('./tiled-converter'); /** * Tilemap * * You need a map data and a table of tileset textures to be able to * create a Tilemap instance. * * Map data is defined by an Array of layers. * * Layer defination: * ``` * { * tileset: string * tilesize: number * width: number * height: number * data: array&lt;array&lt;number&gt;&gt; * } * ``` * * Tileset table is used to look up textures of layers. * A simple example would like this: * ``` * { * 'background.png': loader.resources['background.png'].texture, * 'buildings.png': loader.resources['buildings.png'].texture, * } * ``` * * @class Tilemap * @constructor * @param {array&lt;object&gt;} data List of layer definations. * @param {object} tilesets Table of tilesets. * @param {number} [group] Collision group of collision layer(if exists). */ function Tilemap(data, tilesets, group) { PIXI.Container.call(this); this.tilesets = tilesets; this.data = data; this.collisionLayer = null; this.group = group; this.createLayers(); } Tilemap.prototype = Object.create(PIXI.Container.prototype); Tilemap.prototype.constructor = Tilemap; /** * Destroy this tilemap instance and free the memory. * @memberof Tilemap# * @method destroy */ Tilemap.prototype.destroy = function() { this.tilesets = null; this.collisionLayer.destroy(); this.layers.length = 0; PIXI.Container.prototype.destroy.call(this); }; /** * Add this tilemap to a scene. * @memberof Tilemap# * @method addTo * @param {Scene} scene Scene to add to. * @param {PIXI.Container} container Container to add tilemap to. */ Tilemap.prototype.addTo = function(scene, container) { PIXI.Container.prototype.addTo.call(this, container); if (this.collisionLayer) { this.collisionLayer.addTo(scene); } return this; }; /** * Create layers for this tilemap. * @memberof Tilemap# * @private */ Tilemap.prototype.createLayers = function() { var i, layerDef, data, tilesize, tileset, layer, texture, textures; var r, q; for (i = 0; i &lt; this.data.length; i++) { layerDef = this.data[i]; if (layerDef.collision) { this.collisionLayer = new CollisionLayer(layerDef, this.group); } else { tileset = this.tilesets[layerDef.tileset]; data = layerDef.data; tilesize = layerDef.tilesize; textures = filmstrip(tileset, tilesize, tilesize); layer = new tilemap.CompositeRectTileLayer(0, [tileset], true); for (r = 0; r &lt; layerDef.height; r++) { for (q = 0; q &lt; layerDef.width; q++) { if (data[r][q] === 0) continue; texture = textures[data[r][q] - 1]; layer.addRect(0, texture.frame.x, texture.frame.y, q * tilesize, r * tilesize, tilesize, tilesize); this.addChild(layer); } } } } }; /** * Create a Tilemap instance from Tiled JSON file. * * Notice: * since tileset of Tiled maps uses relative path to save, which * can be quite boring sometimes and is not designed to be capable * with this implementation, the parser will simply ignore tileset * data of the map. * * But we still need tileset info to render, so there're some extra * steps you need to follow: * * 1. Only one tileset per layer * 2. Add a custom property &quot;tileset&quot; and set its value to name of the image * * @memberof Tilemap * * @param {JSON} json Map data * @param {object} tilesets Tileset table * @param {number} group Collision group * @return {Tilemap} Tilemap instance */ Tilemap.fromTiledJson = function(json, tilesets, group) { return new Tilemap(tiledConverter(json), tilesets, group); }; /** * Tilemap rendering and collision support. * * @see Tilemap * * @exports engine/tilemap * * @requires engine/pixi * @requires engine/tilemap/pixi-tilemap * @requires engine/tilemap/filmstrip * @requires engine/tilemap/collision-layer * @requires engine/tilemap/tiled-converter */ module.exports = Tilemap; × Search results Close Made with ♥ by Sean Bohan "},"tilemap_filmstrip.js.html":{"id":"tilemap_filmstrip.js.html","title":"Source: tilemap/filmstrip.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: tilemap/filmstrip.js var PIXI = require('engine/pixi'); /** * Create textures for tiles in a tileset. Can also be used to extract * grid based sprite-sheets. * * @exports engine/tilemap/filmstrip * * @requires engine/pixi * * @param {PIXI.Texture} tileset Tileset texture. * @param {number} tileWidth Width of a single tile. * @param {number} tileHeight Height of a single tile. * @return {array&lt;PIXI.Texture&gt;} List of textures. */ module.exports = function filmstrip(tileset, tileWidth, tileHeight) { var strip = []; var w = tileset.width; var h = tileset.height; var crop = tileset.crop; var sheet = tileset.baseTexture; var cols = Math.floor(w / tileWidth); var rows = Math.floor(h / tileHeight); var q = 0, r = 0; for (r = 0; r &lt; rows; r++) { for (q = 0; q &lt; cols; q++) { strip.push(new PIXI.Texture(sheet, new PIXI.Rectangle(q * tileWidth + crop.x, r * tileHeight + crop.y, tileWidth, tileHeight))); } } return strip; }; × Search results Close Made with ♥ by Sean Bohan "},"tilemap_tiled-converter.js.html":{"id":"tilemap_tiled-converter.js.html","title":"Source: tilemap/tiled-converter.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: tilemap/tiled-converter.js var utils = require('./utils'); function normalizeImageTileID(tiles, firstgid) { for (var i = 0; i &lt; tiles.length; i++) { tiles[i] = tiles[i] - firstgid + 1; } return tiles; } function normalizeCollisionTileID(tiles) { for (var i = 0; i &lt; tiles.length; i++) { tiles[i] = (tiles[i] &gt; 0) ? 1 : 0; } return tiles; } function convertLayer(layer, tilesize, firstGIDs) { var collision = layer.name.indexOf('collision') &gt; -1; var tileset, data; if (!collision) { if (!layer.properties || !layer.properties.tileset) { throw 'Tiled converter error: cannot find &quot;tileset&quot; property of layer &quot;' + layer.name + '&quot;'; } tileset = layer.properties.tileset; data = utils.lift(normalizeImageTileID(layer.data, firstGIDs[tileset]), layer.width, layer.height); } else { data = normalizeCollisionTileID(layer.data); } return { tilesize: tilesize, tileset: tileset, width: layer.width, height: layer.height, data: data, collision: collision, }; } /** * Convert a tiled map data into LesserPanda built-in tilemap format. * * @exports engine/tilemap/tiled-converter * @requires engine/tilemap/utils * * @param {object} map Map data. * @return {array&lt;object&gt;} */ module.exports = function(map) { var i, result = []; // Fetch basic informations var tilesize = map.tilewidth; if (map.tilewidth !== map.tileheight) { console.log('Non-square tile is not supported yet!'); } // Parse tileset info var firstGIDs = {}; for (i = 0; i &lt; map.tilesets.length; i++) { firstGIDs[map.tilesets[i].image] = map.tilesets[i].firstgid; } // Parse layers var layer; for (i = 0; i &lt; map.layers.length; i++) { layer = map.layers[i]; if (layer.type === 'objectgroup') { console.log('Object layer is currently not supported!'); } else if (layer.type === 'tilelayer') { result.push(convertLayer(layer, tilesize, firstGIDs)); } } return result; }; × Search results Close Made with ♥ by Sean Bohan "},"tilemap_utils.js.html":{"id":"tilemap_utils.js.html","title":"Source: tilemap/utils.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: tilemap/utils.js /** * Tilemap utilty functions. * * @module engine/tilemap/utils */ /** * Lift an 1D array to 2D. * @param {array&lt;array&gt;} arr 1D array. * @param {number} w How many elements in a row. * @param {number} h How many elements in a column. * @return {array} */ module.exports.lift = function lift(arr, w, h) { var r, q, row, res = new Array(h); for (r = 0; r &lt; h; r++) { row = new Array(w); for (q = 0; q &lt; w; q++) { row[q] = arr[w * r + q]; } res[r] = row; } return res; }; × Search results Close Made with ♥ by Sean Bohan "},"timer.js.html":{"id":"timer.js.html","title":"Source: timer.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: timer.js var Scene = require('engine/scene'); var utils = require('engine/utils'); /** * Timer constructor should not be used directly, use the static methods instead: * * - {@link Timer.later} * - {@link Timer.laterSec} * - {@link Timer.interval} * - {@link Timer.intervalSec} * * @class Timer * * @constructor * @param {number} [ms] */ function Timer(ms) { /** * @type {number} * @private */ this._count = 0; /** * Duration of this timer. * @type {number} * @default 0 */ this.duration = 0; /** * Whether this timer should repeat. * @type {boolean} * @default false */ this.repeat = false; /** * Whether this timer is already removed. * @type {boolean} * @protected * @default false */ this.removed = false; /** * Callback * @type {function} * @private */ this.callback = null; /** * Callback context * @type {object} * @private */ this.callbackCtx = null; this.set(ms); } /** * Set duration for timer. * @method set * @memberof Timer# * @param {number} ms */ Timer.prototype.set = function set(ms) { if (typeof ms !== 'number') { this.duration = 0; } else { this.duration = ms; } return this.reset(); }; /** * Reset timer to current duration. * @method reset * @memberof Timer# */ Timer.prototype.reset = function reset() { this.removed = false; this._count = this.duration; return this; }; /** * Pause timer. * @method pause * @memberof Timer# */ Timer.prototype.pause = function pause() { this.paused = true; return this; }; /** * Resume paused timer. * @method resume * @memberof Timer# */ Timer.prototype.resume = function resume() { this.paused = false; return this; }; /** * Update method that is called by timer system. * @method update * @memberof Timer# * @protected * @param {number} delta Delta time */ Timer.prototype.update = function update(delta) { if (this.removed || this.paused) return; this._count -= delta; if (this._count &lt; 0) { this._count = 0; if (typeof this.callback === 'function') { this.callback.call(this.callbackCtx); } if (this.repeat &amp;&amp; !this.removed) { this.reset(); } else { this.removed = true; } } }; /** * @property {number} elapsed Time elapsed since start. * @readonly */ Object.defineProperty(Timer.prototype, 'elapsed', { get: function() { return this.duration - this._count; }, }); /** * @property {number} left Time left till the end. * @readonly */ Object.defineProperty(Timer.prototype, 'left', { get: function() { return this._count; }, }); /** * Timer instance pool * @type {array&lt;Timer&gt;} * @private */ var pool = []; function createTimer(ms) { var t = pool.pop(); if (!t) { t = new Timer(ms); } else { Timer.call(t, ms); } return t; } function recycleTimer(timer) { pool.push(timer); } // Timer static properties and functions Object.assign(Timer, { /** * Delta since last frame (ms). * @memberof Timer * @type {number} */ delta: 0, /** * A cumulative number represents how long has passed since the * game is launched (in milliseconds). * @memberof Timer * @type {number} */ now: 0, /** * Map of timers * @memberof Timer * @type {object} */ timers: { '0': [], }, activeTags: ['0'], deactiveTags: [], /** * Update timer system. * @memberof Timer * @method update * @protected */ update: function update(delta) { this.delta = delta; this.now += delta; var i, key, timers; for (key in this.timers) { if (this.activeTags.indexOf(key) &lt; 0) continue; timers = this.timers[key]; for (i = 0; i &lt; timers.length; i++) { if (!timers[i].removed) { timers[i].update(delta); } if (timers[i].removed) { recycleTimer(timers[i]); utils.removeItems(timers, i--, 1); } } } }, /** * Create an one-shoot timer. * @memberof Timer * @method later * @param {number} wait Time in milliseconds * @param {function} callback Callback function to run, when timer ends * @param {object} context Context of the callback to be invoked * @param {string} tag Tag of this timer, default is '0' * @return {Timer} */ later: function later(wait, callback, context, tag) { var t = tag || '0'; var timer = createTimer(wait); timer.repeat = false; timer.callback = callback; timer.callbackCtx = context; if (!this.timers[t]) { // Create a new timer list this.timers[t] = []; // Active new tag by default this.activeTags.push(t); } if (this.timers[t].indexOf(timer) &lt; 0) { this.timers[t].push(timer); } return timer; }, /** * Create an one-shoot timer while the time is in seconds instead. * @memberof Timer * @method laterSec * @see Timer.later */ laterSec: function laterSec(wait, callback, context, tag) { this.later(Math.floor(wait * 1000), callback, context, tag); }, /** * Create a repeat timer. * @memberof Timer * @method interval * @param {number} interval Time in milliseconds * @param {function} callback Callback function to run, when timer ends * @param {object} context Context of the callback to be invoked * @param {string} tag Tag of this timer, default is '0' * @return {Timer} */ interval: function interval(interval, callback, context, tag) { var t = tag || '0'; var timer = createTimer(interval); timer.repeat = true; timer.callback = callback; timer.callbackCtx = context; if (!this.timers[t]) { // Create a new timer list this.timers[t] = []; // Active new tag by default this.activeTags.push(t); } if (this.timers[t].indexOf(timer) &lt; 0) { this.timers[t].push(timer); } return timer; }, /** * Create a repeat timer while the time is in seconds instead. * @memberof Timer * @method intervalSec * @see Timer.interval */ intervalSec: function intervalSec(interval, callback, context, tag) { this.later(Math.floor(interval * 1000), callback, context, tag); }, /** * Remove a timer. * @memberof Timer * @method remove * @param {Timer} timer */ remove: function remove(timer) { if (timer) timer.removed = true; }, /** * Pause timers with a specific tag. * @memberof Timer * @method pauseTimersTagged * @param {string} tag */ pauseTimersTagged: function pauseTimersTagged(tag) { if (this.timers[tag]) { utils.removeItems(this.activeTags, this.activeTags.indexOf(tag), 1); this.deactiveTags.push(tag); } return this; }, /** * Resume timers with a specific tag. * @memberof Timer * @method resumeTimersTagged * @param {string} tag */ resumeTimersTagged: function resumeTimersTagged(tag) { if (this.timers[tag]) { utils.removeItems(this.deactiveTags, this.deactiveTags.indexOf(tag), 1); this.activeTags.push(tag); } return this; }, }); /** * @exports engine/timer * @see Timer * * @requires engine/scene * @requires engine/utils */ module.exports = Timer; × Search results Close Made with ♥ by Sean Bohan "},"utils.js.html":{"id":"utils.js.html","title":"Source: utils.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: utils.js /** * Utility functions and constant variables. * Some utils come from [playground] and [supermix] * * @module engine/utils */ // Math /** * PI * 2 * @type {number} */ exports.PI_2 = Math.PI * 2; /** * Half PI * @type {number} */ exports.HALF_PI = Math.PI * 0.5; /** * Force a value within the boundaries by clamping `x` to the range `[a, b]`. * * @param {number} x * @param {number} a * @param {number} b * @return {number} */ exports.clamp = function clamp(x, a, b) { return (x &lt; a) ? a : ((x &gt; b) ? b : x); }; /** * Bring the value between min and max. * * Values larger than `max` are wrapped back to `min` * and vice-versa. * * @param {number} value value to process * @param {number} min lowest valid value * @param {number} max largest valid value * @return {number} result */ exports.wrap = function wrap(value, min, max) { if (value &lt; min) return max + (value % max); if (value &gt;= max) return value % max; return value; }; /** * Bring the value between 0 and 2*PI. * * Valid values for the length of a circle in radians is * 2*PI. * * @param {number} val value to process * @return {number} a value in 0..2*PI interval */ exports.circWrap = function circWrap(val) { return wrap(val, 0, PI_2); }; /** * Converts a hex color number to an [R, G, B] array * * @param hex {number} * @param {number[]} [out=[]] * @return {number[]} An array representing the [R, G, B] of the color. */ exports.hex2rgb = function hex2rgb(hex, out) { out = out || []; out[0] = (hex &gt;&gt; 16 &amp; 0xFF) / 255; out[1] = (hex &gt;&gt; 8 &amp; 0xFF) / 255; out[2] = (hex &amp; 0xFF) / 255; return out; }; /** * Converts a hex color number to a string. * * @param hex {number} * @return {string} The string color. */ exports.hex2string = function hex2string(hex) { hex = hex.toString(16); hex = '000000'.substr(0, 6 - hex.length) + hex; return '#' + hex; }; /** * Converts a color as an [R, G, B] array to a hex number * * @param rgb {number[]} * @return {number} The color number */ exports.rgb2hex = function rgb2hex(rgb) { return ((rgb[0]*255 &lt;&lt; 16) + (rgb[1]*255 &lt;&lt; 8) + rgb[2]*255); }; // Object /** * Merge any number of associative arrays into first. * * All arguments are expected to be associative arrays. * If same key appears multiple times the final value * will come from last argument that contains it. * * @return {object} first argument * * @example * merge({ a: { var_1: 1 } }, { a: { var_1: 2 } }); * // return { a: { var_1: 2 } } */ exports.merge = function merge(a) { var a = 0, b, key, value; for (i = 1; i &lt; arguments.length; i++) { b = arguments[i]; for (key in b) { value = b[key]; if (typeof a[key] !== 'undefined') { if (typeof a[key] === 'object') this.merge(a[key], value); else a[key] = value; } else { a[key] = value; } } } return a; }; // Array /** * Remove items of an arry * * @param {array} arr The target array * @param {number} startIdx The index to begin removing from (inclusive) * @param {number} removeCount How many items to remove */ exports.removeItems = function removeItems(arr, startIdx, removeCount) { var length = arr.length; if (startIdx &gt;= length || removeCount === 0) { return; } removeCount = (startIdx+removeCount &gt; length ? length-startIdx : removeCount); for (var i = startIdx, len = length-removeCount; i &lt; len; ++i) { arr[i] = arr[i + removeCount]; } arr.length = len; }; × Search results Close Made with ♥ by Sean Bohan "},"vector.js.html":{"id":"vector.js.html","title":"Source: vector.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: vector.js /** * Vector instance pool * @private * @static * @type {array&lt;Vector&gt;} */ var pool = []; /** * The Vector object represents a location in a two-dimensional coordinate system, where x represents the horizontal axis and y represents the vertical axis. * Prefer {@link Vector.create} for new instances. * * @class Vector * * @constructor * @param {number} [x=0] Position of the point on the x axis * @param {number} [y=0] Position of the point on the y axis */ function Vector(x, y) { /** * @type {number} */ this.x = x || 0; /** * @type {number} */ this.y = y || ((y !== 0) ? this.x : 0); }; /** * Set vector values. * @method set * @memberof Vector# * @param {number} [x=0] Position of the point on the x axis * @param {number} [y=0] Position of the point on the y axis * @return {Vector} Vector itself for chaining. */ Vector.prototype.set = function set(x, y) { this.x = x || 0; this.y = y || ((y !== 0) ? this.x : 0); return this; }; /** * Clone this vector. * @method clone * @memberof Vector# * @return {Vector} The cloned vector. */ Vector.prototype.clone = function clone() { return Vector.create(this.x, this.y); }; /** * Copy values from another vector. * @method copy * @memberof Vector# * @param {Vector} v Vector to copy from. * @return {Vector} Self for chaining. */ Vector.prototype.copy = function copy(v) { this.x = v.x; this.y = v.y; return this; }; /** * Add to vector values. * @method add * @memberof Vector# * @param {number|Vector} x Number or `Vector` to add to self. * @param {number} [y] Number to add to `y`. * @return {Vector} Self for chaining. */ Vector.prototype.add = function add(x, y) { this.x += x instanceof Vector ? x.x : x; this.y += x instanceof Vector ? x.y : (y || ((y !== 0) ? x : 0)); return this; }; /** * Subtract from vector values. * @method subtract * @memberof Vector# * @param {number|Vector} x Number or `Vector` to subtract from. * @param {number} [y] Number to subtract from `y`. * @return {Vector} Self for chaining. */ Vector.prototype.subtract = function subtract(x, y) { this.x -= x instanceof Vector ? x.x : x; this.y -= x instanceof Vector ? x.y : (y || ((y !== 0) ? x : 0)); return this; }; /** * Multiply self with another vector or 2 numbers. * @method multiply * @memberof Vector# * @param {number|Vector} x Number or `Vector` to multiply. * @param {number} [y] Number to multiply to `y`. * @return {Vector} Self for chaining. */ Vector.prototype.multiply = function multiply(x, y) { this.x *= x instanceof Vector ? x.x : x; this.y *= x instanceof Vector ? x.y : (y || ((y !== 0) ? x : 0)); return this; }; /** * Divide self by another vector or 2 numbers. * @method divide * @memberof Vector# * @param {number|Vector} x Number or `Vector` to divide. * @param {number} [y] Number to divide by. * @return {Vector} Self for chaining. */ Vector.prototype.divide = function divide(x, y) { this.x /= x instanceof Vector ? x.x : x; this.y /= x instanceof Vector ? x.y : y; return this; }; /** * Get distance of two vectors. * @method distance * @memberof Vector# * @param {Vector} vector Target vector to calculate distance from. * @return {number} Distance. */ Vector.prototype.distance = function distance(vector) { var x = vector.x - this.x; var y = vector.y - this.y; return Math.sqrt(x * x + y * y); }; /** * Get squared euclidian distance of two vectors. * @method squaredDistance * @memberof Vector# * @param {Vector} vector Target vector to calculate distance from. * @return {number} Squared distance value. */ Vector.prototype.squaredDistance = function squaredDistance(vector) { var x = vector.x - this.x; var y = vector.y - this.y; return x * x + y * y; }; /** * Get length of vector. * @method length * @memberof Vector# * @return {number} Length of this vector. */ Vector.prototype.length = function length() { return Math.sqrt(this.squaredLength()); }; /** * Get squared length of vector. * @method squaredLength * @memberof Vector# * @return {number} Squared length of this vector. */ Vector.prototype.squaredLength = function squaredLength() { return this.x * this.x + this.y * this.y; }; /** * Dot operation with another vector. * @method dot * @memberof Vector# * @param {Vector} [vector] Vector to dot with. * @return {number} Result of dot operation. */ Vector.prototype.dot = function dot(vector) { if (vector instanceof Vector) return this.x * vector.x + this.y * vector.y; else return this.x * this.x + this.y * this.y; }; /** * Get normalized dot of vector. * @method dotNormalized * @memberof Vector# * @param {Vector} [vector] Vector to dot with * @return {number} Result of the dot operation. */ Vector.prototype.dotNormalized = function dotNormalized(vector) { var len1 = this.length(); var x1 = this.x / len1; var y1 = this.y / len1; if (vector instanceof Vector) { var len2 = vector.length(); var x2 = vector.x / len2; var y2 = vector.y / len2; return x1 * x2 + y1 * y2; } else return x1 * x1 + y1 * y1; }; /** * Rotate vector in radians. * @method rotate * @memberof Vector# * @param {number} angle Angle to rotate. * @return {Vector} Self for chaining. */ Vector.prototype.rotate = function rotate(angle) { var c = Math.cos(angle); var s = Math.sin(angle); var x = this.x * c - this.y * s; var y = this.y * c + this.x * s; this.x = x; this.y = y; return this; }; /** * Normalize vector. * @method normalize * @memberof Vector# * @return {Vector} Self for chaining */ Vector.prototype.normalize = function normalize() { var len = this.length(); this.x /= len || 1; this.y /= len || 1; return this; }; /** * Limit vector values. * @method limit * @memberof Vector# * @param {Vector} vector Clamp this vector to a limitation(vector) * @return {Vector} Self for chaining. */ Vector.prototype.limit = function limit(vector) { this.x = this.x.limit(-vector.x, vector.x); this.y = this.y.limit(-vector.y, vector.y); return this; }; /** * Get angle vector angle or angle between two vectors. * @method angle * @memberof Vector# * @param {Vector} [vector] Target vector to calculate with, angle of self is returned when it is not provided. * @return {number} Angle between self and target. */ Vector.prototype.angle = function angle(vector) { if (vector) { return Math.atan2(vector.y - this.y, vector.x - this.x); } else { return Math.atan2(this.y, this.x); } }; /** * Get angle between two vectors from origin. * @method angleFromOrigin * @memberof Vector# * @param {Vector} vector * @return {number} Angle. */ Vector.prototype.angleFromOrigin = function angleFromOrigin(vector) { return Math.atan2(vector.y, vector.x) - Math.atan2(this.y, this.x); }; /** * Round vector values. * @method round * @memberof Vector# * @return {Vector} Self for chaining */ Vector.prototype.round = function round() { this.x = Math.round(this.x); this.y = Math.round(this.y); return this; }; /** * Returns true if the given point is equal to this point * @method equals * @memberof Vector# * @param {Vector} vector Vector to compare to. * @return {boolean} Whether the two vectors are equal */ Vector.prototype.equals = function equals(vector) { return (vector.x === this.x) &amp;&amp; (vector.y === this.y); }; /** * Change this vector to be perpendicular to what it was before. (Effectively * roatates it 90 degrees in a clockwise direction) * @method perp * @memberof Vector# * @return {Vector} Self for chaining. */ Vector.prototype.perp = function perp() { var x = this.x; this.x = this.y; this.y = -x; return this; }; /** * Reverse this vector * @method reverse * @memberof Vector# * @return {Vector} Self for chaining. */ Vector.prototype.reverse = function reverse() { this.x = -this.x; this.y = -this.y; return this; }; /** * Project this vector on to another vector. * @method project * @memberof Vector# * @param {Vector} other The vector to project onto * @return {Vector} Self for chaining. */ Vector.prototype.project = function project(other) { var amt = this.dot(other) / other.squaredLength(); this.x = amt * other.x; this.y = amt * other.y; return this; }; /** * Project this vector onto a vector of unit length. This is slightly more efficient * than `project` when dealing with unit vectors. * @method projectN * @memberof Vector# * @param {Vector} other The unit vector to project onto * @return {Vector} Self for chaining. */ Vector.prototype.projectN = function projectN(other) { var amt = this.dot(other); this.x = amt * other.x; this.y = amt * other.y; return this; }; /** * Reflect this vector on an arbitrary axis. * @method reflect * @memberof Vector# * @param {Vector} axis The vector representing the axis * @return {Vector} Self for chaining. */ Vector.prototype.reflect = function reflect(axis) { var x = this.x; var y = this.y; this.project(axis).multiply(2); this.x -= x; this.y -= y; return this; }; /** * Reflect this vector on an arbitrary axis (represented by a unit vector). This is * slightly more efficient than `reflect` when dealing with an axis that is a unit vector. * @method reflectN * @memberof Vector# * @param {Vector} axis The unit vector representing the axis * @return {Vector} Self for chaining. */ Vector.prototype.reflectN = function reflectN(axis) { var x = this.x; var y = this.y; this.projectN(axis).multiply(2); this.x -= x; this.y -= y; return this; }; /** * Check whether the direction from self to other vector is clockwise. * @method sign * @memberof Vector# * @param {Vector} vector * @return {number} Result (1 = CW, -1 = CCW) */ Vector.prototype.sign = function sign(vector) { return (this.y * vector.x &gt; this.x * vector.y) ? -1 : 1; }; /** * Create a vecotr instance. This is prefered than `new Vector()` since * the instance may come from the pool. * @param {number} [x] Position of the point on the x axis * @param {number} [y] Position of the point on the y axis * @return {Vector} Vector instance */ Vector.create = function create(x, y) { var v = pool.pop(); if (!v) { v = new Vector(x, y); } else { v.set(x, y); } return v; }; /** * Recycle a `Vector` instance into the pool for later use. * @see Vector.create * @param {Vector} vector Vector instance to be recycled. */ Vector.recycle = function recycle(vector) { pool.push(vector); }; /** * @exports engine/vector * @see Vector */ module.exports = Vector; × Search results Close Made with ♥ by Sean Bohan "},"storage_storage.js.html":{"id":"storage_storage.js.html","title":"Source: storage/storage.js","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Source: storage/storage.js var config = require('game/config').default; /** * Local storage wrapper. * No need to create instance, an instance is exported as default. * * @class Storage * @constructor * * @param {object} config Settings from `game/config`. */ function Storage(config) { /** * Namespace to save data to. * @type {string} */ this.id = config.id; /** * Is local storage supported? * @type {boolean} */ this.supported = this._isSupported(); } /** * Set value to local storage. * @memberof Storage# * @method set * @param {string} key * @param {*} value */ Storage.prototype.set = function set(key, value) { if (!this.supported) return false; localStorage.setItem(this.id + '.' + key, this._encode(value)); }; /** * Get key from local storage. * @memberof Storage# * @method get * @param {string} key * @param {*} [defaultValue] * @return {*} value */ Storage.prototype.get = function get(key, defaultValue) { var raw = localStorage.getItem(this.id + '.' + key); if (raw === null) return defaultValue; try { return this._decode(raw); } catch (e) { return raw; } }; /** * Check if a key is in local storage. * @memberof Storage# * @method has * @param {string} key * @return {boolean} */ Storage.prototype.has = function has(key) { return localStorage.getItem(this.id + '.' + key) !== null; }; /** * Remove key from local storage. * @memberof Storage# * @method remove * @param {string} key */ Storage.prototype.remove = function remove(key) { localStorage.removeItem(this.id + '.' + key); }; /** * Reset local storage. This removes ALL keys. * @memberof Storage# * @method reset */ Storage.prototype.reset = function reset() { for (var i = localStorage.length - 1; i &gt;= 0; i--) { var key = localStorage.key(i); if (key.indexOf(this.id + '.') !== -1) localStorage.removeItem(key); } }; /** * @memberof Storage# * @method _encode * @private */ Storage.prototype._encode = function _encode(val) { return JSON.stringify(val); }; /** * @memberof Storage# * @method _decode * @private */ Storage.prototype._decode = function _decode(str) { return JSON.parse(str); }; /** * @memberof Storage# * @method _isSupported * @private */ Storage.prototype._isSupported = function _isSupported() { if (typeof localStorage !== 'object') return false; try { localStorage.setItem('localStorage', 1); localStorage.removeItem('localStorage'); } catch (e) { return false; } return true; }; module.exports = new Storage(Object.assign({ id: 'lpanda-debug', }, config.storage)); × Search results Close Made with ♥ by Sean Bohan "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Modules Classes Actor Analytics Behavior Camera CollisionLayer Data EventEmitter Keyboard Action ActionPlayer Channel Key AABBSolver Body Box Circle Polygon SATSolver World PersistentData RandomDataGenerator Scene SpatialHash Storage Tilemap Timer Tween Vector × Search results Close Made with ♥ by Sean Bohan "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Classes Classes Actor Analytics Behavior Camera CollisionLayer Data EventEmitter Keyboard Action ActionPlayer Channel Key AABBSolver Body Box Circle Polygon SATSolver World PersistentData RandomDataGenerator Scene SpatialHash Storage Tilemap Timer Tween Vector × Search results Close Made with ♥ by Sean Bohan "},"index.html":{"id":"index.html","title":"Index","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector LesserPandaA module based HTML5 game engine designed to be flexible and powerful. FeaturesLesserPanda has a lot of features, and the list is still growing: Super fast Canvas and WebGL rendering powered by PIXI.js. Tilemap rendering. Fixed game loop with customizable FPS and frame skips. Fast and powerful physics solution. Multiple collision detection solution: a fast AABB based engine and a powerful SAT engine that support polygon and detailed overlapping information. Multiply broad phase solution: &quot;Simple&quot; for collision less games and &quot;SpatialHash&quot; for collision heavy ones. Tilemap collision support by compiling collision map into convex polygons in the air. ECS(Entity Component System) like sub-systems. Behaviors bring objects to life with one-line setup. High level Actor classes with both virsuals and physics built-in. Automatically choose the best resolution based on configs. Tag is supported by sub-systems. Mobile friendly. Rotate prompt for mobile devices with just a few configs. ES6 based scripting environment. CSS style can be imported by using standard ES6 module system. Live-reload browsers after any changes are saved. SamplesSamples are moved to its own repo here.Currently the samples are located inside src/game/samples folder, and each is just a simple Scene focusing on one or more particular feature. Document Getting Start Guide at Wiki page. API document A weekly devlog shows what happened to LesserPanda, read them at wiki, it will be updated on each Wednesday. Brief introduction of modules animation provides both common tween animation and Blender like action. audio provides sound playback functions, the basic usage is included in the game/main. pixi contains whole PIXI.js sources. Filters and mesh is disabled by default, you can enable them by uncomment related lines in engine/pixi/index.js. polyfill contains some ES6 polyfills (Object.assign, rAF and Math.sign). resource-loader brings resource loading functionality which is used by PIXI.js and you probably don't need to use it directly. storage provides session and persistent data storage. session and persistent from this module is quite useful but you can also use low level storage. analytics provides some helper functions to work with Google Analytics. camera 2D camera that can follow targets, zoom, rotate and shake. core is the core of lesser-panda, which provides the base functionalities such as &quot;loop&quot; and &quot;resize&quot;. device tells what device the game is currently running. device-patch includes patches to solve issues of specific devices. eventemitter3 is a fast EventEmitter implementation. keyboard emits keyboard events, you need to subscribe to get noticed. loader provides assets loading functon addAsset(path, key, settings) physics provides AABB based collision detection and response. reactive is a wrapper of Kefir.js, which is used for Reactive Programming. renderer is just the base object of renderer, if you import PIXI or canvasquery related renderer instance will be added to this object. resize provides some resize helper functions. rnd is a random number generator. scene exports the Scene class. Scenes should all be sub-classes of it. timer provides timers with callbacks. Use Timer.later or Timer.interval to create instances. utils provides some math functions and helpers. vector provide a Vector class that is used everywhere PIXI.Point is also an alias of it. Behaviors HorizontalMove move objects left/right VerticalMove move objects up/down FourWayMove move objects left/right/up/down AsteroidsMove move like ships of classic Asteroids game Health health, receiveDamage and heal FireBullet let Actors be able to fire bullets AnchorToScreen anchor object to left/right/top/right More behaviors are coming soon. ProgressThere's a Trello board, from which you will see what's coming next.Github issue and milestone maybe better for progress tracking~ ChangeLog0.4.1-dev Add more component factory methods to Actor. Fix inline documents. Add start function to core module as a easy replacement of startWithScene. canvasquery module is removed. Re-design Actor system and make it more powerful yet easier to work with. Re-design Behavior system. 0.4.0 Add a prepare method to Actor which will be called at the end of addTo. Finish rectangle shaped tile collision support. Add simple Tilemap support for both built-in format or Tiled JSON map(some custom properties are required) Add Timer.now to represent time passed since game started. Add top and bottom properties to Camera object. Add width and height properties to physics.Body, which map to shape.width and shape.height. Add high level Actor, SpriteActor, AnimatedActor and PrimitiveActor classes. Add Behavior base class and some simple behaviors. Emit pause and resume events from core. Add resolution config, and renderer will pick the most suited resolution base on your configs. Add Blender/Flash like keyframe based animation. Add SAT based collision solver. Add SpatialHash based broad phase solution for collision heavy games. Change canvas style during resizing for some resize modes. Use bitwise shift to optimise SpatialHash based collision detection, change Body.collisionAgainst to a 32bit integer number while broadPhase is SpatialHash. Add a new device-patch module to solve device specific issues. Add rotate prompt for mobile devices. Save renderer resolution as engine.resolution. [Changes] PIXI.extras.Animation is now renamed as PIXI.extras.AnimatedSprite. [Changes] Huge improve of Animation system(formerly called Timeline), now the tweening of nested properties is supported. [Changes] Deprecate dom resize mode. [Changes] Deprecate Texture.fromAsset method, use loader.resources instead. [Changes] Pass delta time to update methods in both milliseconds and seconds. [Changes] Upgrade PIXI to master/3.0.11 [Changes] Default asset key does not contain baseURL any more. 0.3.4 Upgrade PIXI to master/3.0.10 [Changes] Accept an object as third parameter of loader.addAsset function 0.3.3 Add animation support to boolean and object (instantly changes value at the end of duration, ignore its easing setting). Add animation support to string text (from empty to full content). 0.3.2 Add tag support to Object, Timeline and Timer sub-systems, now it is possible to pause/resume any tagged components. For example you can easily pause the timelines tagged object and keep the ui when game is paused. Emit boot and booted events when engine is started. Upgrade Kefir and add a emitter function to create self emittable streams for convenience. Create session and persistent data manager for easier data saving without touching low-level storage and localStorage. Add &quot;skipFrame&quot; setting to constantly skip render frames, which may be used to increase performance but may also sacrifice the accuracy of input. 0.3.1 Upgrade PIXI to (dev/9d7a393) Upgrade resource-loader Rename base container of Scene to stage instead of container Fixed update support. FPS now can be lock to a constant value Improved PIXI.extras.Animation updating logic Improved Array element removing process Create utils module with useful functions and constants Better pre-defined sub-system updating order, now collision works pretty well with Timelined bodies New component system. The &quot;Object&quot;, &quot;Physics&quot;, &quot;Timeline&quot; and &quot;Renderer&quot; are just predefined sub-systems. Timer is also updated at fixed steps now, but act as a engine-level system instead of Scene Fix camera update error when it's not added to any containers 0.3.0-rc1 Completely module based structure 0.2.1 Add camera shake support. Let Scene emit input events just like what PIXI does. 0.2.0 Add support for module imports/exports, so you do not need to expose everything to global namespaces (like game). Remove Class system due to performance and capabilities. 0.1.0 Update renderer to PIXI.js latest stable version (v3.0.7). LicenseLesserPanda is released under the MIT License, the sameas Panda.js engine. Special Thanks@ekelokorpi for creating the awesome panda.js-engine × Search results Close Made with ♥ by Sean Bohan "},"Actor.html":{"id":"Actor.html","title":"Class: Actor","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Actor Actor Actor new Actor(name) Base object that may contain a PIXI.Container instance(as sprite)and a physics.Body instance(as body). The sprite and body share the same postion and rotation,designed to be easy to use. You can both inherit and use chained method calls to createa custom Actor. Parameters: Name Type Description name string Name of this actor Source: actor.js, line 53 Examples Custom Actor by inherit class MyActor extends Actor { construct() { super(); // Initialize 'sprite' as a Graphics instance this.initGraphics({ shape: 'Box', width: 10, height: 10, color: 0xffffff }) // Initialize physics 'body', and it will automatically setup itself // based on the 'sprite'. .initBody(); } } Custom Actor by chaining // Spawn an Actor instance scene.spawnActor(Actor, 0, 0, 'stage') // Init the 'sprite' as a PIXI.Container instance .initEmpty() // Add a graphics to 'sprite', save ref to it as 'sprBody' .addGraphics({ shape: 'Circle', width: 10, height: 10, color: 0xffffff }, 'sprite', 'sprBody') // Add a sprite to 'sprite', save ref to it as 'sprArm' .addSprite(my_texture, 'sprite', 'sprArm'); Extends EventEmitter Members behaviorList :array Behavior list Type: array Source: actor.js, line 125 behaviors :object Type-behavior map Type: object Source: actor.js, line 131 body :module:engine/physics.Body Component for physics simulation and collision detection or null. Type: module:engine/physics.Body Default Value: null Source: actor.js, line 99 canEverTick :boolean Want this actor to be updated? Type: boolean Default Value: false Source: actor.js, line 85 id :number Type: number Source: actor.js, line 59 layer :PIXI.Container Reference to the container that sprite is added to Type: PIXI.Container Default Value: null Source: actor.js, line 119 name :string Name of this Actor, can be undefined Type: string Source: actor.js, line 65 position :Vector Position Type: Vector Default Value: (0, 0) Source: actor.js, line 106 scene :Scene Reference to the scene that actor is added to Type: Scene Default Value: null Source: actor.js, line 113 sprite :PIXI.Container Component for visual display, can be any sub-classes of PIXI.Cotnainer or null Type: PIXI.Container Default Value: null Source: actor.js, line 92 tag :string Tag for updating Type: string Source: actor.js, line 71 Methods activateBehavior(type) Activate a behavior by its type Parameters: Name Type Description type string Type of the behavior to be activated Source: actor.js, line 556 Returns: Self for chaining Type Actor addAnimatedSprite(settings, parentNode, key) Add an animated sprite instance. Parameters: Name Type Argument Description settings object parentNode string &lt;optional&gt; Which visual node to add to, default is 'sprite'. key string &lt;optional&gt; Which key to assign to. (make it a property of this Actor) Source: actor.js, line 403 Returns: Self for chaining Type Actor addEmpty(parentNode, key) Add an empty visual node instance(PIXI.Container). Parameters: Name Type Argument Description parentNode string &lt;optional&gt; Which visual node to add to, default is 'sprite'. key string &lt;optional&gt; Which key to assign to. (make it a property of this Actor) Source: actor.js, line 244 Returns: Self for chaining Type Actor addGraphics(settings, parentNode, key) Add a graphics instance. Parameters: Name Type Argument Description settings object &lt;optional&gt; Properties Name Type Argument Description shape string &lt;optional&gt; default 'Box' width number &lt;optional&gt; default 8, for 'Box' shapes height number &lt;optional&gt; default 8, for 'Box' shapes radius number &lt;optional&gt; default 8, for 'Circle' shapes points array.&lt;engine/vector&gt; &lt;optional&gt; vertices for 'Polygon' shapes parentNode string &lt;optional&gt; Which visual node to add to, default is 'sprite'. key string &lt;optional&gt; Which key to assign to. (make it a property of this Actor) Source: actor.js, line 333 Returns: Self for chaining Type Actor addListener() Inherited From: EventEmitter#addListener Source: eventemitter3.js, line 250 addSprite(texture, parentNode, key) Add a sprite instance. Parameters: Name Type Argument Description texture PIXI.Texture parentNode string &lt;optional&gt; Which visual node to add to, default is 'sprite'. key string &lt;optional&gt; Which key to assign to. (make it a property of this Actor) Source: actor.js, line 286 Returns: Self for chaining Type Actor addTo(scene, layer) Add to the scene and a container Parameters: Name Type Description scene Scene layer PIXI.Container Source: actor.js, line 166 Returns: Actor itself for chaining Type Actor behave(behavior, settings) Add a behavior to this Actor.Note: the same behavior can only be added ONCE. Parameters: Name Type Description behavior string | Behavior | object Behavior type or constructor or instance settings object Settings for this behavior Source: actor.js, line 510 Returns: Self for chaining Type Actor deactivateBehavior(type) De-activate a behavior by its type Parameters: Name Type Description type string Type of the behavior to be de-activated Source: actor.js, line 572 Returns: Self for chaining Type Actor emit(event) Emit an event to all registered event listeners. Parameters: Name Type Description event string The name of the event. Inherited From: EventEmitter#emit Source: eventemitter3.js, line 67 Returns: Indication if we've emitted an event. Type boolean getBehaviorByType(type) Get a behavior instance by its type Parameters: Name Type Description type string Type of the behavior to be activated Source: actor.js, line 545 Returns: Behavior of the type, return undefined no one exists. Type Behavior initAnimatedSprite(settings) Initialize sprite as AnimatedSprite Parameters: Name Type Description settings object Properties Name Type Description textures array.&lt;PIXI.Texture&gt; anims array.&lt;{name, frames, settings}&gt; Source: actor.js, line 384 Returns: self for chaining Type Actor initBody(settings) Initialize body Parameters: Name Type Description settings object Properties Name Type Argument Description shape string &lt;optional&gt; default 'Box' width number &lt;optional&gt; default 8, for 'Box' shapes height number &lt;optional&gt; default 8, for 'Box' shapes radius number &lt;optional&gt; default 8, for 'Circle' shapes points array.&lt;engine/vector&gt; &lt;optional&gt; vertices for 'Polygon' shapes Source: actor.js, line 439 Returns: self for chaining Type Actor initEmpty() Initialize sprite as an empty visual node(PIXI.Container). Source: actor.js, line 228 Returns: self for chaining Type Actor initGraphics(settings, parentNode, key) Initialize sprite as Graphics. Parameters: Name Type Argument Description settings object &lt;optional&gt; See Actor#initGraphics for details. parentNode string &lt;optional&gt; Which visual node to add to, default is 'sprite'. key string &lt;optional&gt; Which key to assign to. (make it a property of this Actor) Source: actor.js, line 313 Returns: Self for chaining Type Actor self for chaining Type Actor initSprite(texture) Initialize sprite as Sprite. Parameters: Name Type Description texture PIXI.Texture Source: actor.js, line 269 Returns: self for chaining Type Actor listeners(event, exists) Return a list of assigned event listeners. Parameters: Name Type Description event string The events that should be listed. exists boolean We only need to know if there are listeners. Inherited From: EventEmitter#listeners Source: eventemitter3.js, line 43 Returns: Type array | boolean off() Inherited From: EventEmitter#off Source: eventemitter3.js, line 244 on(event, fn, context) Register a new EventListener for the given event. Parameters: Name Type Description event string Name of the event. fn functon Callback function. context Mixed The context of the function. Inherited From: EventEmitter#on Source: eventemitter3.js, line 126 once(event, fn, context) Add an EventListener that's only called once. Parameters: Name Type Description event string Name of the event. fn function Callback function. context Mixed The context of the function. Inherited From: EventEmitter#once Source: eventemitter3.js, line 151 prepare() Will be called by addTo method after the Actor components areproperly added. Source: actor.js, line 190 remove() Remove from current scene and layer container Source: actor.js, line 207 removeAllListeners(event) Remove all listeners or only the listeners for the specified event. Parameters: Name Type Description event string The event want to remove all listeners for. Inherited From: EventEmitter#removeAllListeners Source: eventemitter3.js, line 228 removeListener(event, fn, context, once) Remove event listeners. Parameters: Name Type Description event string The event we want to remove. fn function The listener that we need to find. context Mixed Only remove listeners matching this context. once boolean Only remove once listeners. Inherited From: EventEmitter#removeListener Source: eventemitter3.js, line 176 &lt;protected&gt; update() Update method to be called each frameNothing inside, no need to call super.update Source: actor.js, line 198 × Search results Close Made with ♥ by Sean Bohan "},"Analytics.html":{"id":"Analytics.html","title":"Class: Analytics","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Analytics Analytics Analytics new Analytics() Google Analytics tracking.Note: This class is protected, use the default instance instead. Source: analytics.js, line 23 Example // Add your GA code into `game/config` analytics: { id: 'my-ga-code' } // Import the module:engine/analytics module import analytics from 'engine/analytics'; // Send to the server analytics.send('category', 'action', 'label', 'value'); Methods send(category, action, label, value) Send event to analytics. Parameters: Name Type Argument Description category string action string label string &lt;optional&gt; value string &lt;optional&gt; Source: analytics.js, line 58 × Search results Close Made with ♥ by Sean Bohan "},"Behavior.html":{"id":"Behavior.html","title":"Class: Behavior","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Behavior Behavior Behavior new Behavior() Behavior base class. Source: behavior.js, line 11 Extends EventEmitter Members &lt;static&gt; behaviors :object Behaviors map Type: object Source: behavior.js, line 83 isActive :boolean Whether this behavior is currently activated Type: boolean Source: behavior.js, line 24 target :Actor Target Actor instance Type: Actor Source: behavior.js, line 30 type :string Type of this behavior Type: string Source: behavior.js, line 18 Methods &lt;static&gt; register(type, behv) Register a new type of behavior. Parameters: Name Type Description type string Type of this behavior. behv Behavior | object Behavior sub-class or pure object Source: behavior.js, line 91 activate() Activate this behavior Source: behavior.js, line 57 Returns: Behavior itself for chaining Type Behavior addListener() Inherited From: EventEmitter#addListener Source: eventemitter3.js, line 250 addTo(target) Add to target Parameters: Name Type Description target object Any objects meet this behavior's requirement Source: behavior.js, line 35 Returns: Behavior itself for chaining Type Behavior deactivate() De-activate this behavior Source: behavior.js, line 67 Returns: Behavior itself for chaining Type Behavior emit(event) Emit an event to all registered event listeners. Parameters: Name Type Description event string The name of the event. Inherited From: EventEmitter#emit Source: eventemitter3.js, line 67 Returns: Indication if we've emitted an event. Type boolean listeners(event, exists) Return a list of assigned event listeners. Parameters: Name Type Description event string The events that should be listed. exists boolean We only need to know if there are listeners. Inherited From: EventEmitter#listeners Source: eventemitter3.js, line 43 Returns: Type array | boolean off() Inherited From: EventEmitter#off Source: eventemitter3.js, line 244 on(event, fn, context) Register a new EventListener for the given event. Parameters: Name Type Description event string Name of the event. fn functon Callback function. context Mixed The context of the function. Inherited From: EventEmitter#on Source: eventemitter3.js, line 126 once(event, fn, context) Add an EventListener that's only called once. Parameters: Name Type Description event string Name of the event. fn function Callback function. context Mixed The context of the function. Inherited From: EventEmitter#once Source: eventemitter3.js, line 151 removeAllListeners(event) Remove all listeners or only the listeners for the specified event. Parameters: Name Type Description event string The event want to remove all listeners for. Inherited From: EventEmitter#removeAllListeners Source: eventemitter3.js, line 228 removeListener(event, fn, context, once) Remove event listeners. Parameters: Name Type Description event string The event we want to remove. fn function The listener that we need to find. context Mixed Only remove listeners matching this context. once boolean Only remove once listeners. Inherited From: EventEmitter#removeListener Source: eventemitter3.js, line 176 setup(settings) Setup the behavior Parameters: Name Type Description settings object Source: behavior.js, line 46 Returns: Self for chaining Type Behavior × Search results Close Made with ♥ by Sean Bohan "},"Camera.html":{"id":"Camera.html","title":"Class: Camera","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Camera Camera Camera new Camera() Camera with ability to follow, scale and shake. Source: camera.js, line 13 Members acceleration :Vector Camera acceleration speed. Type: Vector Default Value: (3, 3) Source: camera.js, line 19 anchor :Vector Anchor of the camera, the same as `PIXI.Sprite`` Type: Vector Default Value: (0.5, 0.5) Source: camera.js, line 25 container :PIXI.Container Container that the camera is added to. Type: PIXI.Container Source: camera.js, line 30 isShaking :boolean Whether the camera is currently shaking Type: boolean Default Value: false Source: camera.js, line 36 maxSpeed :number Camera maximum move speed. Type: number Default Value: 200 Source: camera.js, line 42 maxX :null|number Camera position limit (right) Type: null | number Default Value: null Source: camera.js, line 49 maxY :null|number Camera position limit (down) Type: null | number Default Value: null Source: camera.js, line 55 minX :null|number Camera position limit (left) Type: null | number Default Value: null Source: camera.js, line 61 minY :null|number Camera position limit (up) Type: null | number Default Value: null Source: camera.js, line 67 position :Vector Camera position. Type: Vector Default Value: (0, 0) Source: camera.js, line 73 rotation :number Rotation of the camera. Type: number Default Value: 0 Source: camera.js, line 85 rounding :boolean Use rounding on container position. Type: boolean Default Value: false Source: camera.js, line 79 scene :Scene Reference of the scene added to. Type: Scene Source: camera.js, line 90 sensor :object Sensor box Type: object Source: camera.js, line 113 speed :Vector Current speed of camera. Type: Vector Source: camera.js, line 95 target :PIXI.Sprite Sprite, that camera follows. Type: PIXI.Sprite Source: camera.js, line 104 threshold :number Type: number Source: camera.js, line 108 zoom :Vector Camera zoom.(2, 2) =&gt; 2x(0.5, 0.5) =&gt; 0.5x Type: Vector Default Value: (1, 1) Source: camera.js, line 126 Methods addTo(scene, container) Add camera to container. Parameters: Name Type Description scene Scene container PIXI.Container Source: camera.js, line 148 remove() Remove camera from parent container. Source: camera.js, line 356 setPosition() Set position of the camera Source: camera.js, line 190 setTarget(target, lerp) Set target of camera. Parameters: Name Type Description target DisplayObject The object to follow lerp Boolean Whether lerp to target instead of reseting camera position Source: camera.js, line 169 shake(force, duration, count, forward) Shake camera Parameters: Name Type Description force Vector | Number Max shake distance in pixel duration Number How long will the camera shake count Number How many times will the camera shake forward Boolean ONLY shake forward or not Source: camera.js, line 240 &lt;protected&gt; update() Update method Source: camera.js, line 366 × Search results Close Made with ♥ by Sean Bohan "},"CollisionLayer.html":{"id":"CollisionLayer.html","title":"Class: CollisionLayer","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: CollisionLayer CollisionLayer CollisionLayer new CollisionLayer(def, group) CollisionLayer is a specific tile layer, which is used to supportcollision of a tilemap. Parameters: Name Type Description def object Map data. group number Collision group for this layer. Source: tilemap/collision-layer.js, line 73 Methods addTo() Add this layer to a scene. Source: tilemap/collision-layer.js, line 293 destroy() Destroy this layer. Source: tilemap/collision-layer.js, line 281 generateShapes() Generate bodies. Source: tilemap/collision-layer.js, line 89 × Search results Close Made with ♥ by Sean Bohan "},"Data.html":{"id":"Data.html","title":"Class: Data","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Data Data Data new Data() Data storage base class. Provides data define, set and get support. Source: storage/data.js, line 10 Extends EventEmitter Methods addArray(key, defaultVal) Add an array property. Parameters: Name Type Description key string defaultVal array Source: storage/data.js, line 119 Returns: Self for chaining Type Data addBool(key, defaultVal) Add a boolean property. Parameters: Name Type Description key string defaultVal boolean Source: storage/data.js, line 51 Returns: Self for chaining Type Data addFloat(key, defaultVal) Add a float number property. Parameters: Name Type Description key string defaultVal number Source: storage/data.js, line 85 Returns: Self for chaining Type Data addInt(key, defaultVal) Add a integer number property. Parameters: Name Type Description key string defaultVal number Source: storage/data.js, line 68 Returns: Self for chaining Type Data addListener() Inherited From: EventEmitter#addListener Source: eventemitter3.js, line 250 addString(key, defaultVal) Add a string property. Parameters: Name Type Description key string defaultVal string Source: storage/data.js, line 102 Returns: Self for chaining Type Data emit(event) Emit an event to all registered event listeners. Parameters: Name Type Description event string The name of the event. Inherited From: EventEmitter#emit Source: eventemitter3.js, line 67 Returns: Indication if we've emitted an event. Type boolean get(key) Get value of a property Parameters: Name Type Description key string Source: storage/data.js, line 227 getArrayItem(key, idx) Get value of an element of an array property Parameters: Name Type Description key string idx number Source: storage/data.js, line 240 has(key) Check whether this data has a property with a key. Parameters: Name Type Description key string Source: storage/data.js, line 137 Returns: Type boolean listeners(event, exists) Return a list of assigned event listeners. Parameters: Name Type Description event string The events that should be listed. exists boolean We only need to know if there are listeners. Inherited From: EventEmitter#listeners Source: eventemitter3.js, line 43 Returns: Type array | boolean off() Inherited From: EventEmitter#off Source: eventemitter3.js, line 244 on(event, fn, context) Register a new EventListener for the given event. Parameters: Name Type Description event string Name of the event. fn functon Callback function. context Mixed The context of the function. Inherited From: EventEmitter#on Source: eventemitter3.js, line 126 once(event, fn, context) Add an EventListener that's only called once. Parameters: Name Type Description event string Name of the event. fn function Callback function. context Mixed The context of the function. Inherited From: EventEmitter#once Source: eventemitter3.js, line 151 removeAllListeners(event) Remove all listeners or only the listeners for the specified event. Parameters: Name Type Description event string The event want to remove all listeners for. Inherited From: EventEmitter#removeAllListeners Source: eventemitter3.js, line 228 removeListener(event, fn, context, once) Remove event listeners. Parameters: Name Type Description event string The event we want to remove. fn function The listener that we need to find. context Mixed Only remove listeners matching this context. once boolean Only remove once listeners. Inherited From: EventEmitter#removeListener Source: eventemitter3.js, line 176 set(key, value) Set a property by key. Parameters: Name Type Description key string value * Source: storage/data.js, line 148 Returns: Self for chaining Type Data setArrayItem(key, idx, value) Set value of an element of array property Parameters: Name Type Description key string idx number value bool Source: storage/data.js, line 208 Returns: Self for chaining Type Data setBool(key, value) Set a boolean property Parameters: Name Type Description key string value boolean Source: storage/data.js, line 164 Returns: Self for chaining Type Data setFloat(key, value) Set a float number property Parameters: Name Type Description key string value number Source: storage/data.js, line 186 Returns: Self for chaining Type Data setInt(key, value) Set a integer number property Parameters: Name Type Description key string value number Source: storage/data.js, line 175 Returns: Self for chaining Type Data setString(key, value) Set a string property Parameters: Name Type Description key string value string Source: storage/data.js, line 197 Returns: Self for chaining Type Data validKey(key) Check whether a key is valid. Parameters: Name Type Description key string Source: storage/data.js, line 36 Returns: Type boolean × Search results Close Made with ♥ by Sean Bohan "},"EventEmitter.html":{"id":"EventEmitter.html","title":"Class: EventEmitter","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: EventEmitter EventEmitter EventEmitter new EventEmitter() Minimal EventEmitter interface that is molded against the Node.jsEventEmitter interface. Source: eventemitter3.js, line 33 Methods addListener() Source: eventemitter3.js, line 250 emit(event) Emit an event to all registered event listeners. Parameters: Name Type Description event string The name of the event. Source: eventemitter3.js, line 67 Returns: Indication if we've emitted an event. Type boolean listeners(event, exists) Return a list of assigned event listeners. Parameters: Name Type Description event string The events that should be listed. exists boolean We only need to know if there are listeners. Source: eventemitter3.js, line 43 Returns: Type array | boolean off() Source: eventemitter3.js, line 244 on(event, fn, context) Register a new EventListener for the given event. Parameters: Name Type Description event string Name of the event. fn functon Callback function. context Mixed The context of the function. Source: eventemitter3.js, line 126 once(event, fn, context) Add an EventListener that's only called once. Parameters: Name Type Description event string Name of the event. fn function Callback function. context Mixed The context of the function. Source: eventemitter3.js, line 151 removeAllListeners(event) Remove all listeners or only the listeners for the specified event. Parameters: Name Type Description event string The event want to remove all listeners for. Source: eventemitter3.js, line 228 removeListener(event, fn, context, once) Remove event listeners. Parameters: Name Type Description event string The event we want to remove. fn function The listener that we need to find. context Mixed Only remove listeners matching this context. once boolean Only remove once listeners. Source: eventemitter3.js, line 176 × Search results Close Made with ♥ by Sean Bohan "},"Keyboard.html":{"id":"Keyboard.html","title":"Class: Keyboard","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Keyboard Keyboard Keyboard new Keyboard() Source: keyboard.js, line 11 Fires: event:keydown event:keyup Extends EventEmitter Members keys :object List of available keys. Type: object Source: keyboard.js, line 84 Methods addListener() Inherited From: EventEmitter#addListener Source: eventemitter3.js, line 250 down(key) Check if key is pressed down. Parameters: Name Type Description key string Source: keyboard.js, line 27 Returns: Type boolean emit(event) Emit an event to all registered event listeners. Parameters: Name Type Description event string The name of the event. Inherited From: EventEmitter#emit Source: eventemitter3.js, line 67 Returns: Indication if we've emitted an event. Type boolean listeners(event, exists) Return a list of assigned event listeners. Parameters: Name Type Description event string The events that should be listed. exists boolean We only need to know if there are listeners. Inherited From: EventEmitter#listeners Source: eventemitter3.js, line 43 Returns: Type array | boolean off() Inherited From: EventEmitter#off Source: eventemitter3.js, line 244 on(event, fn, context) Register a new EventListener for the given event. Parameters: Name Type Description event string Name of the event. fn functon Callback function. context Mixed The context of the function. Inherited From: EventEmitter#on Source: eventemitter3.js, line 126 once(event, fn, context) Add an EventListener that's only called once. Parameters: Name Type Description event string Name of the event. fn function Callback function. context Mixed The context of the function. Inherited From: EventEmitter#once Source: eventemitter3.js, line 151 removeAllListeners(event) Remove all listeners or only the listeners for the specified event. Parameters: Name Type Description event string The event want to remove all listeners for. Inherited From: EventEmitter#removeAllListeners Source: eventemitter3.js, line 228 removeListener(event, fn, context, once) Remove event listeners. Parameters: Name Type Description event string The event we want to remove. fn function The listener that we need to find. context Mixed Only remove listeners matching this context. once boolean Only remove once listeners. Inherited From: EventEmitter#removeListener Source: eventemitter3.js, line 176 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_actor.html":{"id":"module-engine_actor.html","title":"Module: engine/actor","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/actor Actor is the core object of Lesser Panda, which provides lots ofbenefits such as Behavior support, config based initialise. Source: actor.js, line 617 See: Actor Requires module:engine/eventemitter3 module:engine/vector module:engine/pixi module:engine/physics module:engine/behavior × Search results Close Made with ♥ by Sean Bohan "},"module-engine_analytics.html":{"id":"module-engine_analytics.html","title":"Module: engine/analytics","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/analytics Analytics module makes it easier to work with Google Analytics. An instance of Analytics is already created as the moduleexports. See Analytics for more information. Source: analytics.js, line 95 Requires module:engine/device × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation.html":{"id":"module-engine_animation.html","title":"Module: engine/animation","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/animation Animation system is consist of two powerful sub-systems: Tween : a classic but better tween engine. Action: a Blender/Flash like, keyframe based timeline animation system. Source: animation/index.js, line 1 Requires module:engine/scene module:engine/utils module:engine/animation/tween module:engine/animation/action × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation_action.html":{"id":"module-engine_animation_action.html","title":"Module: engine/animation/action","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/animation/action Action module provides functionalities to create Flash/Blender likekey based animation. Source: animation/action.js, line 1 Requires module:engine/scene module:engine/eventemitter3 module:engine/animation/utils module:engine/animation/easing Classes Action ActionPlayer Channel Key Members &lt;inner&gt; CHANNEL_TYPE :number Type of channels Type: number Properties: Name Type Default Description VALUE number 0 EVENT number 1 Source: animation/action.js, line 27 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation_action-Action.html":{"id":"module-engine_animation_action-Action.html","title":"Class: Action","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Action engine/animation/action~ Action Action new Action(id) Action is a data structure that represents an independentanimation clip. Action.create() is prefered to create a new Action. Parameters: Name Type Description id number Source: animation/action.js, line 181 Members channelMap :object map Type: object Source: animation/action.js, line 201 channels :array.&lt;module:engine/animation/action~Channel&gt; Channel list. Type: array.&lt;module:engine/animation/action~Channel&gt; Source: animation/action.js, line 196 duration :number Duration of this action (time between first and last key). Type: number Source: animation/action.js, line 191 id :number ID of this action Type: number Source: animation/action.js, line 186 Methods &lt;static&gt; create() Create a new action. Source: animation/action.js, line 259 Returns: Type module:engine/animation/action~Action × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation_action-ActionPlayer.html":{"id":"module-engine_animation_action-ActionPlayer.html","title":"Class: ActionPlayer","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: ActionPlayer engine/animation/action~ ActionPlayer ActionPlayer new ActionPlayer(action, target) Action player controls and plays an action defination. Usually you only need to run an action using Scene#runAction. Parameters: Name Type Description action module:engine/animation/action~Action Action to play. target object Target object this action is apply to. Source: animation/action.js, line 273 Members finished :boolean Whether this action is finished Type: boolean Default Value: false Source: animation/action.js, line 300 looped :boolean Loop the action or not Type: boolean Default Value: false Source: animation/action.js, line 307 speed :number Play speed (-1: reverse, 0: stop, 1: forward) Type: number Default Value: 1 Source: animation/action.js, line 286 time :number Current time Type: number Default Value: 0 Source: animation/action.js, line 293 Methods &lt;static&gt; create(action, target) Create a player for actor Parameters: Name Type Description action module:engine/animation/action~Action target object Source: animation/action.js, line 449 Returns: Type module:engine/animation/action~ActionPlayer × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation_action-Channel.html":{"id":"module-engine_animation_action-Channel.html","title":"Class: Channel","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Channel engine/animation/action~ Channel Channel new Channel(path, owner, type) Channel represents a specific path of variable. Say we have anaction that modifies position and two channels will be createdfor that as position.x and position.y. Parameters: Name Type Description path string Path of the target variable. owner Action Which action this channel is in. type CHANNEL_TYPE Type of this channel. Source: animation/action.js, line 76 Members duration :number Time between the first and last key. Type: number Source: animation/action.js, line 111 keys :array.&lt;module:engine/animation/action~Key&gt; Key list. Type: array.&lt;module:engine/animation/action~Key&gt; Source: animation/action.js, line 105 owner :module:engine/animation/action~Action Which action is this channel belongs to Type: module:engine/animation/action~Action Source: animation/action.js, line 81 path :string Full path to the property Type: string Source: animation/action.js, line 87 type :string|number Type of this channel, valid types are: VALUE EVENT Type: string | number Source: animation/action.js, line 99 Methods findKey(time) Find the key at a specific time. Parameters: Name Type Description time number Time to seek for. Source: animation/action.js, line 146 Returns: Will return undefined if no one can be found. Type module:engine/animation/action~Key × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation_action-Key.html":{"id":"module-engine_animation_action-Key.html","title":"Class: Key","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Key engine/animation/action~ Key Key new Key(time, value, easing) A single key of an action. Parameters: Name Type Description time number At which time. value * Value for this key. easing function Easing function. Source: animation/action.js, line 40 Members easing :function Easing of this key. Type: function Source: animation/action.js, line 63 time :number Time of this key Type: number Source: animation/action.js, line 45 value :* Value of this key. Type: * Source: animation/action.js, line 51 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation_easing.html":{"id":"module-engine_animation_easing.html","title":"Module: engine/animation/easing","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/animation/easing Easing and interpolation functions for variable lerping. Source: animation/easing.js, line 1 Members &lt;static&gt; Easing Easing functions. Source: animation/easing.js, line 10 &lt;static&gt; Interpolation Interpolation functions. Source: animation/easing.js, line 207 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation_tween.html":{"id":"module-engine_animation_tween.html","title":"Module: engine/animation/tween","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/animation/tween Classic tween animation.Use Scene#tween to create a new tween and start it immediately. Source: animation/tween.js, line 423 Example // Remember to import `animation` module. import 'engine/animation'; class MyScene extends Scene { awake() { let coin = new PIXI.Sprite(...); this.tween(coin) .wait(1000) .to({ 'position.x': 20, 'position.y': 20, 'scale.x': 1.2, 'scale.y': 1.2, }); } } Requires module:engine/eventemitter3 module:engine/scene module:engine/utils module:engine/animation/utils module:engine/animation/easing × Search results Close Made with ♥ by Sean Bohan "},"module-engine_animation_utils.html":{"id":"module-engine_animation_utils.html","title":"Module: engine/animation/utils","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/animation/utils Utilty functions for animation module. Source: animation/utils.js, line 1 Methods &lt;static&gt; getTargetAndKey(context, fullPath) Get the real target and its property key froma root context and full path of the target property. Parameters: Name Type Description context object Root context that contains the target fullPath string Full path of the target property Source: animation/utils.js, line 13 Returns: [target, key] or undefined if no property matches Type array × Search results Close Made with ♥ by Sean Bohan "},"module-engine_audio.html":{"id":"module-engine_audio.html","title":"Module: engine/audio","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/audio Audio module is a simple wrapper of Howler.js.For more details, see the Howler.js official site. Source: audio/index.js, line 156 Examples Load audio files import audio from 'engine/audio'; // Add audio file with extensions, and give it an `id` for later use. audio.addSound(['bgm.mp3', 'bgm.ogg'], 'bgm'); Play loaded sound file import audio from 'engine/audio'; audio.play('bgm'); // or use the Howler instance directly audio.sounds['bgm'].loop(true).play(); Requires module:engine/eventemitter3 module:engine/core module:engine/loader module:engine/audio/howler.core Members &lt;static&gt; muted :boolean Whether audio is muted. Type: boolean Source: audio/index.js, line 90 &lt;static&gt; sounds :object Sound map Type: object Source: audio/index.js, line 82 Methods &lt;static&gt; addSound(src, id) Add a sound to load Parameters: Name Type Description src array.&lt;string&gt; List of audio files(with different extensions) id stirng Source: audio/index.js, line 28 &lt;static&gt; mute() Mute. Source: audio/index.js, line 95 &lt;static&gt; play(id) Play a specific sound by id. Parameters: Name Type Description id string ID of the sound to play. Source: audio/index.js, line 114 Returns: Howler instance for the sound. Type Howler &lt;static&gt; unmute() Unmute. Source: audio/index.js, line 100 &lt;static&gt; volume() Get/set global audio volume. Source: audio/index.js, line 106 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_behavior.html":{"id":"module-engine_behavior.html","title":"Module: engine/behavior","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/behavior Behavior is just an &quot;interface&quot;, you can inherit from it orsimply create an object with the methods as light-weightbehavior. Source: behavior.js, line 109 Requires module:engine/eventemitter3 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_camera.html":{"id":"module-engine_camera.html","title":"Module: engine/camera","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/camera Source: camera.js, line 439 See: Camera Requires module:engine/core module:engine/vector module:engine/timer module:engine/utils × Search results Close Made with ♥ by Sean Bohan "},"module-engine_core.html":{"id":"module-engine_core.html","title":"Module: engine/core","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/core Engine core that manages game loop and resize functionality. Source: core.js, line 768 Requires module:engine/polyfill module:engine/eventemitter3 module:engine/renderer module:engine/timer module:engine/vector module:engine/resize module:engine/device Members &lt;static&gt; delta :number Delta time since last update (in milliseconds).This can be useful for time based updating. Type: number Source: core.js, line 441 &lt;static&gt; pauses :object Map that contains pause state of all kinds of reasons.See core.pause for more information. Type: object Source: core.js, line 426 &lt;static&gt; resizeFunc :function Current resize function. Type: function Source: core.js, line 403 &lt;static&gt; rotatePromptElm :HTMLElement Rotate prompt element for mobile devices. Type: HTMLElement Source: core.js, line 448 &lt;static&gt; rotatePromptVisible :boolean Whether the rotate prompt is visible. Type: boolean Source: core.js, line 454 &lt;static&gt; scene :Scene Current activated scene.Note: this may be undefined during switching.Will be deprecated in future versions. Type: Scene Source: core.js, line 418 &lt;static&gt; scenes :object Map of registered scenes. Type: object Source: core.js, line 410 &lt;static&gt; size :Vector Size of game content. Type: Vector Default Value: (640, 400) Source: core.js, line 391 &lt;static&gt; speed :number Global time speed, whose value is between 0 and 1. Type: number Default Value: 1 Source: core.js, line 434 &lt;static&gt; version :string Version text. Type: string Source: core.js, line 376 &lt;static&gt; view :HTMLCanvasElement Main Canvas element. Type: HTMLCanvasElement Source: core.js, line 383 &lt;static&gt; viewSize :Vector Size of view (devicePixelRatio independent). Type: Vector Source: core.js, line 397 Methods &lt;static&gt; addScene(name, ctor) Register a new scene class. Parameters: Name Type Description name string Name of this scene. ctor function Constructor of the scene. Source: core.js, line 468 Example import core from 'engine/core'; class MyScene extends Scene {} core.addScene('MyScene', MyScene); &lt;static&gt; pause(reason) Pause the engine with a reason. Parameters: Name Type Description reason string The reason to pause, you have to pass the same reason when resume from this pause. Source: core.js, line 539 Example import core from 'engine/core'; // Pause when ad is playing core.pause('ad'); // And resume after the ad finished core.resume('ad'); &lt;static&gt; resume(reasonP, force) Unpause the engine. Parameters: Name Type Description reasonP string Resume from pause tagged with this reason force boolean Whether force to resume Source: core.js, line 565 &lt;static&gt; setScene(name) Switch to a scene. Parameters: Name Type Description name string Name of the target scene. Source: core.js, line 482 &lt;static&gt; start() Start with Loading scene. Source: core.js, line 520 &lt;static&gt; startWithScene(sceneName) Entrance of the game, set the first scene to boot with.Note: it's recommend to set the first scene to Loading oryour customized loading scene, otherwise the assets won't get load. Simply use core.start instead if you don't want to startfrom a custom loading scene. Parameters: Name Type Description sceneName string Name of the start scene Source: core.js, line 510 Example // In the `game/main` module import core from 'engine/core'; core.startWithScene('MyCustomLoading'); // or simply use the default loading scene core.start(); × Search results Close Made with ♥ by Sean Bohan "},"module-engine_device.html":{"id":"module-engine_device.html","title":"Module: engine/device","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/device Source: device.js, line 361 Members &lt;static&gt; device.amazonPhone :boolean Is running on Amazon phone? Type: boolean Source: device.js, line 197 &lt;static&gt; device.amazonTablet :boolean Is running on Amazon tablet? Type: boolean Source: device.js, line 203 &lt;static&gt; device.android :boolean Is running on Android devices? Type: boolean Source: device.js, line 170 &lt;static&gt; device.androidPhone :boolean Is running on Android phones? Type: boolean Source: device.js, line 182 &lt;static&gt; device.androidStock :boolean Is running on old Android stock browser? Type: boolean Source: device.js, line 189 &lt;static&gt; device.androidTablet :boolean Is running on Android tablets? Type: boolean Source: device.js, line 176 &lt;static&gt; device.blackberry :boolean Is running on Blackberry? Type: boolean Source: device.js, line 225 &lt;static&gt; device.blackberry10 :boolean Is running on Blackberry 10? Type: boolean Source: device.js, line 231 &lt;static&gt; device.cocoonCanvasPlus :boolean Is running on CocoonJS Canvas+ mode? Type: boolean Source: device.js, line 293 &lt;static&gt; device.cocoonJS :boolean Is running on CocoonJS? Type: boolean Source: device.js, line 287 &lt;static&gt; device.crosswalk :boolean Is running on crosswalk? Type: boolean Source: device.js, line 281 &lt;static&gt; device.desktop :boolean Is running on desktop devices? Type: boolean Source: device.js, line 353 &lt;static&gt; device.ejecta :boolean Is running on Ejecta? Type: boolean Source: device.js, line 299 &lt;static&gt; device.facebook :boolean Is running inside of Facebook? Type: boolean Source: device.js, line 16 &lt;static&gt; device.ie :boolean Is running on IE browser? Type: boolean Source: device.js, line 77 &lt;static&gt; device.ie9 :boolean Is running on IE9 browser? Type: boolean Source: device.js, line 59 &lt;static&gt; device.ie10 :boolean Is running on IE10 browser? Type: boolean Source: device.js, line 65 &lt;static&gt; device.ie11 :boolean Is running on IE11 browser? Type: boolean Source: device.js, line 71 &lt;static&gt; device.iOS :boolean Is running on iOS system? Type: boolean Source: device.js, line 126 &lt;static&gt; device.iOS5 :boolean Is running on iOS 5? Type: boolean Source: device.js, line 132 &lt;static&gt; device.iOS6 :boolean Is running on iOS 6? Type: boolean Source: device.js, line 138 &lt;static&gt; device.iOS7 :boolean Is running on iOS 7? Type: boolean Source: device.js, line 144 &lt;static&gt; device.iOS8 :boolean Is running on iOS 8? Type: boolean Source: device.js, line 156 &lt;static&gt; device.iOS9 :boolean Is running on iOS 9? Type: boolean Source: device.js, line 162 &lt;static&gt; device.iOS71 :boolean Is running on iOS 7.1? Type: boolean Source: device.js, line 150 &lt;static&gt; device.iPad :boolean Is running on an iPad? Type: boolean Source: device.js, line 113 &lt;static&gt; device.iPadRetina :boolean Is running on a retina iPad? Type: boolean Source: device.js, line 119 &lt;static&gt; device.iPhone :boolean Is running on an iPhone? Type: boolean Source: device.js, line 94 &lt;static&gt; device.iPhone4 :boolean Is running on an iPhone4? Type: boolean Source: device.js, line 100 &lt;static&gt; device.iPhone5 :boolean Is running on an iPhone5? Type: boolean Source: device.js, line 106 &lt;static&gt; device.iPod :boolean Is running on an iPod? Type: boolean Source: device.js, line 87 &lt;static&gt; device.linux :boolean Is running on Linux? Type: boolean Source: device.js, line 39 &lt;static&gt; device.macOS :boolean Is running on MacOSX? Type: boolean Source: device.js, line 45 &lt;static&gt; device.mobile :boolean Is running on mobile devices? Type: boolean Source: device.js, line 330 &lt;static&gt; device.mobileChrome :boolean Is running on mobile Chrome browser? Type: boolean Source: device.js, line 243 &lt;static&gt; device.mobileFirefox :boolean Is running on mobile Firefox browser? Type: boolean Source: device.js, line 249 &lt;static&gt; device.mobileOpera :boolean Is running on mobile Opera browser? Type: boolean Source: device.js, line 237 &lt;static&gt; device.phone :boolean Is running on phones? Type: boolean Source: device.js, line 321 &lt;static&gt; device.tablet :boolean Is running on tablets? Type: boolean Source: device.js, line 313 &lt;static&gt; device.twitter :boolean Is running inside of Twitter? Type: boolean Source: device.js, line 30 &lt;static&gt; device.wiiu :boolean Is running on WiiU? Type: boolean Source: device.js, line 305 &lt;static&gt; device.windows :boolean Is running on Windows? Type: boolean Source: device.js, line 51 &lt;static&gt; device.windowsPhone :boolean Is running on Windows phone? Type: boolean Source: device.js, line 211 &lt;static&gt; device.windowsTablet :boolean Is running on Windows tablet? Type: boolean Source: device.js, line 217 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_eventemitter3.html":{"id":"module-engine_eventemitter3.html","title":"Module: engine/eventemitter3","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/eventemitter3 Minimal EventEmitter interface that is molded against the Node.jsEventEmitter interface. Source: eventemitter3.js, line 276 See: EventEmitter × Search results Close Made with ♥ by Sean Bohan "},"module-engine_keyboard.html":{"id":"module-engine_keyboard.html","title":"Module: engine/keyboard","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/keyboard Keyboard events and states support.An instance of Keyboard is exported as the default value ofengine/keyboard module. Source: keyboard.js, line 193 See: Keyboard Example import keyboard from 'engine/keyboard'; keyboard.on('keydown', (key) =&gt; { console.log(`key &quot;${key}&quot; is pressed`); }); Requires module:engine/eventemitter3 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_loader.html":{"id":"module-engine_loader.html","title":"Module: engine/loader","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/loader Assets loader powered by resource-loader that can load any kindof resources. Config: baseURL: Base url for the assets related to project root, the default is media. Source: loader.js, line 21 Requires module:engine/eventemitter3 module:engine/resource-loader Members &lt;static&gt; ResourceLoader :ResourceLoader ResourceLoader constructor Type: ResourceLoader Source: loader.js, line 27 Methods &lt;static&gt; addAsset(url, key, settings) Add assets to be loaded by ResourceLoader instance. Parameters: Name Type Argument Description url string Path of the asset to load(baseURL is not included) key string &lt;optional&gt; Key to assign to the asset(it will be the same as url if not provided) settings string &lt;optional&gt; Extra settings to pass to resource-loader instance. Source: loader.js, line 134 &lt;static&gt; addMiddleware(fn) Add a new resource-loader middleware for loading process. Parameters: Name Type Description fn function Middleware creator Source: loader.js, line 158 &lt;static&gt; registerLoader(loader) Register a custom loader.Usually you don't need anything else than resource-loader. The mainpurpose it to support the module:engine/audio which useshower to support audio playback. See module:engine/audio to learn to create a custom loader. Parameters: Name Type Description loader object Source: loader.js, line 78 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics.html":{"id":"module-engine_physics.html","title":"Module: engine/physics","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/physics Simple physics simulation and collision support. Source: physics/index.js, line 1 Requires module:engine/vector module:engine/scene module:engine/utils module:engine/physics/spatial-hash Classes AABBSolver Body Box Circle Polygon SATSolver World Members &lt;static, constant&gt; DOWN :number DOWN direction(used as parameter of collide method, in Simple solver mode) Type: number Source: physics/index.js, line 1686 &lt;static, constant&gt; LEFT :number LEFT direction(used as parameter of collide method, in Simple solver mode) Type: number Source: physics/index.js, line 1692 &lt;static, constant&gt; OVERLAP :number OVERLAP(used as parameter of collide method, in Simple solver mode) Type: number Source: physics/index.js, line 1704 &lt;static, constant&gt; RIGHT :number RIGHT direction(used as parameter of collide method, in Simple solver mode) Type: number Source: physics/index.js, line 1698 &lt;static, constant&gt; UP :number UP direction(used as parameter of collide method, in Simple solver mode) Type: number Source: physics/index.js, line 1680 Methods &lt;inner&gt; Response() Response of a collision.An object representing the result of an intersection. Contains: The two objects participating in the intersection The vector representing the minimum change necessary to extract the first objectfrom the second one (as well as a unit vector in that direction and the magnitudeof the overlap) Whether the first object is entirely inside the second, and vice versa. Source: physics/index.js, line 1066 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics_spatial-hash.html":{"id":"module-engine_physics_spatial-hash.html","title":"Module: engine/physics/spatial-hash","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/physics/spatial-hash SpetialHash implementation. Source: physics/spatial-hash.js, line 163 See: SpatialHash × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics-AABBSolver.html":{"id":"module-engine_physics-AABBSolver.html","title":"Class: AABBSolver","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: AABBSolver engine/physics~ AABBSolver AABBSolver new AABBSolver() AABB collision solver. This collision solver only supportsBox vs Box, Box vs Circle collisions, and rotation is simplyignored. If you want to rotate the body or use Tilemap collisionlayer, use the more advanced SATSolver instead. Set physics.solver to 'AABB' to enable. Source: physics/index.js, line 342 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics-Body.html":{"id":"module-engine_physics-Body.html","title":"Class: Body","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Body engine/physics~ Body Body new Body(properties) Body is the core element of physics module. Parameters: Name Type Argument Description properties object &lt;optional&gt; Settings to merge. Source: physics/index.js, line 507 Examples Create a body import { Body, Box } from 'engine/physics'; // Create a shape first let shape = new Box(20, 20); // Create body instance let body = new Body({ shape: shape, dumping: 0.6, }); Define collision groups import { getGroupMask } from 'engine/physics'; // It is recommend to define once in a module, and import it to use. const GROUPS = { SOLID: getGroupMask(0), PLAYER: getGroupMask(1), TRIGGER: getGroupMask(2), }; Setup collision let bodyA = new Body({ // A is a SOLID body collisionGroup: GROUPS.SOLID, }); let bodyB = new Body({ // B is a player body collisionGroup: GROUPS.PLAYER, // This body will collide with SOLID bodies collideAgainst: [GROUPS.SOLID], // Collision response handler collide: function(other) { // Response to the collision when collide with something SOLID, // which means this will be moved back and won't get through // the SOLID body. if (other.collisionGroup === GROUPS.SOLID) { // When return false here, this body will keep as is. // In this case, player will get through the SOLID body. return true; } }, }); For more complex samples, take a look at the [physics sample code](https://github.com/pixelpicosean/lesser-panda-samples/blob/master/src/game/samples/physics.js). Members anchor :Vector Anchor of the shape. Type: Vector Default Value: (0.5, 0.5) Source: physics/index.js, line 533 collideAgainst :array|number Collision groups that this body collides against.Note: this will be a Number when broadPhase is &quot;SpatialHash&quot;,but will be an Array while using &quot;Simple&quot;. Type: array | number Source: physics/index.js, line 568 collisionGroup :number Body's collision group. Type: number Default Value: null Source: physics/index.js, line 561 damping :number Body's damping. Should be number between 0 and 1. Type: number Default Value: 0 Source: physics/index.js, line 580 force :Vector Body's force. Type: Vector Default Value: 0,0 Source: physics/index.js, line 574 id :number ID of this body. Type: number Source: physics/index.js, line 512 last :Vector Last position of body. Type: Vector Source: physics/index.js, line 538 mass :number Body's mass. Type: number Default Value: 0 Source: physics/index.js, line 555 position :Vector Position of body. Type: Vector Source: physics/index.js, line 527 shape :Box|Circle Body's shape. Type: Box | Circle Source: physics/index.js, line 522 velocity :Vector Body's velocity. Type: Vector Source: physics/index.js, line 543 velocityLimit :Vector Body's maximum velocity. Type: Vector Default Value: 400, 400 Source: physics/index.js, line 549 world :World Body's physic world. Type: World Source: physics/index.js, line 517 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics-Box.html":{"id":"module-engine_physics-Box.html","title":"Class: Box","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Box engine/physics~ Box Box new Box(width, height) Box shape for physic body. Parameters: Name Type Argument Description width number &lt;optional&gt; height number &lt;optional&gt; Source: physics/index.js, line 967 Members height Height of rectangle. Properties: Name Type Description height Number Default Value: 50 Source: physics/index.js, line 979 rotation :number Rotation Type: number Source: physics/index.js, line 985 &lt;constant&gt; type :number Type of this shape, should always be BOX. Type: number Source: physics/index.js, line 992 width Width of rectangle. Properties: Name Type Description width Number Default Value: 50 Source: physics/index.js, line 973 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics-Circle.html":{"id":"module-engine_physics-Circle.html","title":"Class: Circle","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Circle engine/physics~ Circle Circle new Circle(radius) Circle shape for physic body. Parameters: Name Type Argument Description radius number &lt;optional&gt; Source: physics/index.js, line 1015 Members radius Radius of circle. Properties: Name Type Description radius number Default Value: 50 Source: physics/index.js, line 1021 rotation :number Rotation. Type: number Source: physics/index.js, line 1027 &lt;constant&gt; type :number Type of this shape, should always be CIRC. Type: number Source: physics/index.js, line 1034 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics-Polygon.html":{"id":"module-engine_physics-Polygon.html","title":"Class: Polygon","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Polygon engine/physics~ Polygon Polygon new Polygon(points) Polygon collision shape. Parameters: Name Type Description points array.&lt;Vector&gt; Vertices that define the polygon. Source: physics/index.js, line 772 Members height :number Height of this polygon. Type: number Source: physics/index.js, line 782 offset :Vector Offset of the vertices to the center. Type: Vector Source: physics/index.js, line 813 points :array.&lt;Vector&gt; Vertices. Type: array.&lt;Vector&gt; Source: physics/index.js, line 788 width :number Width of this polygon. Type: number Source: physics/index.js, line 777 Methods setOffset(offset) Set the current offset to apply to the points before applying the rotation rotation. Parameters: Name Type Description offset Vector The new offset vector Source: physics/index.js, line 849 Returns: This for chaining Type Polygon × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics-SATSolver.html":{"id":"module-engine_physics-SATSolver.html","title":"Class: SATSolver","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: SATSolver engine/physics~ SATSolver SATSolver new SATSolver() Advanced SAT based collision solver. This solver is the best choice when you want to rotate any body oruse Tilemap collision layer. Fore more realistic cases, you need a REAL rigid body physics enginelike p2.js. Those will be supported in the future(maybe). NOTE: SAT solver currently not support custom anchor, it will ignoreBody#anchor and always treat it as (0.5, 0.5). Set physics.solver to 'SAT' to enable. Source: physics/index.js, line 1139 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_physics-World.html":{"id":"module-engine_physics-World.html","title":"Class: World","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: World engine/physics~ World World new World(x, y) Physics world. Will automatically create one for each scene whenphysics module is imported. Parameters: Name Type Argument Description x number &lt;optional&gt; Gravity x y number &lt;optional&gt; Gravity y Source: physics/index.js, line 81 Members bodies :array List of bodies in world. Type: array Source: physics/index.js, line 108 &lt;protected&gt; collisionChecks :number How many pair of bodies have been checked in this frame Type: number Source: physics/index.js, line 127 gravity Gravity of physics world. Properties: Name Type Description gravity Vector Default Value: 0, 980 Source: physics/index.js, line 87 solver :SATSolver|AABBSolver Collision solver instance. Type: SATSolver | AABBSolver Source: physics/index.js, line 97 tree :SpatialHash Spatial hash instance Type: SpatialHash Source: physics/index.js, line 92 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_renderer.html":{"id":"module-engine_renderer.html","title":"Module: engine/renderer","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/renderer Renderer interface. Config: webGL: use WebGL or not resolution: see game/config for more details. Source: renderer.js, line 11 Members &lt;static&gt; instance :* Real renderer instance. Type: * Source: renderer.js, line 16 &lt;static&gt; resolution :number Resolution of the renderer. Type: number Default Value: 1 Source: renderer.js, line 22 Methods &lt;abstract, static&gt; init(width, height, settings) Init function should create a renderer instance with settings. Parameters: Name Type Description width number Width of the game view height number Height of the game view settings object Renderer config from game/config. Source: renderer.js, line 30 &lt;abstract, static&gt; render(scene) Render a scene instance. Parameters: Name Type Description scene Scene Scene to render. Source: renderer.js, line 47 &lt;abstract, static&gt; resize(w, h) Resize the renderer. Parameters: Name Type Description w number New width h number New height Source: renderer.js, line 39 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_resize.html":{"id":"module-engine_resize.html","title":"Module: engine/resize","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/resize Source: resize.js, line 1 Methods &lt;static&gt; innerBoxResize(containerSize, contentSize) Calculate how to scale a content to fill its container in inner-box mode. Parameters: Name Type Description containerSize Vector Size of container. contentSize Vector [description] Source: resize.js, line 12 Returns: { left , top , scale } Type object &lt;static&gt; outerBoxResize(containerSize, contentSize) Calculate how to scale a content to fill its container in outer-box mode. Parameters: Name Type Description containerSize Vector Size of container. contentSize Vector [description] Source: resize.js, line 35 Returns: { left , top , scale } Type object × Search results Close Made with ♥ by Sean Bohan "},"module-engine_rnd.html":{"id":"module-engine_rnd.html","title":"Module: engine/rnd","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/rnd An extremely useful repeatable random data generator. Based on RandomDataGenerator of Phaser engine, by Richard Davey rich@photonstorm.com The random number genererator is based on the Alea PRNG, but is modified. https://github.com/coverslide/node-alea https://github.com/nquinlan/better-random-numbers-for-javascript-mirror http://baagoe.org/en/wiki/Better_random_numbers_for_javascript (original, perm. 404) Source: rnd.js, line 280 See: RandomDataGenerator × Search results Close Made with ♥ by Sean Bohan "},"module-engine_scene.html":{"id":"module-engine_scene.html","title":"Module: engine/scene","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/scene Source: scene.js, line 353 Examples &lt;captain&gt;Create a new scene class&lt;/captain&gt; import Scene from 'engine/scene'; class MyScene extends Scene {} &lt;captain&gt;Register a new scene&lt;/captain&gt; import core from 'engine/core'; core.addScene('MyScene', MyScene); &lt;captain&gt;Switch to another scene&lt;/captain&gt; import core from 'engine/core'; core.setScene('MyScene'); Requires module:engine/eventemitter3 module:engine/core module:engine/utils × Search results Close Made with ♥ by Sean Bohan "},"module-engine_storage.html":{"id":"module-engine_storage.html","title":"Module: engine/storage","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/storage Storage module provides functionalities to manage saving data. Thereis a session storage for session data store and change event dispatching,and a persistent storage for persistent data store and change event dispatching. Config: storage.id: namespace to save persistent data to Source: storage/index.js, line 28 Requires module:engine/storage/storage module:engine/storage/data module:engine/storage/persistent-data × Search results Close Made with ♥ by Sean Bohan "},"module-engine_storage_data.html":{"id":"module-engine_storage_data.html","title":"Module: engine/storage/data","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/storage/data Source: storage/data.js, line 262 See: Data Requires module:engine/eventemitter3 × Search results Close Made with ♥ by Sean Bohan "},"module-engine_storage_persistent-data.html":{"id":"module-engine_storage_persistent-data.html","title":"Module: engine/storage/persistent-data","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/storage/persistent-data Source: storage/persistent-data.js, line 66 See: PersistentData Requires module:engine/storage/storage module:engine/storage/data × Search results Close Made with ♥ by Sean Bohan "},"module-engine_tilemap.html":{"id":"module-engine_tilemap.html","title":"Module: engine/tilemap","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/tilemap Tilemap rendering and collision support. Source: tilemap/index.js, line 160 See: Tilemap Requires module:engine/pixi module:engine/tilemap/pixi-tilemap module:engine/tilemap/filmstrip module:engine/tilemap/collision-layer module:engine/tilemap/tiled-converter × Search results Close Made with ♥ by Sean Bohan "},"module-engine_tilemap_filmstrip.html":{"id":"module-engine_tilemap_filmstrip.html","title":"Module: engine/tilemap/filmstrip","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/tilemap/filmstrip Create textures for tiles in a tileset. Can also be used to extractgrid based sprite-sheets. Source: tilemap/filmstrip.js, line 16 Requires module:engine/pixi × Search results Close Made with ♥ by Sean Bohan "},"module-engine_tilemap_tiled-converter.html":{"id":"module-engine_tilemap_tiled-converter.html","title":"Module: engine/tilemap/tiled-converter","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/tilemap/tiled-converter Convert a tiled map data into LesserPanda built-in tilemap format. Source: tilemap/tiled-converter.js, line 52 Requires module:engine/tilemap/utils × Search results Close Made with ♥ by Sean Bohan "},"module-engine_tilemap_utils.html":{"id":"module-engine_tilemap_utils.html","title":"Module: engine/tilemap/utils","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/tilemap/utils Tilemap utilty functions. Source: tilemap/utils.js, line 1 Methods &lt;static&gt; lift(arr, w, h) Lift an 1D array to 2D. Parameters: Name Type Description arr array.&lt;array&gt; 1D array. w number How many elements in a row. h number How many elements in a column. Source: tilemap/utils.js, line 14 Returns: Type array × Search results Close Made with ♥ by Sean Bohan "},"module-engine_timer.html":{"id":"module-engine_timer.html","title":"Module: engine/timer","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/timer Source: timer.js, line 361 See: Timer Requires module:engine/scene module:engine/utils × Search results Close Made with ♥ by Sean Bohan "},"module-engine_utils.html":{"id":"module-engine_utils.html","title":"Module: engine/utils","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/utils Utility functions and constant variables.Some utils come from [playground] and [supermix] Source: utils.js, line 1 Members &lt;static&gt; HALF_PI :number Half PI Type: number Source: utils.js, line 20 &lt;static&gt; PI_2 :number PI * 2 Type: number Source: utils.js, line 15 Methods &lt;static&gt; circWrap(val) Bring the value between 0 and 2*PI. Valid values for the length of a circle in radians is2*PI. Parameters: Name Type Description val number value to process Source: utils.js, line 60 Returns: a value in 0..2*PI interval Type number &lt;static&gt; clamp(x, a, b) Force a value within the boundaries by clamping x to the range [a, b]. Parameters: Name Type Description x number a number b number Source: utils.js, line 30 Returns: Type number &lt;static&gt; hex2rgb(hex, out) Converts a hex color number to an [R, G, B] array Parameters: Name Type Argument Default Description hex number out Array.&lt;number&gt; &lt;optional&gt; [] Source: utils.js, line 71 Returns: An array representing the [R, G, B] of the color. Type Array.&lt;number&gt; &lt;static&gt; hex2string(hex) Converts a hex color number to a string. Parameters: Name Type Description hex number Source: utils.js, line 87 Returns: The string color. Type string &lt;static&gt; merge() Merge any number of associative arrays into first. All arguments are expected to be associative arrays.If same key appears multiple times the final valuewill come from last argument that contains it. Source: utils.js, line 119 Returns: first argument Type object Example merge({ a: { var_1: 1 } }, { a: { var_1: 2 } }); // return { a: { var_1: 2 } } &lt;static&gt; removeItems(arr, startIdx, removeCount) Remove items of an arry Parameters: Name Type Description arr array The target array startIdx number The index to begin removing from (inclusive) removeCount number How many items to remove Source: utils.js, line 150 &lt;static&gt; rgb2hex(rgb) Converts a color as an [R, G, B] array to a hex number Parameters: Name Type Description rgb Array.&lt;number&gt; Source: utils.js, line 100 Returns: The color number Type number &lt;static&gt; wrap(value, min, max) Bring the value between min and max. Values larger than max are wrapped back to minand vice-versa. Parameters: Name Type Description value number value to process min number lowest valid value max number largest valid value Source: utils.js, line 45 Returns: result Type number × Search results Close Made with ♥ by Sean Bohan "},"module-engine_vector.html":{"id":"module-engine_vector.html","title":"Module: engine/vector","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Module: engine/vector Source: vector.js, line 423 See: Vector × Search results Close Made with ♥ by Sean Bohan "},"PersistentData.html":{"id":"PersistentData.html","title":"Class: PersistentData","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: PersistentData PersistentData PersistentData new PersistentData() Persistent data storage, save/load data from localStorage. Source: storage/persistent-data.js, line 11 Extends Data Methods &lt;static&gt; load() Load data from localStorage. Source: storage/persistent-data.js, line 25 &lt;static&gt; save() Save data to localStorage. Source: storage/persistent-data.js, line 17 addArray(key, defaultVal) Add an array property. Parameters: Name Type Description key string defaultVal array Inherited From: Data#addArray Source: storage/data.js, line 119 Returns: Self for chaining Type Data addBool(key, defaultVal) Add a boolean property. Parameters: Name Type Description key string defaultVal boolean Inherited From: Data#addBool Source: storage/data.js, line 51 Returns: Self for chaining Type Data addFloat(key, defaultVal) Add a float number property. Parameters: Name Type Description key string defaultVal number Inherited From: Data#addFloat Source: storage/data.js, line 85 Returns: Self for chaining Type Data addInt(key, defaultVal) Add a integer number property. Parameters: Name Type Description key string defaultVal number Inherited From: Data#addInt Source: storage/data.js, line 68 Returns: Self for chaining Type Data addListener() Inherited From: EventEmitter#addListener Source: eventemitter3.js, line 250 addString(key, defaultVal) Add a string property. Parameters: Name Type Description key string defaultVal string Inherited From: Data#addString Source: storage/data.js, line 102 Returns: Self for chaining Type Data emit(event) Emit an event to all registered event listeners. Parameters: Name Type Description event string The name of the event. Inherited From: EventEmitter#emit Source: eventemitter3.js, line 67 Returns: Indication if we've emitted an event. Type boolean get(key) Get value of a property Parameters: Name Type Description key string Inherited From: Data#get Source: storage/data.js, line 227 getArrayItem(key, idx) Get value of an element of an array property Parameters: Name Type Description key string idx number Inherited From: Data#getArrayItem Source: storage/data.js, line 240 has(key) Check whether this data has a property with a key. Parameters: Name Type Description key string Inherited From: Data#has Source: storage/data.js, line 137 Returns: Type boolean listeners(event, exists) Return a list of assigned event listeners. Parameters: Name Type Description event string The events that should be listed. exists boolean We only need to know if there are listeners. Inherited From: EventEmitter#listeners Source: eventemitter3.js, line 43 Returns: Type array | boolean off() Inherited From: EventEmitter#off Source: eventemitter3.js, line 244 on(event, fn, context) Register a new EventListener for the given event. Parameters: Name Type Description event string Name of the event. fn functon Callback function. context Mixed The context of the function. Inherited From: EventEmitter#on Source: eventemitter3.js, line 126 once(event, fn, context) Add an EventListener that's only called once. Parameters: Name Type Description event string Name of the event. fn function Callback function. context Mixed The context of the function. Inherited From: EventEmitter#once Source: eventemitter3.js, line 151 removeAllListeners(event) Remove all listeners or only the listeners for the specified event. Parameters: Name Type Description event string The event want to remove all listeners for. Inherited From: EventEmitter#removeAllListeners Source: eventemitter3.js, line 228 removeListener(event, fn, context, once) Remove event listeners. Parameters: Name Type Description event string The event we want to remove. fn function The listener that we need to find. context Mixed Only remove listeners matching this context. once boolean Only remove once listeners. Inherited From: EventEmitter#removeListener Source: eventemitter3.js, line 176 set(key, value) Set a property by key. Parameters: Name Type Description key string value * Inherited From: Data#set Source: storage/data.js, line 148 Returns: Self for chaining Type Data setArrayItem(key, idx, value) Set value of an element of array property Parameters: Name Type Description key string idx number value bool Inherited From: Data#setArrayItem Source: storage/data.js, line 208 Returns: Self for chaining Type Data setBool(key, value) Set a boolean property Parameters: Name Type Description key string value boolean Inherited From: Data#setBool Source: storage/data.js, line 164 Returns: Self for chaining Type Data setFloat(key, value) Set a float number property Parameters: Name Type Description key string value number Inherited From: Data#setFloat Source: storage/data.js, line 186 Returns: Self for chaining Type Data setInt(key, value) Set a integer number property Parameters: Name Type Description key string value number Inherited From: Data#setInt Source: storage/data.js, line 175 Returns: Self for chaining Type Data setString(key, value) Set a string property Parameters: Name Type Description key string value string Inherited From: Data#setString Source: storage/data.js, line 197 Returns: Self for chaining Type Data validKey(key) Check whether a key is valid. Parameters: Name Type Description key string Inherited From: Data#validKey Source: storage/data.js, line 36 Returns: Type boolean × Search results Close Made with ♥ by Sean Bohan "},"RandomDataGenerator.html":{"id":"RandomDataGenerator.html","title":"Class: RandomDataGenerator","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: RandomDataGenerator RandomDataGenerator RandomDataGenerator new RandomDataGenerator(seeds) An instance of RandomDataGenerator is exported as engine/rnd. Parameters: Name Type Argument Description seeds Array.&lt;any&gt; | string &lt;optional&gt; An array of values to use as the seed, or a generator state (from {#state}). Source: rnd.js, line 8 Methods between(min, max) Returns a random integer between and including min and max.This method is an alias for RandomDataGenerator.integerInRange. Parameters: Name Type Description min number The minimum value in the range. max number The maximum value in the range. Source: rnd.js, line 163 Returns: A random number between min and max. Type number frac() Returns a random real number between 0 and 1. Source: rnd.js, line 131 Returns: A random real number between 0 and 1. Type number integer() Returns a random integer between 0 and 2^32. Source: rnd.js, line 121 Returns: A random integer between 0 and 2^32. Type number integerInRange(min, max) Returns a random integer between and including min and max. Parameters: Name Type Description min number The minimum value in the range. max number The maximum value in the range. Source: rnd.js, line 151 Returns: A random number between min and max. Type number normal() Returns a random real number between -1 and 1. Source: rnd.js, line 188 Returns: A random real number between -1 and 1. Type number pick(ary) Returns a random member of array. Parameters: Name Type Description ary Array An Array to pick a random member of. Source: rnd.js, line 213 Returns: A random member of the array. Type any real() Returns a random real number between 0 and 2^32. Source: rnd.js, line 141 Returns: A random real number between 0 and 2^32. Type number realInRange(min, max) Returns a random real number between min and max. Parameters: Name Type Description min number The minimum value in the range. max number The maximum value in the range. Source: rnd.js, line 176 Returns: A random number between min and max. Type number sow(seeds) Reset the seed of the random data generator. Note: the seed array is only processed up to the first undefined (or null) value, should such be present. Parameters: Name Type Description seeds Array.&lt;any&gt; The array of seeds: the toString() of each value is used. Source: rnd.js, line 62 state(state) Gets or Sets the state of the generator. This allows you to retain the valuesthat the generator is using between games, i.e. in a game save file. To seed this generator with a previously saved state you can pass it as theseed value in your game config, or call this method directly after Phaser has booted. Call this method with no parameters to return the current state. If providing a state it should match the same format that this methodreturns, which is a string with a header !rnd followed by the c,s0, s1 and s2 values respectively, each comma-delimited. Parameters: Name Type Argument Description state string &lt;optional&gt; Generator state to be set. Source: rnd.js, line 235 Returns: The current state of the generator. Type string uuid() Returns a valid RFC4122 version4 ID hex string from https://gist.github.com/1308368 Source: rnd.js, line 198 Returns: A valid RFC4122 version4 ID hex string Type string weightedPick(ary) Returns a random member of array, favoring the earlier entries. Parameters: Name Type Description ary Array An Array to pick a random member of. Source: rnd.js, line 224 Returns: A random member of the array. Type any × Search results Close Made with ♥ by Sean Bohan "},"Scene.html":{"id":"Scene.html","title":"Class: Scene","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Scene Scene Scene new Scene() Scene is the main hub for a game. A game made with LesserPandais a combination of different scenes(menu, shop, game, game-over .etc). Source: scene.js, line 14 Extends EvenetEmitter Members &lt;static&gt; systems :object Sub-systems. Type: object Source: scene.js, line 159 &lt;static&gt; updateOrder :array Sub-system updating order Type: array Source: scene.js, line 165 desiredFPS Desired FPS this scene should run Properties: Name Type Description desiredFPS Number Default Value: 30 Source: scene.js, line 22 Methods &lt;static&gt; registerSystem(name, system) Register a new sub-system. Parameters: Name Type Description name string system object Source: scene.js, line 171 &lt;protected&gt; _awake() Called before activating this scene. Source: scene.js, line 49 &lt;protected&gt; _freeze() Called before deactivating this scene. Source: scene.js, line 98 &lt;protected&gt; _update() Called each single frame once or more. Source: scene.js, line 63 addActor(actor, tag) Add actor to this scene, so its update() function gets called every frame. Parameters: Name Type Description actor Actor Actor you want to add tag string Tag of this actor, default is '0' Source: scene.js, line 220 awake() Awake is called when this scene is activated. Source: scene.js, line 109 freeze() Freeze is called when this scene is deactivated(switched to another one) Source: scene.js, line 133 pause() System pause callback. Source: scene.js, line 140 pauseActorsTagged(tag) Pause actors with a specific tag. Parameters: Name Type Description tag string Source: scene.js, line 264 pauseAnimationsTagged(tag) Pause animations with specific tag. Parameters: Name Type Description tag string Source: animation/index.js, line 22 Returns: Self for chaining. Type Scene postUpdate() PostUpdate is called at the end of each frame, right after update. Source: scene.js, line 127 preUpdate() PreUpdate is called at the beginning of each frame Source: scene.js, line 115 removeActor(actor) Remove actor from scene. Parameters: Name Type Description actor Actor Source: scene.js, line 246 resume() System resume callback. Source: scene.js, line 146 resumeActorsTagged(tag) Resume actors with a specific tag. Parameters: Name Type Description tag string Source: scene.js, line 279 resumeAnimationsTagged(tag) Resume animations with specific tag. Parameters: Name Type Description tag string Source: animation/index.js, line 38 Returns: Self for chaining. Type Scene runAction(action, target, tag) Run an action on a target object Parameters: Name Type Description action module:engine/animation/action~Action Action to run target object Target object tag string Tag of this action player (default is '0') Source: animation/action.js, line 455 Returns: An ActionPlayer instance that runs the specific Action Type module:engine/animation/action~ActionPlayer spawnActor(actor, x, y, layerName, settings) Spawn an Actor to this scene Parameters: Name Type Description actor Actor Actor class x number y number layerName string Name of the layer to add to(key of a PIXI.Container instance in this scene) settings object Custom settings Properties Name Type Argument Description name string &lt;optional&gt; Name of this actor tag string &lt;optional&gt; Tag of this actor Source: scene.js, line 187 Returns: Actor instance Type Actor tween(context, tag) Create and add a new tween to the scene. Parameters: Name Type Description context Oblject Context of this tween tag string Tag of this tween (default is '0') Source: animation/tween.js, line 367 Returns: Type module:engine/animation/tween~Tween update() Update is called each frame, right after preUpdate. Source: scene.js, line 121 × Search results Close Made with ♥ by Sean Bohan "},"SpatialHash.html":{"id":"SpatialHash.html","title":"Class: SpatialHash","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: SpatialHash SpatialHash SpatialHash new SpatialHash(power_of_two) Parameters: Name Type Description power_of_two number how many times the rects should be shifted when hashing. Source: physics/spatial-hash.js, line 65 Methods clear() Clear and reset. Source: physics/spatial-hash.js, line 75 getNumBuckets() Get buckets amount. Source: physics/spatial-hash.js, line 93 Returns: Type number insert(obj, rect) Insert an object into the hash Parameters: Name Type Argument Description obj object rect object &lt;optional&gt; Source: physics/spatial-hash.js, line 112 retrieve(obj, rect) Get objects in the same grid of an object Parameters: Name Type Argument Description obj object rect object &lt;optional&gt; Source: physics/spatial-hash.js, line 133 Returns: Type array × Search results Close Made with ♥ by Sean Bohan "},"Storage.html":{"id":"Storage.html","title":"Class: Storage","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Storage Storage Storage new Storage(config) Local storage wrapper.No need to create instance, an instance is exported as default. Parameters: Name Type Description config object Settings from game/config. Source: storage/storage.js, line 12 Members id :string Namespace to save data to. Type: string Source: storage/storage.js, line 17 supported :boolean Is local storage supported? Type: boolean Source: storage/storage.js, line 22 Methods get(key, defaultValue) Get key from local storage. Parameters: Name Type Argument Description key string defaultValue * &lt;optional&gt; Source: storage/storage.js, line 37 Returns: value Type * has(key) Check if a key is in local storage. Parameters: Name Type Description key string Source: storage/storage.js, line 56 Returns: Type boolean remove(key) Remove key from local storage. Parameters: Name Type Description key string Source: storage/storage.js, line 67 reset() Reset local storage. This removes ALL keys. Source: storage/storage.js, line 77 set(key, value) Set value to local storage. Parameters: Name Type Description key string value * Source: storage/storage.js, line 25 × Search results Close Made with ♥ by Sean Bohan "},"Tilemap.html":{"id":"Tilemap.html","title":"Class: Tilemap","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Tilemap Tilemap Tilemap new Tilemap(data, tilesets, group) Tilemap You need a map data and a table of tileset textures to be able tocreate a Tilemap instance. Map data is defined by an Array of layers. Layer defination: { tileset: string tilesize: number width: number height: number data: array&lt;array&lt;number&gt;&gt; }Tileset table is used to look up textures of layers.A simple example would like this: { 'background.png': loader.resources['background.png'].texture, 'buildings.png': loader.resources['buildings.png'].texture, } Parameters: Name Type Argument Description data array.&lt;object&gt; List of layer definations. tilesets object Table of tilesets. group number &lt;optional&gt; Collision group of collision layer(if exists). Source: tilemap/index.js, line 43 Methods &lt;static&gt; fromTiledJson(json, tilesets, group) Create a Tilemap instance from Tiled JSON file. Notice:since tileset of Tiled maps uses relative path to save, whichcan be quite boring sometimes and is not designed to be capablewith this implementation, the parser will simply ignore tilesetdata of the map. But we still need tileset info to render, so there're some extrasteps you need to follow: Only one tileset per layer Add a custom property &quot;tileset&quot; and set its value to name of the image Parameters: Name Type Description json JSON Map data tilesets object Tileset table group number Collision group Source: tilemap/index.js, line 143 Returns: Tilemap instance Type Tilemap addTo(scene, container) Add this tilemap to a scene. Parameters: Name Type Description scene Scene Scene to add to. container PIXI.Container Container to add tilemap to. Source: tilemap/index.js, line 69 destroy() Destroy this tilemap instance and free the memory. Source: tilemap/index.js, line 56 × Search results Close Made with ♥ by Sean Bohan "},"Timer.html":{"id":"Timer.html","title":"Class: Timer","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Timer Timer Timer new Timer(ms) Timer constructor should not be used directly, use the static methods instead: Timer.later Timer.laterSec Timer.interval Timer.intervalSec Parameters: Name Type Argument Description ms number &lt;optional&gt; Source: timer.js, line 17 Members &lt;static&gt; delta :number Delta since last frame (ms). Type: number Source: timer.js, line 183 &lt;static&gt; now :number A cumulative number represents how long has passed since thegame is launched (in milliseconds). Type: number Source: timer.js, line 190 &lt;static&gt; timers :object Map of timers Type: object Source: timer.js, line 196 duration :number Duration of this timer. Type: number Default Value: 0 Source: timer.js, line 29 &lt;protected&gt; removed :boolean Whether this timer is already removed. Type: boolean Default Value: false Source: timer.js, line 44 repeat :boolean Whether this timer should repeat. Type: boolean Default Value: false Source: timer.js, line 36 Methods &lt;static&gt; interval(interval, callback, context, tag) Create a repeat timer. Parameters: Name Type Description interval number Time in milliseconds callback function Callback function to run, when timer ends context object Context of the callback to be invoked tag string Tag of this timer, default is '0' Source: timer.js, line 271 Returns: Type Timer &lt;static&gt; intervalSec() Create a repeat timer while the time is in seconds instead. Source: timer.js, line 303 See: Timer.interval &lt;static&gt; later(wait, callback, context, tag) Create an one-shoot timer. Parameters: Name Type Description wait number Time in milliseconds callback function Callback function to run, when timer ends context object Context of the callback to be invoked tag string Tag of this timer, default is '0' Source: timer.js, line 229 Returns: Type Timer &lt;static&gt; laterSec() Create an one-shoot timer while the time is in seconds instead. Source: timer.js, line 261 See: Timer.later &lt;static&gt; pauseTimersTagged(tag) Pause timers with a specific tag. Parameters: Name Type Description tag string Source: timer.js, line 323 &lt;static&gt; remove(timer) Remove a timer. Parameters: Name Type Description timer Timer Source: timer.js, line 313 &lt;static&gt; resumeTimersTagged(tag) Resume timers with a specific tag. Parameters: Name Type Description tag string Source: timer.js, line 338 &lt;protected, static&gt; update() Update timer system. Source: timer.js, line 201 pause() Pause timer. Source: timer.js, line 89 reset() Reset timer to current duration. Source: timer.js, line 78 resume() Resume paused timer. Source: timer.js, line 99 set(ms) Set duration for timer. Parameters: Name Type Description ms number Source: timer.js, line 62 &lt;protected&gt; update(delta) Update method that is called by timer system. Parameters: Name Type Description delta number Delta time Source: timer.js, line 109 × Search results Close Made with ♥ by Sean Bohan "},"Tween.html":{"id":"Tween.html","title":"Class: Tween","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Tween Tween Tween new Tween(context) Parameters: Name Type Description context object Source: animation/tween.js, line 30 Extends EventEmitter Members &lt;static&gt; ACTION_TYPES :number Action type enums Type: number Properties: Name Type Default Description REPEAT number 0 WAIT number 1 ANIMATE number 2 Source: animation/tween.js, line 16 actions :array List of actions. Type: array Source: animation/tween.js, line 39 delta :number Delta cache for updating Type: number Source: animation/tween.js, line 48 duration :number Tween duration. Type: number Default Value: 500 Source: animation/tween.js, line 55 easing Tween's easing function. Properties: Name Type Description easing function Source: animation/tween.js, line 67 finished :boolean Whether this tween is finished Type: boolean Source: animation/tween.js, line 78 interpolation Tween's interpolation function. Properties: Name Type Description interpolationFn function Source: animation/tween.js, line 72 paused :boolean Whether this tween is paused Type: boolean Source: animation/tween.js, line 90 progress :number Progress of current performing action Type: number Source: animation/tween.js, line 61 removed :boolean Whether this tween is removed Type: boolean Source: animation/tween.js, line 84 Methods &lt;static&gt; create(context) Tween factory method. Parameters: Name Type Description context object Source: animation/tween.js, line 352 Returns: Type module:engine/animation/tween~Tween addListener() Inherited From: EventEmitter#addListener Source: eventemitter3.js, line 250 emit(event) Emit an event to all registered event listeners. Parameters: Name Type Description event string The name of the event. Inherited From: EventEmitter#emit Source: eventemitter3.js, line 67 Returns: Indication if we've emitted an event. Type boolean listeners(event, exists) Return a list of assigned event listeners. Parameters: Name Type Description event string The events that should be listed. exists boolean We only need to know if there are listeners. Inherited From: EventEmitter#listeners Source: eventemitter3.js, line 43 Returns: Type array | boolean off() Inherited From: EventEmitter#off Source: eventemitter3.js, line 244 on(event, fn, context) Register a new EventListener for the given event. Parameters: Name Type Description event string Name of the event. fn functon Callback function. context Mixed The context of the function. Inherited From: EventEmitter#on Source: eventemitter3.js, line 126 once(event, fn, context) Add an EventListener that's only called once. Parameters: Name Type Description event string Name of the event. fn function Callback function. context Mixed The context of the function. Inherited From: EventEmitter#once Source: eventemitter3.js, line 151 pause() Pause this tween Source: animation/tween.js, line 173 removeAllListeners(event) Remove all listeners or only the listeners for the specified event. Parameters: Name Type Description event string The event want to remove all listeners for. Inherited From: EventEmitter#removeAllListeners Source: eventemitter3.js, line 228 removeListener(event, fn, context, once) Remove event listeners. Parameters: Name Type Description event string The event we want to remove. fn function The listener that we need to find. context Mixed Only remove listeners matching this context. once boolean Only remove once listeners. Inherited From: EventEmitter#removeListener Source: eventemitter3.js, line 176 resume() Resume this tween from pausing Source: animation/tween.js, line 183 stop() Stop this tween Source: animation/tween.js, line 163 to(properties, duration, easing, interpolation) Add a new action to the tween Parameters: Name Type Description properties Object Target properties duration Number Duration of the action in ms easing String | function Easing function interpolation String | function Interpolation function Source: animation/tween.js, line 103 wait(time) Wait a short time before next action Parameters: Name Type Description time number Time to wait in ms Source: animation/tween.js, line 152 × Search results Close Made with ♥ by Sean Bohan "},"Vector.html":{"id":"Vector.html","title":"Class: Vector","body":" Lesser Panda Modules engine/actorengine/analyticsengine/animationengine/animation/actionengine/animation/easingengine/animation/tweenengine/animation/utilsengine/audioengine/behaviorengine/cameraengine/coreengine/deviceengine/eventemitter3engine/keyboardengine/loaderengine/physicsengine/physics/spatial-hashengine/rendererengine/resizeengine/rndengine/sceneengine/storageengine/storage/dataengine/storage/persistent-dataengine/tilemapengine/tilemap/filmstripengine/tilemap/tiled-converterengine/tilemap/utilsengine/timerengine/utilsengine/vector Classes ActorAnalyticsBehaviorCameraCollisionLayerDataEventEmitterKeyboardengine/animation/action~Actionengine/animation/action~ActionPlayerengine/animation/action~Channelengine/animation/action~Keyengine/physics~AABBSolverengine/physics~Bodyengine/physics~Boxengine/physics~Circleengine/physics~Polygonengine/physics~SATSolverengine/physics~WorldPersistentDataRandomDataGeneratorSceneSpatialHashStorageTilemapTimerTweenVector Class: Vector Vector Vector new Vector(x, y) The Vector object represents a location in a two-dimensional coordinate system, where x represents the horizontal axis and y represents the vertical axis.Prefer Vector.create for new instances. Parameters: Name Type Argument Default Description x number &lt;optional&gt; 0 Position of the point on the x axis y number &lt;optional&gt; 0 Position of the point on the y axis Source: vector.js, line 19 Members x :number Type: number Source: vector.js, line 23 y :number Type: number Source: vector.js, line 27 Methods &lt;static&gt; create(x, y) Create a vecotr instance. This is prefered than new Vector() sincethe instance may come from the pool. Parameters: Name Type Argument Description x number &lt;optional&gt; Position of the point on the x axis y number &lt;optional&gt; Position of the point on the y axis Source: vector.js, line 399 Returns: Vector instance Type Vector &lt;static&gt; recycle(vector) Recycle a Vector instance into the pool for later use. Parameters: Name Type Description vector Vector Vector instance to be recycled. Source: vector.js, line 415 See: Vector.create add(x, y) Add to vector values. Parameters: Name Type Argument Description x number | Vector Number or Vector to add to self. y number &lt;optional&gt; Number to add to y. Source: vector.js, line 67 Returns: Self for chaining. Type Vector angle(vector) Get angle vector angle or angle between two vectors. Parameters: Name Type Argument Description vector Vector &lt;optional&gt; Target vector to calculate with, angle of self is returned when it is not provided. Source: vector.js, line 244 Returns: Angle between self and target. Type number angleFromOrigin(vector) Get angle between two vectors from origin. Parameters: Name Type Description vector Vector Source: vector.js, line 259 Returns: Angle. Type number clone() Clone this vector. Source: vector.js, line 44 Returns: The cloned vector. Type Vector copy(v) Copy values from another vector. Parameters: Name Type Description v Vector Vector to copy from. Source: vector.js, line 54 Returns: Self for chaining. Type Vector distance(vector) Get distance of two vectors. Parameters: Name Type Description vector Vector Target vector to calculate distance from. Source: vector.js, line 123 Returns: Distance. Type number divide(x, y) Divide self by another vector or 2 numbers. Parameters: Name Type Argument Description x number | Vector Number or Vector to divide. y number &lt;optional&gt; Number to divide by. Source: vector.js, line 109 Returns: Self for chaining. Type Vector dot(vector) Dot operation with another vector. Parameters: Name Type Argument Description vector Vector &lt;optional&gt; Vector to dot with. Source: vector.js, line 169 Returns: Result of dot operation. Type number dotNormalized(vector) Get normalized dot of vector. Parameters: Name Type Argument Description vector Vector &lt;optional&gt; Vector to dot with Source: vector.js, line 181 Returns: Result of the dot operation. Type number equals(vector) Returns true if the given point is equal to this point Parameters: Name Type Description vector Vector Vector to compare to. Source: vector.js, line 282 Returns: Whether the two vectors are equal Type boolean length() Get length of vector. Source: vector.js, line 149 Returns: Length of this vector. Type number limit(vector) Limit vector values. Parameters: Name Type Description vector Vector Clamp this vector to a limitation(vector) Source: vector.js, line 231 Returns: Self for chaining. Type Vector multiply(x, y) Multiply self with another vector or 2 numbers. Parameters: Name Type Argument Description x number | Vector Number or Vector to multiply. y number &lt;optional&gt; Number to multiply to y. Source: vector.js, line 95 Returns: Self for chaining. Type Vector normalize() Normalize vector. Source: vector.js, line 218 Returns: Self for chaining Type Vector perp() Change this vector to be perpendicular to what it was before. (Effectivelyroatates it 90 degrees in a clockwise direction) Source: vector.js, line 293 Returns: Self for chaining. Type Vector project(other) Project this vector on to another vector. Parameters: Name Type Description other Vector The vector to project onto Source: vector.js, line 319 Returns: Self for chaining. Type Vector projectN(other) Project this vector onto a vector of unit length. This is slightly more efficientthan project when dealing with unit vectors. Parameters: Name Type Description other Vector The unit vector to project onto Source: vector.js, line 333 Returns: Self for chaining. Type Vector reflect(axis) Reflect this vector on an arbitrary axis. Parameters: Name Type Description axis Vector The vector representing the axis Source: vector.js, line 348 Returns: Self for chaining. Type Vector reflectN(axis) Reflect this vector on an arbitrary axis (represented by a unit vector). This isslightly more efficient than reflect when dealing with an axis that is a unit vector. Parameters: Name Type Description axis Vector The unit vector representing the axis Source: vector.js, line 364 Returns: Self for chaining. Type Vector reverse() Reverse this vector Source: vector.js, line 307 Returns: Self for chaining. Type Vector rotate(angle) Rotate vector in radians. Parameters: Name Type Description angle number Angle to rotate. Source: vector.js, line 201 Returns: Self for chaining. Type Vector round() Round vector values. Source: vector.js, line 270 Returns: Self for chaining Type Vector set(x, y) Set vector values. Parameters: Name Type Argument Default Description x number &lt;optional&gt; 0 Position of the point on the x axis y number &lt;optional&gt; 0 Position of the point on the y axis Source: vector.js, line 30 Returns: Vector itself for chaining. Type Vector sign(vector) Check whether the direction from self to other vector is clockwise. Parameters: Name Type Description vector Vector Source: vector.js, line 381 Returns: Result (1 = CW, -1 = CCW) Type number squaredDistance(vector) Get squared euclidian distance of two vectors. Parameters: Name Type Description vector Vector Target vector to calculate distance from. Source: vector.js, line 136 Returns: Squared distance value. Type number squaredLength() Get squared length of vector. Source: vector.js, line 159 Returns: Squared length of this vector. Type number subtract(x, y) Subtract from vector values. Parameters: Name Type Argument Description x number | Vector Number or Vector to subtract from. y number &lt;optional&gt; Number to subtract from y. Source: vector.js, line 81 Returns: Self for chaining. Type Vector × Search results Close Made with ♥ by Sean Bohan "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
